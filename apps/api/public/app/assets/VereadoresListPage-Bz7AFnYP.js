import{r as n,j as e}from"./vendor-radix-E4gGnxjO.js";import{B as f}from"./button-WIEOpYI-.js";import{I as F}from"./input-BxohVy9Z.js";import{B as y}from"./badge-C76PU-ep.js";import{C as V,a as q}from"./card-C8veluk1.js";import{S as z,a as E,b as I,c as P,d as b}from"./select-BAXdK2F3.js";import{A as Q,a as U,b as H}from"./avatar-nLyNSPe-.js";import{u as R,l as K,d as O,X as Y,b as $,B as M,Q as N}from"./index-BSTgcX-N.js";import{u as C}from"./vendor-query-CeEprVe-.js";import{a as X,b as _}from"./votes.service-BhTDStON.js";import{A as D}from"./arrow-left-Pi1Axqr9.js";import{S as w}from"./search-BwNWK0EF.js";import{A as S,m as d}from"./vendor-motion-R11C44Ho.js";import{F as G}from"./filter-BQXudgiX.js";import{U as k}from"./users-D9rhPDFg.js";import"./vendor-utils-zfZBtJeF.js";import"./chevron-down-DFgiFmiE.js";import"./chevron-up-7ReYl3XM.js";function fe(){const a=R(),{activeTab:m,setActiveTab:x}=K(),[t,i]=n.useState(""),[r,g]=n.useState("all"),[p,A]=n.useState(!1),{data:u,isLoading:L}=C({queryKey:N.votes.vereadores({partido:r!=="all"?r:void 0,search:t||void 0}),queryFn:()=>X.getAll({partido:r!=="all"?r:void 0,search:t||void 0}),staleTime:10*60*1e3}),{data:T}=C({queryKey:N.votes.partidos,queryFn:()=>_.getPartidos(),staleTime:60*60*1e3}),c=L,l=n.useMemo(()=>{if(!u)return[];let s=[...u];if(t){const o=t.toLowerCase();s=s.filter(h=>h.nome.toLowerCase().includes(o))}return s.sort((o,h)=>o.nome.localeCompare(h.nome,"pt-BR")),s},[u,t]),j=()=>{i(""),g("all")},B=s=>{x(s),a("/")},v=t||r!=="all";return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-muted/50",children:e.jsxs("div",{className:"relative w-full max-w-[420px] h-full bg-background overflow-hidden shadow-elevated",children:[e.jsxs("div",{className:"h-full overflow-y-auto pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-xl border-b",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-top",children:[e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>a(-1),children:e.jsx(D,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-bold",children:"Vereadores"}),e.jsx(f,{variant:"ghost",size:"icon",onClick:()=>A(!p),className:O(p&&"bg-primary/10 text-primary"),children:e.jsx(w,{className:"h-5 w-5"})})]})}),e.jsxs("div",{className:"sticky top-14 z-30 bg-background/95 backdrop-blur-xl border-b px-4 py-3 space-y-3",children:[e.jsx(S,{children:p&&e.jsx(d.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(F,{placeholder:"Buscar vereador...",value:t,onChange:s=>i(s.target.value),className:"pl-10 pr-10",autoFocus:!0}),t&&e.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(Y,{className:"h-4 w-4 text-muted-foreground hover:text-foreground"})})]})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs(z,{value:r,onValueChange:g,children:[e.jsx(E,{className:"w-full",children:e.jsx(I,{placeholder:"Filtrar por partido"})}),e.jsxs(P,{children:[e.jsx(b,{value:"all",children:"Todos os partidos"}),T?.map(s=>e.jsx(b,{value:s.sigla,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.corHex}}),s.sigla," - ",s.nome]})},s.id))]})]})]})]}),e.jsxs("main",{className:"px-4 py-5",children:[!c&&l.length>0&&e.jsxs(d.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),l.length," ",l.length===1?"vereador":"vereadores"]}),v&&e.jsx("button",{onClick:j,className:"text-sm text-primary font-medium",children:"Limpar filtros"})]}),c&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4",children:[e.jsx($,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Carregando vereadores..."})]}),!c&&l.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 gap-4 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center",children:e.jsx(k,{className:"h-8 w-8 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:"Nenhum vereador encontrado"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Tente ajustar os filtros de busca"})]}),v&&e.jsx(f,{variant:"outline",size:"sm",onClick:j,children:"Limpar filtros"})]}),!c&&l.length>0&&e.jsx(S,{mode:"popLayout",children:e.jsx(d.div,{layout:!0,className:"grid grid-cols-2 gap-3 pb-8",children:l.map((s,o)=>e.jsx(J,{vereador:s,index:o,onClick:()=>a(`/vereadores/${s.slug}`)},s.id))})})]})]}),e.jsx(M,{activeTab:m,onTabChange:B})]})})}function J({vereador:a,index:m,onClick:x}){const t=a.nome.split(" ").map(i=>i[0]).slice(0,2).join("").toUpperCase();return e.jsx(d.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:m*.03},children:e.jsx(V,{className:"cursor-pointer hover:shadow-lg transition-all duration-200 hover:-translate-y-0.5 overflow-hidden",onClick:x,children:e.jsxs(q,{className:"p-4 flex flex-col items-center text-center gap-3",children:[e.jsxs(Q,{className:"w-16 h-16 border-2 border-muted",children:[e.jsx(U,{src:a.fotoUrl||"",alt:a.nome}),e.jsx(H,{className:"text-lg font-semibold bg-primary/10 text-primary",children:t})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("h3",{className:"font-semibold text-sm leading-tight line-clamp-2",children:a.nome}),a.partido&&e.jsx(y,{variant:"secondary",className:"text-xs px-2 py-0.5",style:{backgroundColor:`${a.partido.corHex}20`,borderColor:a.partido.corHex,color:a.partido.corHex},children:a.partido.sigla}),!a.emExercicio&&e.jsx(y,{variant:"outline",className:"text-xs px-2 py-0.5 text-muted-foreground",children:"Licenciado"})]})]})})})}export{fe as default};
