import{b as w,c as R}from"./index-2hiNaDXu.js";import{r,j as e}from"./vendor-radix-BJ0nhWns.js";import{B as $}from"./button-CPNhRLs3.js";import{m as i,A as S}from"./vendor-motion-Clpc6Aj5.js";import{M as q}from"./message-circle-DXHweHOg.js";import{S as _}from"./smartphone-BLjS9wWk.js";import{C as G}from"./check-Cr693hz8.js";import{L as H}from"./loader-circle-Bk0nGNmh.js";import{S as W}from"./sparkles-C55F-Erd.js";import{C as J}from"./circle-alert-CQgq0B0Q.js";import{R as E}from"./auth-utils-C6It0CBK.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=w("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=w("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=w("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);function le({value:u,onChange:l,onComplete:h,onResend:I,error:n,expiresAt:y,disabled:j=!1,isResending:N=!1,isVerifying:b=!1,phone:k}){const d=r.useRef([]),M=r.useRef(null),[A,c]=r.useState(null),[v,F]=r.useState(0),[P,C]=r.useState(!1),[L,D]=r.useState(null),o=6,p=u.padEnd(o," ").split("").slice(0,o);r.useEffect(()=>{if(y){const t=()=>{const s=Math.max(0,Math.floor((y.getTime()-Date.now())/1e3));return F(s),s};t();const a=setInterval(()=>{t()===0&&clearInterval(a)},1e3);return()=>clearInterval(a)}},[y]),r.useEffect(()=>{if(n){C(!0);const t=setTimeout(()=>C(!1),600);return()=>clearTimeout(t)}},[n]),r.useEffect(()=>{const t=setTimeout(()=>{d.current[0]?.focus(),c(0)},300);return()=>clearTimeout(t)},[]),r.useEffect(()=>{if(u.length===o&&h&&!n&&!b){const t=setTimeout(()=>{h(u)},300);return()=>clearTimeout(t)}},[u,h,n,b]);const g=r.useCallback(t=>{D(t),setTimeout(()=>D(null),300)},[]),z=r.useCallback((t,a)=>{const s=a.replace(/\D/g,"").slice(-1);if(s){const m=[...p];m[t]=s;const x=m.join("").replace(/ /g,"");l(x),g(t),t<o-1&&setTimeout(()=>{d.current[t+1]?.focus(),c(t+1)},50)}},[p,l,g]),K=r.useCallback((t,a)=>{if(a.key==="Backspace"){a.preventDefault();const s=[...p];p[t]!==" "?(s[t]=" ",l(s.join("").replace(/ /g,""))):t>0&&(s[t-1]=" ",l(s.join("").replace(/ /g,"")),d.current[t-1]?.focus(),c(t-1))}a.key==="ArrowLeft"&&t>0&&(d.current[t-1]?.focus(),c(t-1)),a.key==="ArrowRight"&&t<o-1&&(d.current[t+1]?.focus(),c(t+1))},[p,l]),B=r.useCallback(t=>{t.preventDefault();const a=t.clipboardData.getData("text").replace(/\D/g,"").slice(0,o);if(a.length>0){l(a),a.split("").forEach((m,x)=>{setTimeout(()=>g(x),x*80)});const s=Math.min(a.length,o-1);setTimeout(()=>{d.current[s]?.focus(),c(s)},a.length*80+100)}},[l,g]),O=t=>{const a=Math.floor(t/60),s=t%60;return`${a}:${s.toString().padStart(2,"0")}`},T=u.length===o,V=u.length/o*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center space-y-3",children:[e.jsx(i.div,{animate:{scale:[1,1.05,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},className:"inline-flex p-4 rounded-2xl bg-gradient-to-br from-green-400 to-green-600 shadow-lg shadow-green-500/30",children:e.jsx(q,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl",children:"Verificação WhatsApp"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enviamos um código de 6 dígitos para"}),k&&e.jsxs(i.p,{initial:{opacity:0},animate:{opacity:1},className:"text-primary font-semibold flex items-center justify-center gap-1 mt-1",children:[e.jsx(_,{className:"h-4 w-4"}),k]})]})]}),e.jsx("div",{className:"relative h-1.5 bg-muted rounded-full overflow-hidden",children:e.jsx(i.div,{initial:{width:0},animate:{width:`${V}%`},transition:{duration:.3,ease:"easeOut"},className:R("absolute inset-y-0 left-0 rounded-full",T?"bg-gradient-to-r from-green-400 to-green-600":"bg-gradient-to-r from-primary to-primary/70")})}),e.jsx(i.div,{ref:M,animate:P?{x:[-12,12,-12,12,-6,6,0],transition:{duration:.5}}:{},className:"flex justify-center gap-2 sm:gap-3",children:p.map((t,a)=>{const s=t!==" ",m=A===a,x=L===a;return e.jsxs(i.div,{initial:{opacity:0,y:30,scale:.8},animate:{opacity:1,y:0,scale:x?1.1:1},transition:{delay:a*.08,duration:.3,scale:{duration:.15}},className:"relative",children:[m&&e.jsx(i.div,{layoutId:"otp-glow",className:"absolute -inset-1 rounded-2xl bg-primary/20 blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),e.jsx("input",{ref:f=>{d.current[a]=f},type:"text",inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",maxLength:1,value:t===" "?"":t,onChange:f=>z(a,f.target.value),onKeyDown:f=>K(a,f),onFocus:()=>c(a),onBlur:()=>c(null),onPaste:B,disabled:j,className:R("relative w-12 h-14 sm:w-14 sm:h-16 text-center text-2xl sm:text-3xl font-bold","rounded-xl sm:rounded-2xl border-2 outline-none","transition-all duration-200 ease-out","bg-background/50 backdrop-blur-sm",!s&&!m&&!n&&"border-border hover:border-muted-foreground/50",m&&!n&&"border-primary shadow-lg shadow-primary/20",s&&!n&&"border-green-400 bg-green-50/50 dark:bg-green-950/30 text-green-700 dark:text-green-300",n&&"border-red-400 bg-red-50/50 dark:bg-red-950/30 text-red-600",j&&"opacity-50 cursor-not-allowed")}),e.jsx(S,{children:s&&!n&&e.jsx(i.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-green-500 flex items-center justify-center shadow-sm",children:e.jsx(G,{className:"h-3 w-3 text-white"})})})]},a)})}),e.jsxs(S,{mode:"wait",children:[T&&!n&&e.jsx(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10},className:"flex items-center justify-center gap-2 p-3 rounded-xl bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800",children:b?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"h-5 w-5 text-green-600 dark:text-green-400 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Verificando código..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(i.div,{animate:{rotate:[0,360]},transition:{duration:.5},children:e.jsx(Q,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Código completo!"}),e.jsx(W,{className:"h-4 w-4 text-green-500 animate-pulse"})]})},"success"),n&&e.jsxs(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10},className:"flex items-center justify-center gap-2 p-3 rounded-xl bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800",children:[e.jsx(J,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:n})]},"error")]}),e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center space-y-3",children:[v>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Não recebeu o código?"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-muted/50",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),e.jsxs("span",{className:"text-sm font-medium",children:["Reenviar em ",e.jsx("span",{className:"font-mono text-primary",children:O(v)})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Não recebeu o código?"}),e.jsx($,{variant:"outline",size:"sm",onClick:I,disabled:N||j,className:"rounded-full px-6 border-primary/50 hover:bg-primary/10",children:N?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Reenviar código"]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Dica: Cole o código automaticamente quando receber"})]})]})}export{oe as A,ce as K,le as O};
