import{r as f,j as e,R as ie}from"./vendor-radix-Nma5f2cg.js";import{S as ne,d as ve,a as oe,b as le,c as ce}from"./sheet-B-npz26H.js";import{B as de}from"./badge-DOHSldvu.js";import{b as me}from"./bairros-Cf5Z_oCw.js";import{b as E,d as P,h as xe,u as B,T as Z,g as T,m as we,l as ue,t as Ne,E as ke,f as he,M as X,X as pe,c as I,R as Ce}from"./index-DJiykEC-.js";import{u as K}from"./useAuthStore-C9rNl3Ho.js";import{m as t,u as Te,a as D,L as Se,A as R,c as Ie}from"./vendor-motion-5_TnMcNA.js";import{B as De}from"./bell-CF9zm_di.js";import{U as Ae}from"./user-CFrGk_Oe.js";import{C as Me}from"./chevron-down-hFGRjpAv.js";import{I as Ee}from"./input-Bot3dZ-m.js";import{S as Pe}from"./search-sC7iNvMU.js";import{H as Q}from"./heart-BIFo0a44.js";import{C as V}from"./clock-DWmVW8JC.js";import{P as fe}from"./phone-3tANccgW.js";import{M as S}from"./map-pin-CegyvQI2.js";import{h as v,B as A}from"./button-BdJLvZKz.js";import{u as Be}from"./vendor-query-BaTr09mo.js";import{e as C}from"./localDatabase-ga4ccnAS.js";import{a as L,E as z}from"./client-BJjD0WXh.js";import{C as Re}from"./circle-alert-Dd0E1Wq7.js";import{L as Oe}from"./lightbulb-BWABEPYE.js";import{T as ge}from"./trash-2-BpK_HXaa.js";import{C as je}from"./camera-Dw5Q-bbG.js";import{C as M}from"./chevron-right-ic0YblMe.js";import{S as Le}from"./switch-ByKuFrvd.js";import{f as ze}from"./formatTimeAgo-Bi4krOuQ.js";import{u as He,a as Ue}from"./useOfflineTopics-9oVjIqcP.js";import{S as _}from"./sparkles-DdVbF0cU.js";import{U as $e}from"./users-cDu3VA0Y.js";import{M as J}from"./message-circle-z2JS2962.js";import{T as qe}from"./trending-up-B9Zj4PnH.js";import{S as Fe}from"./share-2-BtlxEszi.js";import{C as Ve}from"./church-BfFh2dJj.js";import{F as _e}from"./file-text-CbFRayJM.js";import{I as Ge}from"./info-CN2pbNII.js";import{u as Ye,T as Ze}from"./useEventsApi-CpGcJnAW.js";import{v as Ke,u as Qe,r as ee,p as H,w as We}from"./vendor-utils-DfcCFbKf.js";import{a as Xe,T as Je}from"./tourism.types-BI6LETBa.js";import{S as et}from"./star-DNaTMH2w.js";import{u as tt,S as be,D as st,a as at}from"./useInstallPrompt-S0mgagtu.js";import{S as ye}from"./smartphone-BFvuUyaw.js";import{C as rt}from"./circle-check-CIgi2jTu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const it=E("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=E("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=E("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=E("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=E("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=E("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);function mt({todayEventsCount:i=0,hasActiveAlert:a=!1,streakDays:s=0}){const{user:c,isAuthenticated:r}=K(),{selectedBairro:n}=P(),h=f.useMemo(()=>{const j=new Date().getHours();return j>=5&&j<12?{text:"Bom dia",icon:dt,emoji:"â˜€ï¸"}:j>=12&&j<18?{text:"Boa tarde",icon:nt,emoji:"ðŸŒ¤ï¸"}:{text:"Boa noite",icon:ct,emoji:"ðŸŒ™"}},[]),l=c?.nome?.split(" ")[0]||"",m=f.useMemo(()=>a?null:i>0?`${i} evento${i>1?"s":""} hoje em ${n.nome}`:`Veja o que estÃ¡ rolando em ${n.nome}`,[a,i,n]),g=h.icon;return e.jsxs(t.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:5},children:e.jsx(g,{className:"w-5 h-5 text-primary-foreground/80"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-primary-foreground",children:[h.text,l?`, ${l}!`:"!"," ",h.emoji]}),m&&e.jsx(t.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-xs text-primary-foreground/70",children:m})]})]}),s>1&&e.jsxs(t.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,delay:.3},className:`flex items-center gap-1 px-2 py-1 \r
                     bg-gradient-to-r from-amber-500 to-orange-500 \r
                     rounded-full text-white text-xs font-medium shadow-lg`,children:[e.jsx(lt,{className:"w-3 h-3"}),e.jsxs("span",{children:[s,"d"]})]})]})}function xt({label:i="Ao vivo",size:a="sm",showLabel:s=!0}){const{isOnline:c}=xe(),r=a==="sm"?"w-2 h-2":"w-3 h-3",n=a==="sm"?"w-3 h-3":"w-4 h-4";return c?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(t.div,{className:`absolute ${n} rounded-full bg-green-500/50`,animate:{scale:[1,1.8,1],opacity:[.7,0,.7]},transition:{duration:2,repeat:1/0,ease:"easeOut"},style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),e.jsx(t.div,{className:`relative ${r} rounded-full bg-green-500`,animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),s&&e.jsx(t.span,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-primary-foreground/70 font-medium",children:i})]}):e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`${r} rounded-full bg-amber-500`}),s&&e.jsx("span",{className:"text-xs text-primary-foreground/70",children:"Offline"})]})}function ut({scrollRef:i,todayEventsCount:a=0,hasActiveAlert:s=!1,streakDays:c=0}){const r=B(),{selectedBairro:n,setSelectedBairro:h}=P(),{user:l,isAuthenticated:m}=K(),[g,j]=f.useState(!1),{scrollY:d}=Te({container:i}),x=D(d,[0,80],[160,80]),y=D(d,[0,80],[1,.85]),u=D(d,[0,50],[1,0]),N=()=>{r(m?"/perfil":"/login")};return e.jsxs(t.header,{style:{height:x},className:"relative overflow-hidden bg-gradient-to-br from-primary via-primary to-primary-dark",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("svg",{className:"absolute w-[200%] h-full opacity-20 animate-wave",viewBox:"0 0 1200 200",preserveAspectRatio:"none",children:e.jsx("path",{d:"M0,100 C150,150 350,50 500,100 C650,150 850,50 1000,100 C1150,150 1200,100 1200,100 L1200,200 L0,200 Z",fill:"currentColor",className:"text-primary-foreground"})}),e.jsx("svg",{className:"absolute w-[200%] h-full opacity-10 animate-wave-slow",viewBox:"0 0 1200 200",preserveAspectRatio:"none",children:e.jsx("path",{d:"M0,120 C200,80 400,160 600,120 C800,80 1000,160 1200,120 L1200,200 L0,200 Z",fill:"currentColor",className:"text-primary-foreground"})}),e.jsx(t.div,{className:"absolute top-4 right-8 w-2 h-2 rounded-full bg-secondary/40",animate:{y:[0,-10,0],x:[0,5,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}}),e.jsx(t.div,{className:"absolute top-12 right-20 w-3 h-3 rounded-full bg-accent/30",animate:{y:[0,8,0],x:[0,-8,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut",delay:1}}),e.jsx(t.div,{className:"absolute top-8 left-16 w-1.5 h-1.5 rounded-full bg-secondary/50",animate:{y:[0,-6,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:2}})]}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full px-4 pt-safe-top",children:[e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs(t.div,{style:{scale:y},className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-bold text-primary-foreground",children:"eTijucas"}),e.jsx(xt,{})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(t.button,{whileTap:{scale:.9},className:"relative p-2 rounded-full bg-primary-foreground/10",children:[e.jsx(De,{className:"w-5 h-5 text-primary-foreground"}),e.jsx(de,{variant:"destructive",className:"absolute -top-1 -right-1 w-4 h-4 p-0 flex items-center justify-center text-[10px]",children:"2"})]}),e.jsx(t.button,{whileTap:{scale:.9},onClick:N,className:"w-8 h-8 rounded-full bg-primary-foreground/20 flex items-center justify-center overflow-hidden",children:l?.avatarUrl?e.jsx("img",{src:l.avatarUrl,alt:l.nome,className:"w-full h-full object-cover"}):e.jsx(Ae,{className:"w-4 h-4 text-primary-foreground"})})]})]}),e.jsxs(t.div,{style:{opacity:u},className:"space-y-2",children:[e.jsx(mt,{todayEventsCount:a,hasActiveAlert:s,streakDays:c}),e.jsxs(ne,{open:g,onOpenChange:j,children:[e.jsx(ve,{asChild:!0,children:e.jsxs(t.button,{whileTap:{scale:.95},className:"flex items-center gap-1 px-3 py-1.5 rounded-full bg-primary-foreground/15 text-primary-foreground text-sm font-medium",children:[e.jsx("span",{className:"text-xs opacity-80",children:"ðŸ“"}),e.jsx("span",{children:n.nome}),e.jsx(Me,{className:"w-4 h-4"})]})}),e.jsxs(oe,{side:"bottom",className:"rounded-t-3xl",children:[e.jsx(le,{children:e.jsx(ce,{children:"Selecione seu bairro"})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4 pb-8",children:me.map(b=>e.jsx(t.button,{whileTap:{scale:.95},onClick:()=>{h(b),j(!1)},className:`p-3 rounded-xl text-left font-medium transition-colors ${n.id===b.id?"bg-primary text-primary-foreground":"bg-muted text-foreground hover:bg-muted/80"}`,children:b.nome},b.id))})]})]})]})]})]})}const ht=[{id:"reportar",label:"Reportar",icon:Z,action:"reportar",color:"accent"},{id:"curtidos",label:"Mais curtidos",icon:Q,action:"filter"},{id:"eventos",label:"Eventos hoje",icon:T,action:"agenda"},{id:"missas",label:"Missas hoje",icon:V,action:"mais"},{id:"telefones",label:"Telefones Ãºteis",icon:fe,action:"mais"},{id:"turismo",label:"Turismo",icon:S,action:"mais"}];function pt({onNavigate:i}){const a=s=>{s.action&&s.action!=="filter"&&i(s.action)};return e.jsxs("div",{className:"px-4 py-4 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Pe,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(Ee,{type:"text",placeholder:"Buscar denÃºncias, eventos, missas, lugaresâ€¦",className:"pl-12 pr-4 h-12 rounded-2xl bg-card border-0 shadow-card text-base placeholder:text-muted-foreground/60"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1 -mx-4 px-4",children:ht.map((s,c)=>{const r=s.icon,n=s.color==="accent";return e.jsxs(t.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:c*.05},whileTap:{scale:.92},onClick:()=>a(s),className:`flex items-center gap-1.5 px-3 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-colors ${n?"bg-accent text-accent-foreground":"bg-card text-foreground shadow-card"}`,children:[e.jsx(r,{className:"w-4 h-4"}),s.label]},s.id)})})]})}function U({variant:i="default"}){return e.jsx("div",{className:"bento-card animate-pulse",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl skeleton-shimmer"}),i==="stats"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-8 w-16 skeleton-shimmer rounded"}),e.jsx("div",{className:"h-4 w-24 skeleton-shimmer rounded"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-5 w-3/4 skeleton-shimmer rounded"}),e.jsx("div",{className:"h-4 w-full skeleton-shimmer rounded"})]})]})})}function ft(){return e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("div",{className:"h-6 w-32 skeleton-shimmer rounded mb-3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(U,{variant:"stats"}),e.jsx(U,{variant:"stats"}),e.jsx(U,{}),e.jsx(U,{})]})]})}function te(){return e.jsxs("div",{className:"flex-shrink-0 w-64 h-36 rounded-2xl skeleton-shimmer p-4",children:[e.jsx("div",{className:"h-3 w-20 bg-white/20 rounded mb-2"}),e.jsx("div",{className:"h-5 w-40 bg-white/20 rounded mb-1"}),e.jsx("div",{className:"h-4 w-32 bg-white/20 rounded"})]})}async function $(){(await C.getAll()).length}const gt={async getAll(i){await $();try{const a=await L.get(z.events.list,i);return a.data&&a.data.length>0&&await C.saveMany(a.data),a}catch(a){console.warn("[EventService] API failed, using cache:",a);let s=await C.getAll();if(i?.bairroId&&(s=s.filter(l=>l.bairroId===i.bairroId)),i?.fromDate){const l=new Date(i.fromDate);s=s.filter(m=>new Date(m.dateTime)>=l)}if(i?.toDate){const l=new Date(i.toDate);s=s.filter(m=>new Date(m.dateTime)<=l)}if(i?.search){const l=i.search.toLowerCase();s=s.filter(m=>m.titulo.toLowerCase().includes(l)||m.descricao?.toLowerCase().includes(l))}s.sort((l,m)=>new Date(l.dateTime).getTime()-new Date(m.dateTime).getTime());const c=i?.page||1,r=i?.perPage||10,n=(c-1)*r,h=n+r;return{data:s.slice(n,h),meta:{total:s.length,page:c,perPage:r,lastPage:Math.ceil(s.length/r),from:n+1,to:Math.min(h,s.length)}}}},async getUpcoming(i=5){await $();try{const a=await L.get(z.events.upcoming,{limit:i});return a.data&&a.data.length>0&&await C.saveMany(a.data),a.data}catch{console.warn("[EventService] API failed for upcoming, using cache");const s=new Date;return(await C.getAll()).filter(r=>new Date(r.dateTime)>=s).sort((r,n)=>new Date(r.dateTime).getTime()-new Date(n.dateTime).getTime()).slice(0,i)}},async getByDate(i){await $();try{const a=await L.get(z.events.byDate(i));return a.data&&a.data.length>0&&await C.saveMany(a.data),a.data}catch{console.warn("[EventService] API failed for byDate, using cache");const s=new Date(i).toDateString();return(await C.getAll()).filter(r=>new Date(r.dateTime).toDateString()===s)}},async getById(i){await $();try{const a=await L.get(z.events.get(i));return a.data&&await C.save(a.data),a.data}catch{return console.warn("[EventService] API failed for getById, using cache"),C.getById(i)}},async refresh(){await C.clear(),await this.getAll()}},jt=["offline","events","upcoming"];function bt(i=5){const{isOnline:a}=xe();return Be({queryKey:[...jt,i],queryFn:async()=>{if(a)try{return await gt.getUpcoming(i)}catch{console.warn("[useUpcomingOfflineEvents] API failed, using cache")}const s=new Date;return(await C.getAll()).filter(r=>new Date(r.dateTime)>=s).slice(0,i)},staleTime:1e3*60*5})}function yt({onNavigate:i}){const a=B(),{selectedBairro:s}=P(),{data:c,isLoading:r}=bt(5),n=ie.useMemo(()=>{if(!c)return[];const x=new Date;return c.filter(y=>new Date(y.dateTime).toDateString()===x.toDateString())},[c]),h=we.find(x=>x.bairroId===s.id),l=Ne[0],m=ue[0],g={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},j={hidden:{opacity:0,y:20,scale:.95},show:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:24}}},d=x=>{v("selection"),a(x)};return r?e.jsx(ft,{}):e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("h2",{className:"text-lg font-bold text-foreground mb-3",children:"Hoje em Tijucas"}),e.jsxs(t.div,{variants:g,initial:"hidden",animate:"show",className:"grid grid-cols-2 gap-3",children:[e.jsxs(t.button,{layoutId:"bento-eventos",variants:j,whileTap:{scale:.96},onClick:()=>d("/agenda"),className:"bento-card flex flex-col items-start gap-2 text-left relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/5 to-transparent pointer-events-none"}),e.jsx(t.div,{layoutId:"bento-eventos-icon",className:"w-10 h-10 rounded-xl bg-secondary/10 flex items-center justify-center relative z-10",children:e.jsx(T,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:n.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos hoje"})]}),n.length>0&&e.jsxs("p",{className:"text-xs text-secondary font-medium relative z-10",children:[new Date(n[0].dateTime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})," - ",n[0].titulo]})]}),e.jsxs(t.button,{layoutId:"bento-missas",variants:j,whileTap:{scale:.96},onClick:()=>d("/missas"),className:"bento-card flex flex-col items-start gap-2 text-left relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent pointer-events-none"}),e.jsx(t.div,{layoutId:"bento-missas-icon",className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center relative z-10",children:e.jsx(V,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-lg font-bold text-foreground",children:h?h.horarios[0]:"â€”"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"PrÃ³xima missa"})]}),e.jsx("p",{className:"text-xs text-primary font-medium relative z-10",children:h?h.igrejaNome.slice(0,20)+"...":"Sem horÃ¡rios"})]}),e.jsxs(t.button,{layoutId:"bento-alertas",variants:j,whileTap:{scale:.96},className:"bento-card flex flex-col items-start gap-2 text-left relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/5 to-transparent pointer-events-none"}),e.jsx(t.div,{layoutId:"bento-alertas-icon",className:"w-10 h-10 rounded-xl bg-accent/10 flex items-center justify-center relative z-10",animate:m?{scale:[1,1.05,1]}:{},transition:{duration:2,repeat:1/0},children:e.jsx(Re,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:m?.titulo||"Sem alertas"}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:m?.descricao||"Tudo tranquilo por aqui"})]})]}),e.jsxs(t.button,{layoutId:"bento-turismo",variants:j,whileTap:{scale:.96},onClick:()=>d("/pontos-turisticos"),className:"bento-card flex flex-col items-start gap-2 text-left overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/5 to-transparent pointer-events-none"}),e.jsx(t.div,{layoutId:"bento-turismo-icon",className:"w-10 h-10 rounded-xl bg-secondary/10 flex items-center justify-center relative z-10",children:e.jsx(S,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:l.titulo}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:l.descCurta})]})]})]})]})}const vt=[{id:"buraco",label:"Buraco",icon:Z},{id:"iluminacao",label:"IluminaÃ§Ã£o",icon:Oe},{id:"lixo",label:"Lixo",icon:ge},{id:"outros",label:"Outros",icon:ke}];function wt({onNavigate:i}){const[a,s]=f.useState(!1);return e.jsx("div",{className:"px-4 py-4",children:e.jsxs(t.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:[.95,1.02,1]},transition:{duration:.5,times:[0,.7,1]},onAnimationComplete:()=>s(!0),className:"relative overflow-hidden bg-gradient-to-br from-accent via-accent to-orange-600 rounded-3xl p-5 text-accent-foreground",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white rounded-full -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white rounded-full translate-y-1/2 -translate-x-1/2"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("h3",{className:"text-xl font-bold mb-1",children:"Reportar agora"}),e.jsx("p",{className:"text-sm opacity-90 mb-4",children:"Tira foto, escolhe categoria e pronto."}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:vt.map(c=>{const r=c.icon;return e.jsxs(t.button,{whileTap:{scale:.92},onClick:()=>i("reportar"),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white/20 backdrop-blur-sm text-sm font-medium",children:[e.jsx(r,{className:"w-4 h-4"}),c.label]},c.id)})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(t.button,{whileTap:{scale:.95},onClick:()=>i("reportar"),className:"flex-1 flex items-center justify-center gap-2 bg-white text-accent font-semibold py-3 rounded-xl",children:[e.jsx(je,{className:"w-5 h-5"}),"Tirar foto"]}),e.jsxs(t.button,{whileTap:{scale:.95},onClick:()=>i("reportar"),className:"flex items-center justify-center gap-2 bg-white/20 font-semibold py-3 px-4 rounded-xl",children:["Sem foto",e.jsx(M,{className:"w-4 h-4"})]})]})]})]})})}const Y={reclamacao:{label:"ReclamaÃ§Ã£o",color:"text-red-700",bg:"bg-red-100"},sugestao:{label:"SugestÃ£o",color:"text-blue-700",bg:"bg-blue-100"},duvida:{label:"DÃºvida",color:"text-purple-700",bg:"bg-purple-100"},alerta:{label:"Alerta",color:"text-orange-700",bg:"bg-orange-100"},elogio:{label:"Elogio",color:"text-green-700",bg:"bg-green-100"},outros:{label:"Outros",color:"text-gray-700",bg:"bg-gray-100"}};function Nt({onNavigate:i}){const a=B(),{selectedBairro:s}=P(),{isAuthenticated:c}=K(),{toast:r}=he(),[n,h]=f.useState("curtidos"),[l,m]=f.useState(!1),{data:g=[],isLoading:j}=He(),d=Ue(),x=f.useCallback(o=>c?!0:(r({title:"Login necessÃ¡rio",description:`Para ${o}, vocÃª precisa estar logado.`,action:e.jsx(A,{variant:"outline",size:"sm",onClick:()=>window.location.href="/login",children:"Entrar"})}),!1),[c,r]),y=f.useMemo(()=>{let o=[...g];switch(n){case"curtidos":o=o.sort((p,w)=>w.likesCount-p.likesCount);break;case"recentes":o=o.sort((p,w)=>new Date(w.createdAt).getTime()-new Date(p.createdAt).getTime());break;case"perto":o=o.filter(p=>p.bairroId===s?.id);break}return o.slice(0,3)},[g,n,s]),u=g.length,N=g.reduce((o,p)=>o+p.commentsCount,0),b=(o,p)=>p.bairro?.nome?p.bairro.nome:me.find(w=>w.id===o)?.nome||"Tijucas",k=o=>{x("curtir")&&(navigator.vibrate&&navigator.vibrate(10),d.mutate({id:o.id,currentlyLiked:o.liked??!1}))},O=async o=>{if(navigator.share)try{await navigator.share({title:o.titulo,text:o.texto,url:window.location.href})}catch{}else await navigator.clipboard.writeText(window.location.href),r({title:"Link copiado!"})};return e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"px-4 py-4",children:[e.jsxs(t.div,{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-primary/10 via-primary/5 to-transparent p-4 mb-4",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(t.div,{animate:{scale:[1,1.2,1],opacity:[.1,.2,.1]},transition:{duration:3,repeat:1/0},className:"absolute -top-10 -right-10 w-40 h-40 rounded-full bg-primary/20"}),e.jsx(t.div,{animate:{scale:[1.2,1,1.2],opacity:[.1,.15,.1]},transition:{duration:4,repeat:1/0,delay:.5},className:"absolute -bottom-10 -left-10 w-32 h-32 rounded-full bg-primary/15"})]}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t.div,{animate:{rotate:[0,-10,10,-5,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(X,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-foreground flex items-center gap-2",children:["Boca no Trombone",e.jsx(t.div,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:e.jsx(_,{className:"w-4 h-4 text-yellow-500"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A voz da comunidade"})]})]}),e.jsxs(A,{variant:"ghost",size:"sm",onClick:()=>i("forum"),className:"text-primary font-medium group",children:["Ver todos",e.jsx(M,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"relative flex items-center gap-4 mt-3 pt-3 border-t border-primary/10",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx($e,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-foreground",children:u})," tÃ³picos"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(J,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-foreground",children:N})," comentÃ¡rios"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto scrollbar-hide -mx-4 px-4",children:[{id:"curtidos",label:"Mais curtidos",icon:qe},{id:"recentes",label:"Recentes",icon:V},{id:"perto",label:"Perto de mim",icon:S}].map(o=>{const p=o.icon,w=n===o.id;return e.jsxs(t.button,{whileTap:{scale:.95},whileHover:{y:-2},onClick:()=>h(o.id),className:`relative flex items-center gap-1.5 px-4 py-2 rounded-full whitespace-nowrap text-xs font-medium transition-all min-h-[36px] ${w?"bg-primary text-primary-foreground shadow-sm":"bg-muted text-muted-foreground hover:bg-muted-foreground/10"}`,children:[e.jsx(p,{className:"w-3.5 h-3.5"}),o.label,w&&e.jsx(t.div,{layoutId:"activeSort",className:"absolute inset-0 bg-primary rounded-full -z-10",transition:{type:"spring",stiffness:400,damping:30}})]},o.id)})}),e.jsxs(t.div,{className:"flex items-center justify-between mb-4 p-3 bg-muted/50 rounded-xl",whileHover:{backgroundColor:"hsl(var(--muted))"},children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx(Le,{checked:l,onCheckedChange:m,className:"scale-90"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"Postar anÃ´nimo"})]}),e.jsx(t.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(A,{size:"sm",onClick:()=>a("/forum?novo=true"),className:"bg-primary text-primary-foreground text-xs h-9 px-4 shadow-sm",children:[e.jsx(X,{className:"w-3.5 h-3.5 mr-1.5"}),"Abrir tÃ³pico"]})})]}),e.jsx(Se,{children:e.jsx("div",{className:"space-y-3",children:e.jsx(R,{mode:"popLayout",children:y.map((o,p)=>e.jsx(t.div,{layout:!0,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:300,damping:25,delay:p*.05},whileHover:{y:-2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},className:"bg-card rounded-2xl p-3 shadow-card border border-border/50 cursor-pointer",onClick:()=>i("forum"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[o.fotoUrl&&e.jsxs(t.div,{className:"relative w-16 h-16 rounded-xl overflow-hidden flex-shrink-0",whileHover:{scale:1.05},children:[e.jsx("img",{src:o.fotoUrl,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx(de,{className:`${Y[o.categoria].bg} ${Y[o.categoria].color} text-[10px] px-1.5 py-0 border-0`,children:Y[o.categoria].label}),e.jsxs("span",{className:"text-[10px] text-muted-foreground flex items-center gap-0.5",children:[e.jsx(S,{className:"w-2.5 h-2.5"}),b(o.bairroId,o)]}),e.jsx("span",{className:"text-[10px] text-muted-foreground ml-auto",children:ze(o.createdAt)})]}),e.jsx("h3",{className:"font-medium text-sm text-foreground line-clamp-2 mb-2",children:o.titulo}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(t.button,{whileTap:{scale:.85},onClick:w=>{w.stopPropagation(),k(o)},className:"flex items-center gap-1 text-xs",children:[e.jsx(t.div,{animate:o.liked?{scale:[1,1.4,1]}:{},transition:{duration:.3},children:e.jsx(Q,{className:`w-4 h-4 ${o.liked?"fill-red-500 text-red-500":"text-muted-foreground"}`})}),e.jsx("span",{className:o.liked?"text-red-500 font-medium":"text-muted-foreground",children:o.likesCount})]}),e.jsxs("button",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:o.commentsCount})]}),e.jsx("button",{onClick:w=>{w.stopPropagation(),O(o)},className:"flex items-center gap-1 text-xs text-muted-foreground ml-auto hover:text-foreground transition-colors",children:e.jsx(Fe,{className:"w-4 h-4"})})]})]})]})},o.id))})})}),e.jsxs(t.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i("forum"),className:"w-full mt-4 py-3 text-sm font-medium text-primary bg-primary/5 hover:bg-primary/10 rounded-xl transition-colors flex items-center justify-center gap-2",children:["Ver mais tÃ³picos",e.jsx(M,{className:"w-4 h-4"})]})]})}const kt=[{id:"agenda",label:"Agenda de Eventos",icon:T,color:"bg-secondary/10 text-secondary",route:"/agenda"},{id:"turismo",label:"Pontos TurÃ­sticos",icon:S,color:"bg-green-100 text-green-600",route:"/pontos-turisticos"},{id:"missas",label:"HorÃ¡rios das Missas",icon:Ve,color:"bg-primary/10 text-primary",route:"/missas"},{id:"telefones",label:"Telefones Ãšteis",icon:fe,color:"bg-accent/10 text-accent",route:"/telefones"},{id:"coleta",label:"Coleta de Lixo",icon:ge,color:"bg-emerald-100 text-emerald-600",route:"/coleta-lixo"},{id:"envios",label:"Fiscaliza Tijucas",icon:_e,color:"bg-purple-100 text-purple-600",route:"/denuncias"}];function Ct({onNavigate:i}){const a=B(),s={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},c={hidden:{opacity:0,scale:.9},show:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:24}}},r=n=>{a(n.route)};return e.jsxs("div",{className:"px-4 py-4",children:[e.jsx("h2",{className:"text-lg font-bold text-foreground mb-3",children:"ServiÃ§os"}),e.jsx(t.div,{variants:s,initial:"hidden",animate:"show",className:"grid grid-cols-2 gap-3",children:kt.map(n=>{const h=n.icon;return e.jsxs(t.button,{variants:c,whileTap:{scale:.95},onClick:()=>r(n),className:"bento-card flex items-center gap-3 text-left",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${n.color} flex items-center justify-center flex-shrink-0`,children:e.jsx(h,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-sm font-medium text-foreground leading-tight",children:n.label})]},n.id)})})]})}const Tt={obras:ot,interdicao:Z,evento:T,clima:it},St={obras:"from-orange-600 to-amber-500",interdicao:"from-red-600 to-rose-500",evento:"from-blue-600 to-sky-500",clima:"from-slate-600 to-slate-500"};function It({alerts:i,onDismiss:a,onTap:s}){const[c,r]=f.useState(0),[n,h]=f.useState(new Set),l=i.filter(u=>!n.has(u.id)),m=l[c%l.length];if(!m||l.length===0)return null;const g=Tt[m.tipo]||Ge,j=St[m.tipo]||"from-gray-600 to-gray-500",d=u=>{u.stopPropagation(),v("light"),h(N=>new Set(N).add(m.id)),a?.(m.id)},x=()=>{v("selection"),s?.(m)},y=u=>{u.stopPropagation(),l.length>1&&r(N=>(N+1)%l.length)};return e.jsx(R,{mode:"wait",children:e.jsx(t.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"sticky top-0 z-50",children:e.jsx(t.div,{role:"button",tabIndex:0,onClick:x,onKeyDown:u=>u.key==="Enter"&&x(),whileTap:{scale:.98},className:`w-full bg-gradient-to-r ${j} 
            p-3 shadow-lg text-white text-left cursor-pointer`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t.div,{animate:{scale:[1,1.1,1],rotate:m.tipo==="interdicao"?[0,-5,5,0]:0},transition:{duration:1.5,repeat:1/0,repeatDelay:2},children:e.jsx(g,{className:"w-5 h-5 flex-shrink-0"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm truncate",children:m.titulo}),e.jsx("p",{className:"text-xs opacity-80 truncate",children:m.descricao})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.length>1&&e.jsxs(t.button,{onClick:y,whileTap:{scale:.9},className:"text-xs bg-white/20 px-2 py-0.5 rounded-full hover:bg-white/30 transition-colors",children:[c+1,"/",l.length]}),e.jsx(M,{className:"w-4 h-4 opacity-60"}),e.jsx(t.button,{onClick:d,whileTap:{scale:.8},className:"p-1 hover:bg-white/20 rounded-full transition-colors","aria-label":"Fechar alerta",children:e.jsx(pe,{className:"w-4 h-4"})})]})]})})},m.id)})}const se=["from-violet-500 via-purple-500 to-fuchsia-500","from-cyan-500 via-blue-500 to-indigo-500","from-rose-500 via-pink-500 to-orange-400","from-emerald-500 via-teal-500 to-cyan-500","from-amber-500 via-orange-500 to-red-500"];function Dt({onNavigate:i,onEventClick:a}){const s=f.useRef(null),{data:c,isLoading:r}=Ye({perPage:15,orderBy:"startDateTime",order:"asc"}),n=c?.data??[],h=f.useMemo(()=>{if(!n||n.length===0)return 0;const d=Ke(new Date),x=Qe(ee(d,7));return n.filter(y=>{try{const u=H(y.startDateTime);return We(u,{start:d,end:x})}catch{return!1}}).length},[n]),l=f.useMemo(()=>{if(!n||n.length===0)return 0;const d=new Date().toDateString();return n.filter(x=>{try{return H(x.startDateTime).toDateString()===d}catch{return!1}}).length},[n]),m=d=>{try{const x=H(d),y=new Date,u=ee(y,1);return x.toDateString()===y.toDateString()?"Hoje":x.toDateString()===u.toDateString()?"AmanhÃ£":x.toLocaleDateString("pt-BR",{weekday:"short",day:"numeric"})}catch{return"Em breve"}},g=d=>{try{return H(d).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}catch{return"--:--"}},j=d=>{v("selection"),a?.(d)};return r?e.jsxs("div",{className:"py-5",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 mb-4",children:[e.jsx("div",{className:"h-7 w-44 skeleton-shimmer rounded-lg"}),e.jsx("div",{className:"h-5 w-20 skeleton-shimmer rounded-lg"})]}),e.jsxs("div",{className:"flex gap-3 px-4 overflow-hidden",children:[e.jsx(te,{}),e.jsx(te,{})]})]}):n.length===0?e.jsx("div",{className:"py-5 px-4",children:e.jsxs("div",{className:"rounded-2xl border-2 border-dashed border-muted-foreground/20 bg-muted/50 p-6 text-center",children:[e.jsx(T,{className:"w-10 h-10 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("h3",{className:"font-semibold text-muted-foreground",children:"Nenhum evento prÃ³ximo"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Confira a agenda completa para ver todos os eventos"}),e.jsx(t.button,{whileTap:{scale:.97},onClick:()=>i("agenda"),className:"mt-4 px-5 py-2.5 bg-primary text-primary-foreground rounded-full text-sm font-medium",children:"Ver Agenda"})]})}):e.jsxs("div",{className:"py-5",children:[e.jsxs("div",{className:"px-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center shadow-lg shadow-primary/30",children:e.jsx(_,{className:"w-5 h-5 text-white"})}),l>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-rose-500 rounded-full text-[10px] font-bold text-white flex items-center justify-center shadow-sm",children:l})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-foreground",children:"PrÃ³ximos Eventos"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-semibold text-primary",children:h})," eventos nesta semana"]})]})]}),e.jsxs(t.button,{whileTap:{scale:.95},onClick:()=>{v("light"),i("agenda")},className:"flex items-center gap-1.5 px-3.5 py-2 bg-muted hover:bg-muted/80 rounded-full text-sm font-medium text-foreground transition-colors",children:["Ver todos",e.jsx(M,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3 overflow-x-auto scrollbar-hide pb-1",children:[e.jsxs(t.button,{whileTap:{scale:.95},className:I("flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium shrink-0",l>0?"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400":"bg-muted text-muted-foreground"),children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500"}),"Hoje: ",l]}),e.jsxs(t.div,{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-primary/10 text-primary shrink-0",children:[e.jsx(T,{className:"w-3 h-3"}),"Semana: ",h]}),e.jsxs(t.div,{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 shrink-0",children:[e.jsx(Ze,{className:"w-3 h-3"}),"Gratuitos: ",n.filter(d=>d.ticket?.type==="free").length]})]})]}),e.jsx("div",{ref:s,className:"overflow-x-auto scrollbar-hide",children:e.jsxs(t.div,{className:"flex gap-3 px-4 pb-2",drag:"x",dragConstraints:s,dragElastic:.1,onDragStart:()=>v("selection"),children:[n.slice(0,10).map((d,x)=>e.jsxs(t.button,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},transition:{delay:x*.06,type:"spring",stiffness:200},whileTap:{scale:.97},onClick:()=>j(d.id),className:I("flex-shrink-0 w-72 h-36 rounded-2xl p-4 text-white text-left overflow-hidden relative group","bg-gradient-to-br shadow-lg",se[x%se.length]),children:[e.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden opacity-20",children:[e.jsx("div",{className:"absolute -top-6 -right-6 w-28 h-28 rounded-full bg-white/30 blur-xl"}),e.jsx("div",{className:"absolute -bottom-10 -left-10 w-36 h-36 rounded-full bg-white/20 blur-2xl"})]}),d.ticket?.type==="free"&&e.jsx("div",{className:"absolute top-3 right-3 px-2 py-0.5 bg-white/25 backdrop-blur-sm rounded-full text-[10px] font-bold uppercase tracking-wide",children:"GrÃ¡tis"}),e.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs opacity-90",children:[e.jsx(T,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-medium",children:m(d.startDateTime)}),e.jsx("span",{className:"opacity-60",children:"â€¢"}),e.jsx(V,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:g(d.startDateTime)})]}),e.jsx("h3",{className:"font-bold mt-2 line-clamp-2 leading-snug text-[15px]",children:d.title})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs opacity-80",children:[e.jsx(S,{className:"w-3.5 h-3.5 shrink-0"}),e.jsxs("span",{className:"truncate",children:[d.venue?.name??"Tijucas",d.venue?.bairro?.nome&&` â€¢ ${d.venue.bairro.nome}`]})]})]})]},d.id)),e.jsxs(t.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:n.length*.06},whileTap:{scale:.97},onClick:()=>{v("light"),i("agenda")},className:I("flex-shrink-0 w-36 h-36 rounded-2xl","bg-gradient-to-br from-muted/80 to-muted border-2 border-dashed border-primary/30","flex flex-col items-center justify-center gap-3","text-primary hover:border-primary/50 transition-colors"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(T,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-semibold",children:"Ver agenda"})]})]})})]})}function At({onNavigate:i}){const a=B(),{featuredSpots:s,isLoading:c,likeSpot:r}=Xe(),[n,h]=f.useState(0),[l,m]=f.useState(!1),g=f.useRef(null);f.useEffect(()=>{if(!(l||s.length<=1))return g.current=setInterval(()=>{h(b=>(b+1)%s.length)},4e3),()=>{g.current&&clearInterval(g.current)}},[l,s.length]);const j=f.useCallback((b,k)=>{k.offset.x<-50?(h(o=>(o+1)%s.length),v("light")):k.offset.x>50&&(h(o=>(o-1+s.length)%s.length),v("light"))},[s.length]),d=f.useCallback(b=>{v("selection"),a(`/ponto-turistico/${b}`)},[a]),x=f.useCallback((b,k)=>{b.stopPropagation(),v("medium"),r(k)},[r]),y=f.useCallback(()=>{v("selection"),a("/pontos-turisticos")},[a]);if(c)return e.jsxs("div",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"h-6 w-40 skeleton-shimmer rounded"}),e.jsx("div",{className:"h-5 w-20 skeleton-shimmer rounded"})]}),e.jsx("div",{className:"h-48 skeleton-shimmer rounded-2xl"})]});if(!s||s.length===0)return null;const u=s[n],N=Je[u.categoria];return e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 mb-3",children:[e.jsxs("h2",{className:"text-lg font-bold text-foreground flex items-center gap-2",children:[e.jsx(t.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,repeatDelay:2},children:e.jsx(je,{className:"w-5 h-5 text-primary"})}),"Descubra Tijucas"]}),e.jsxs(t.button,{whileTap:{scale:.95},onClick:y,className:"flex items-center gap-1 text-sm text-primary font-medium",children:["Ver todos ",e.jsx(M,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"px-4",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:[e.jsx(t.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,onDragEnd:j,className:"relative h-52 rounded-2xl overflow-hidden shadow-xl cursor-grab active:cursor-grabbing",children:e.jsx(R,{mode:"wait",children:e.jsxs(t.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"absolute inset-0",onClick:()=>d(u.id),children:[u.imageUrl?e.jsx("img",{src:u.imageUrl,alt:u.titulo,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary to-secondary"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"}),e.jsx(t.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute top-3 left-3",children:e.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-white/90 text-foreground backdrop-blur-sm flex items-center gap-1",children:[e.jsx("span",{children:N?.icon||"ðŸ“"}),N?.label||u.categoria]})}),e.jsx(t.button,{whileTap:{scale:.8},onClick:b=>x(b,u.id),className:I("absolute top-3 right-3 w-10 h-10 rounded-full flex items-center justify-center bg-white/90 backdrop-blur-sm shadow-lg",u.liked&&"bg-red-500"),children:e.jsx(Q,{className:I("w-5 h-5 transition-all",u.liked?"fill-white text-white":"text-foreground")})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[u.rating>0&&e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-0.5 px-2 py-0.5 rounded-full bg-amber-500 text-white",children:[e.jsx(et,{className:"w-3 h-3 fill-current"}),e.jsx("span",{className:"text-xs font-bold",children:u.rating.toFixed(1)})]}),e.jsxs("span",{className:"text-xs text-white/80",children:["(",u.reviewsCount," avaliaÃ§Ãµes)"]})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:u.titulo}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-white/80",children:[e.jsx(S,{className:"w-3 h-3"}),u.bairroNome||u.endereco?.split(",")[0]]}),e.jsxs(t.button,{whileTap:{scale:.95},className:"flex items-center gap-1.5 px-4 py-2 rounded-full bg-white text-foreground text-sm font-semibold mt-3",onClick:b=>{b.stopPropagation(),d(u.id)},children:[e.jsx(_,{className:"w-4 h-4"})," Explorar"]})]})]},u.id)})}),e.jsx("div",{className:"flex justify-center gap-1.5 mt-3",children:s.map((b,k)=>e.jsx(t.button,{onClick:()=>{h(k),v("light")},className:I("rounded-full transition-all duration-300",k===n?"w-6 h-2 bg-primary":"w-2 h-2 bg-muted-foreground/30"),whileTap:{scale:.9}},k))})]})]})}function Mt(){const{shouldShowBanner:i,canInstallNative:a,isIOSSafari:s,promptInstall:c,dismiss:r,showIOSTutorial:n,hideIOSTutorial:h,isIOSTutorialVisible:l,isInstalled:m}=tt(),g=async()=>{await c()||r("later_24h")},j=d=>{d.stopPropagation(),r("later_7d")};return m||!i?e.jsx(ae,{isOpen:l,onClose:h}):e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsxs(t.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-primary via-primary to-primary/80 p-4 shadow-lg",children:[e.jsx("div",{className:"absolute -right-6 -top-6 w-24 h-24 rounded-full bg-white/10"}),e.jsx("div",{className:"absolute -left-3 -bottom-3 w-16 h-16 rounded-full bg-white/5"}),e.jsx("button",{onClick:j,className:"absolute right-2 top-2 p-1.5 hover:bg-white/20 rounded-full transition-colors z-10","aria-label":"Fechar",children:e.jsx(pe,{className:"h-4 w-4 text-white/80"})}),e.jsxs("div",{className:"relative flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm shrink-0",children:e.jsx(ye,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("h3",{className:"font-bold text-white text-base",children:"Instalar app"}),e.jsx(_,{className:"h-4 w-4 text-yellow-300"})]}),e.jsx("p",{className:"text-sm text-white/80 mt-0.5",children:"Acesso rÃ¡pido e funciona offline"})]}),s?e.jsxs(A,{onClick:n,size:"sm",variant:"secondary",className:"bg-white text-primary hover:bg-white/90 shrink-0 font-medium",children:[e.jsx(be,{className:"h-4 w-4 mr-1.5"}),"Como"]}):a?e.jsxs(A,{onClick:g,size:"sm",variant:"secondary",className:"bg-white text-primary hover:bg-white/90 shrink-0 font-medium",children:[e.jsx(st,{className:"h-4 w-4 mr-1.5"}),"Instalar"]}):null]})]})}),e.jsx(ae,{isOpen:l,onClose:h})]})}function ae({isOpen:i,onClose:a}){const s=[{icon:e.jsx(be,{className:"h-6 w-6"}),title:"Toque em Compartilhar",description:"Na barra do Safari (quadrado com seta)"},{icon:e.jsx(at,{className:"h-6 w-6"}),title:"Adicionar Ã  Tela de InÃ­cio",description:"Role e toque nessa opÃ§Ã£o"},{icon:e.jsx(rt,{className:"h-6 w-6"}),title:'Confirme tocando em "Adicionar"',description:"Pronto! O app aparecerÃ¡ na tela inicial"}];return e.jsx(ne,{open:i,onOpenChange:c=>!c&&a(),children:e.jsxs(oe,{side:"bottom",className:"rounded-t-3xl pb-8",children:[e.jsx(le,{className:"pb-4",children:e.jsxs(ce,{className:"flex items-center gap-2 justify-center",children:[e.jsx(ye,{className:"h-5 w-5 text-primary"}),"Instalar eTijucas"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Siga os passos abaixo para adicionar o app:"}),e.jsx("div",{className:"space-y-3",children:s.map((c,r)=>e.jsxs(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.1},className:"flex items-start gap-3 p-3 bg-muted/50 rounded-xl",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary shrink-0 font-semibold",children:r+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-primary",children:c.icon}),e.jsx("span",{className:"font-medium text-sm",children:c.title})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:c.description})]})]},r))}),e.jsx(A,{onClick:a,className:"w-full mt-4",children:"Entendi"})]})]})})}const q=80,F=120,re=.4;function vs({scrollRef:i,onNavigate:a}){const s=f.useRef(null),c=f.useRef(0),{isRefreshing:r,setIsRefreshing:n}=P(),{toast:h}=he(),[l,m]=f.useState(!1),[g,j]=f.useState(!1),d=ue,x=Ie(0,{stiffness:400,damping:40,mass:.5}),y=D(x,p=>p<=0?0:F*(1-Math.exp(-p/F*re*5))),u=D(x,[0,q],[0,180]),N=D(x,p=>p>=q?1.2:1),b=f.useCallback(async()=>{n(!0),v("success"),await new Promise(p=>setTimeout(p,1500)),n(!1),j(!1),h({title:"Atualizado agora",description:"ConteÃºdo atualizado com sucesso!"})},[n,h]),k=f.useCallback(p=>{s.current?.scrollTop===0&&!r&&(c.current=p.touches[0].clientY,m(!0),j(!1))},[r]),O=f.useCallback(p=>{if(!l||r)return;if(s.current&&s.current.scrollTop>0){m(!1),x.set(0);return}const G=p.touches[0].clientY-c.current;if(G>0){const W=G*Math.pow(re,G/F);x.set(Math.min(W,F*1.5)),W>=q&&!g&&(v("medium"),j(!0))}},[l,r,x,g]),o=f.useCallback(()=>{if(!l)return;x.get()>=q&&!r?(x.set(60),b()):x.set(0),m(!1)},[l,x,r,b]);return ie.useEffect(()=>{r||x.set(0)},[r,x]),e.jsxs("div",{ref:p=>{s&&(s.current=p),i(p)},className:"h-full overflow-y-auto overflow-x-hidden scrollbar-hide",onTouchStart:k,onTouchMove:O,onTouchEnd:o,children:[e.jsx(It,{alerts:d,onTap:p=>{v("selection")}}),e.jsx(R,{children:(x.get()>0||r)&&e.jsxs(t.div,{style:{height:r?60:y},className:"flex items-center justify-center bg-gradient-to-b from-primary/10 to-transparent overflow-hidden",children:[e.jsx(t.div,{style:{rotate:r?void 0:u,scale:N},animate:r?{rotate:360}:void 0,transition:r?{repeat:1/0,duration:1,ease:"linear"}:void 0,className:"flex items-center justify-center",children:e.jsx(Ce,{className:`w-6 h-6 transition-colors ${g||r?"text-primary":"text-muted-foreground"}`})}),g&&!r&&e.jsx(t.span,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"absolute mt-10 text-xs text-primary font-medium",children:"Solte para atualizar"})]})}),e.jsx(ut,{scrollRef:s,todayEventsCount:0,hasActiveAlert:d.length>0,streakDays:3}),e.jsxs("div",{className:"pb-24",children:[e.jsx(pt,{onNavigate:a}),e.jsx("div",{className:"px-4 pb-2",children:e.jsx(Mt,{})}),e.jsx(yt,{onNavigate:a}),e.jsx(Dt,{onNavigate:a}),e.jsx(At,{onNavigate:a}),e.jsx(wt,{onNavigate:a}),e.jsx(Nt,{onNavigate:a}),e.jsx(Ct,{onNavigate:a})]})]})}export{vs as default};
