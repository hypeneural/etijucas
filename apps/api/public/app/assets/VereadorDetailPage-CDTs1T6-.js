import{r as k,j as e,i as w,I as P}from"./vendor-radix-E4gGnxjO.js";import{B as h}from"./button-WIEOpYI-.js";import{B as b}from"./badge-C76PU-ep.js";import{C as m,a as x,b as u,c as p}from"./card-C8veluk1.js";import{A as B,a as E,b as D}from"./avatar-nLyNSPe-.js";import{f as C,d as j,n as O,u as I,o as L,l as R,b as _,p as H,B as U,Q as y}from"./index-BSTgcX-N.js";import{u as N}from"./vendor-query-CeEprVe-.js";import{a as v}from"./votes.service-BhTDStON.js";import{A as q}from"./arrow-left-Pi1Axqr9.js";import{S as F}from"./share-2-DCTrv385.js";import{m as o,A as z}from"./vendor-motion-R11C44Ho.js";import{P as Q}from"./phone-BmE0Yzb_.js";import{M as Y}from"./mail-D8IlkYNi.js";import{G as K,I as G}from"./instagram-Dgza8hy4.js";import{M as X}from"./message-circle-CzclH3fB.js";import{Y as J}from"./youtube-Dn9VpJB9.js";import{C as W}from"./circle-check-BpVHvdsQ.js";import{C as Z}from"./circle-x-NeVJYeC1.js";import{C as ee}from"./clock-BUAXYXQP.js";import"./vendor-utils-zfZBtJeF.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=C("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=C("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),A=k.forwardRef(({className:s,value:r,...n},c)=>e.jsx(w,{ref:c,className:j("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...n,children:e.jsx(P,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));A.displayName=w.displayName;function we(){const{slug:s}=O(),r=I(),{toast:n}=L(),{activeTab:c,setActiveTab:g}=R(),{data:a,isLoading:S,error:V}=N({queryKey:y.votes.vereador(s||""),queryFn:()=>v.getBySlug(s),enabled:!!s,staleTime:5*60*1e3}),{data:d}=N({queryKey:y.votes.vereadorVotacoes(s||""),queryFn:()=>v.getVotacoes(s),enabled:!!s,staleTime:5*60*1e3}),M=async()=>{if(!a)return;const t={title:a.nome,text:`${a.nome} - ${a.mandatoAtual?.partido?.sigla||"Vereador"}`,url:window.location.href};if(navigator.share)try{await navigator.share(t)}catch{}else navigator.clipboard&&(await navigator.clipboard.writeText(t.url),n({title:"Link copiado!",description:"Cole onde quiser compartilhar."}))},T=t=>{g(t),r("/")},$=k.useMemo(()=>a?a.nome.split(" ").map(t=>t[0]).slice(0,2).join("").toUpperCase():"",[a]);if(S)return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-muted/50",children:e.jsx("div",{className:"relative w-full max-w-[420px] h-full bg-background flex items-center justify-center",children:e.jsx(_,{className:"h-8 w-8 animate-spin text-primary"})})});if(V||!a)return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-muted/50",children:e.jsxs("div",{className:"relative w-full max-w-[420px] h-full bg-background flex flex-col items-center justify-center gap-4 p-6",children:[e.jsx("p",{className:"text-muted-foreground text-center",children:"Não foi possível carregar os dados do vereador"}),e.jsx(h,{variant:"outline",onClick:()=>r(-1),children:"Voltar"})]})});const l=a.mandatoAtual?.partido,i=a.estatisticas;return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-muted/50",children:e.jsxs("div",{className:"relative w-full max-w-[420px] h-full bg-background overflow-hidden shadow-elevated",children:[e.jsxs("div",{className:"h-full overflow-y-auto pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-xl border-b",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-top",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>r(-1),children:e.jsx(q,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-bold",children:"Perfil do Vereador"}),e.jsx(h,{variant:"ghost",size:"icon",onClick:M,children:e.jsx(F,{className:"h-5 w-5"})})]})}),e.jsxs("main",{className:"px-4 py-5 space-y-6",children:[e.jsx(o.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(m,{className:"rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"h-2",style:{backgroundColor:l?.corHex||"#6B7280"}}),e.jsxs(x,{className:"p-6 flex flex-col items-center text-center gap-4",children:[e.jsxs(B,{className:"w-24 h-24 border-4 border-muted shadow-lg",children:[e.jsx(E,{src:a.fotoUrl||"",alt:a.nome}),e.jsx(D,{className:"text-2xl font-bold bg-primary/10 text-primary",children:$})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:a.nome}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[l&&e.jsx(b,{className:"px-3 py-1",style:{backgroundColor:`${l.corHex}20`,borderColor:l.corHex,color:l.corHex},children:l.sigla}),a.mandatoAtual?.cargo&&e.jsx(b,{variant:"secondary",children:a.mandatoAtual.cargo})]}),a.mandatoAtual?.legislatura&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a.mandatoAtual.legislatura.nomeCompleto}),!a.mandatoAtual?.emExercicio&&e.jsx(b,{variant:"outline",className:"text-amber-600 border-amber-300",children:"Licenciado do mandato"})]})]})]})}),a.bio&&e.jsx(o.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},children:e.jsxs(m,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(p,{className:"text-base",children:"Sobre"})}),e.jsx(x,{children:e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:a.bio})})]})}),e.jsx(o.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(m,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(p,{className:"text-base",children:"Contato"})}),e.jsxs(x,{className:"space-y-3",children:[a.telefone&&e.jsxs("a",{href:`tel:${a.telefone}`,className:"flex items-center gap-3 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Q,{className:"h-4 w-4 text-primary"}),a.telefone]}),a.email&&e.jsxs("a",{href:`mailto:${a.email}`,className:"flex items-center gap-3 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Y,{className:"h-4 w-4 text-primary"}),a.email]}),a.siteOficialUrl&&e.jsxs("a",{href:a.siteOficialUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(K,{className:"h-4 w-4 text-primary"}),"Site Oficial"]}),a.redesSociais&&Object.keys(a.redesSociais).length>0&&e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[a.redesSociais.facebook&&e.jsx("a",{href:`https://facebook.com/${a.redesSociais.facebook}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 hover:scale-110 transition-transform",children:e.jsx(se,{className:"h-4 w-4"})}),a.redesSociais.instagram&&e.jsx("a",{href:`https://instagram.com/${a.redesSociais.instagram}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 hover:scale-110 transition-transform",children:e.jsx(G,{className:"h-4 w-4"})}),a.redesSociais.whatsapp&&e.jsx("a",{href:`https://wa.me/${a.redesSociais.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 hover:scale-110 transition-transform",children:e.jsx(X,{className:"h-4 w-4"})}),a.redesSociais.youtube&&e.jsx("a",{href:`https://youtube.com/${a.redesSociais.youtube}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 hover:scale-110 transition-transform",children:e.jsx(J,{className:"h-4 w-4"})})]})]})]})}),i&&i.totalVotos>0&&e.jsx(o.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},children:e.jsxs(m,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(p,{className:"text-base",children:"Estatísticas de Votação"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Presença"}),e.jsxs("span",{className:"font-semibold",children:[i.presencaPercent,"%"]})]}),e.jsx(A,{value:i.presencaPercent,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[e.jsx(f,{icon:e.jsx(W,{className:"h-4 w-4 text-green-500"}),label:"Votou Sim",value:i.votouSim,color:"green"}),e.jsx(f,{icon:e.jsx(Z,{className:"h-4 w-4 text-red-500"}),label:"Votou Não",value:i.votouNao,color:"red"}),e.jsx(f,{icon:e.jsx(ae,{className:"h-4 w-4 text-amber-500"}),label:"Abstenções",value:i.abstencoes,color:"amber"}),e.jsx(f,{icon:e.jsx(ee,{className:"h-4 w-4 text-gray-500"}),label:"Ausências",value:i.ausencias,color:"gray"})]})]})]})}),d&&d.length>0&&e.jsx(o.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(m,{children:[e.jsx(u,{className:"pb-2",children:e.jsxs(p,{className:"text-base flex items-center gap-2",children:[e.jsx(H,{className:"h-4 w-4 text-primary"}),"Últimas Votações"]})}),e.jsxs(x,{className:"space-y-3",children:[e.jsx(z,{children:d.slice(0,5).map(t=>e.jsx(re,{votacao:t,onClick:()=>r(`/votacoes/${t.id}`)},t.id))}),d.length>5&&e.jsxs(h,{variant:"ghost",className:"w-full text-primary",onClick:()=>r(`/votacoes?vereador=${s}`),children:["Ver todas (",d.length,")"]})]})]})})]})]}),e.jsx(U,{activeTab:c,onTabChange:T})]})})}function f({icon:s,label:r,value:n,color:c}){const g={green:"bg-green-50 dark:bg-green-900/20",red:"bg-red-50 dark:bg-red-900/20",amber:"bg-amber-50 dark:bg-amber-900/20",gray:"bg-gray-50 dark:bg-gray-900/20"};return e.jsxs("div",{className:j("rounded-lg p-3",g[c]),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s,e.jsx("span",{className:"text-xs text-muted-foreground",children:r})]}),e.jsx("span",{className:"text-xl font-bold",children:n})]})}function re({votacao:s,onClick:r}){return e.jsxs(o.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"flex items-center gap-3 p-3 rounded-lg bg-muted/50 cursor-pointer hover:bg-muted transition-colors",children:[e.jsx("div",{className:j("w-2 h-8 rounded-full",s.status==="APROVADO"&&"bg-green-500",s.status==="REJEITADO"&&"bg-red-500",s.status==="EM_ANDAMENTO"&&"bg-blue-500",s.status==="ARQUIVADO"&&"bg-gray-400")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:s.titulo}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[new Date(s.data).toLocaleDateString("pt-BR")," • ",s.statusLabel]})]})]})}export{we as default};
