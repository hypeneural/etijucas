import{r as i,j as e}from"./vendor-radix-CQkmBfGK.js";import{M as fe,T as be,a as O,L as U,b as Q,u as je}from"./TileLayer-DNyvcmGV.js";import{B as c}from"./button-CaZ-p8Gx.js";import{B as F}from"./badge-Dht6PX02.js";import{C as B}from"./checkbox-Ba3G5Tyx.js";import{D as we,a as Ne,b as ve,c as ye,e as ke}from"./drawer-BWEH4l2j.js";import{S as Ce,a as He,b as Ve,c as Le,d as Se}from"./sheet-DF_06YNO.js";import{u as E}from"./vendor-query-BnSlUk-m.js";import{f as X,u as Me,r as k,b as R,d as b,R as ze,B as De,X as Re,p as $e,m as Z,M as Fe,N as Ie}from"./index-C2s0NZTP.js";import{C as J}from"./CategoryIcon-X1KWpzXU.js";import{b as Te}from"./useMyReports-CSPwDQrF.js";import{A as Ae}from"./arrow-left-D6o8ZULV.js";import{m as C,A as Y}from"./vendor-motion-3m9Rluu3.js";import{M as Pe}from"./map-Bk1CvY0G.js";import{S as Oe}from"./sparkles-CoPjwEEz.js";import{S as q}from"./sliders-horizontal-CMgo19lY.js";import{P as Be}from"./plus-CtBsKhfs.js";import{C as Ee}from"./circle-check-CWfFbktJ.js";import{T as Ze}from"./tag-DiZUxYAK.js";import{i as qe,s as We,j as _e,k as W,f as Ge,h as Ke}from"./vendor-utils-YRYEdvK0.js";import{C as Ue}from"./chevron-left-Dr6z49NP.js";import{C as Qe}from"./clock-BEpMoob5.js";import{F as Xe}from"./file-text-DzukNhc_.js";import{S as Je}from"./share-2-hWzfApca.js";import{p as _}from"./pt-BR-Crt6ieNw.js";import"./report.service-bMkj7513.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=X("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=X("Crosshair",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]]),$={recebido:{label:"Recebido",color:"#3b82f6",bgClass:"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300"},em_analise:{label:"Em Análise",color:"#f59e0b",bgClass:"bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300"},resolvido:{label:"Resolvido",color:"#10b981",bgClass:"bg-green-100 text-green-700 dark:bg-green-900/50 dark:text-green-300"},rejeitado:{label:"Rejeitado",color:"#ef4444",bgClass:"bg-red-100 text-red-700 dark:bg-red-900/50 dark:text-red-300"}},G=[{id:"all",label:"Todos os períodos",getRange:()=>null},{id:"today",label:"Hoje",getRange:()=>({from:We(new Date),to:qe(new Date)})},{id:"week",label:"Última semana",getRange:()=>({from:_e(new Date),to:new Date})},{id:"month",label:"Último mês",getRange:()=>({from:W(new Date,1),to:new Date})},{id:"3months",label:"Últimos 3 meses",getRange:()=>({from:W(new Date,3),to:new Date})}],K={"mdi:road-variant":"M7 4V2H17V4H19V6H17V8H22V11.3L20.3 20H3.7L2 11.3V8H7V6H5V4H7M9 7V4H15V7L12 11L9 7M4.6 10L6 17H18L19.4 10H4.6Z","mdi:lightbulb-on-outline":"M12 6C8.69 6 6 8.69 6 12C6 14.22 7.21 16.15 9 17.19V19C9 19.55 9.45 20 10 20H14C14.55 20 15 19.55 15 19V17.19C16.79 16.15 18 14.22 18 12C18 8.69 15.31 6 12 6M14.5 15H9.5V14L12 12L14.5 14V15M12 8C14.21 8 16 9.79 16 12C16 13.5 15.2 14.77 14 15.46V16H10V15.46C8.8 14.77 8 13.5 8 12C8 9.79 9.79 8 12 8Z","mdi:trash-can-outline":"M9 3V4H4V6H5V19C5 20.1 5.9 21 7 21H17C18.1 21 19 20.1 19 19V6H20V4H15V3H9M7 6H17V19H7V6M9 8V17H11V8H9M13 8V17H15V8H13Z","mdi:walk":"M14.12 10H19V8.2H15.38L13.38 4.87C13.08 4.37 12.54 4 11.92 4C11.74 4 11.58 4.04 11.42 4.08L6 5.8V11H7.8V7.33L9.91 6.67L6 22H7.8L10.67 13.89L13 17V22H14.8V15.59L12.31 11.05L13.04 8.18L14.12 10M14 3.8C15 3.8 15.8 3 15.8 2C15.8 1 15 .2 14 .2C13 .2 12.2 1 12.2 2C12.2 3 13 3.8 14 3.8Z","mdi:tree":"M11 21V15H6L11 3H13L18 15H13V21H11Z","mdi:pipe":"M22 14V16H20V14H16V16H14V14H10V16H8V14H4V16H2V14C2 12.9 2.9 12 4 12H8V10C8 8.9 8.9 8 10 8H14C15.1 8 16 8.9 16 10V12H20C21.1 12 22 12.9 22 14Z","mdi:parking":"M13 3H6V21H9V14H13C16.31 14 19 11.31 19 8S16.31 3 13 3M13 11H9V6H13C14.65 6 16 7.35 16 9S14.65 11 13 11Z","mdi:volume-high":"M14 3.23V5.29C16.89 6.15 19 8.83 19 12C19 15.17 16.89 17.84 14 18.7V20.77C18 19.86 21 16.28 21 12C21 7.72 18 4.14 14 3.23M16.5 12C16.5 10.23 15.5 8.71 14 7.97V16C15.5 15.29 16.5 13.76 16.5 12M3 9V15H7L12 20V4L7 9H3Z","mdi:dots-horizontal":"M16 12C16 10.9 16.9 10 18 10S20 10.9 20 12 19.1 14 18 14 16 13.1 16 12M10 12C10 10.9 10.9 10 12 10S14 10.9 14 12 13.1 14 12 14 10 13.1 10 12M4 12C4 10.9 4.9 10 6 10S8 10.9 8 12 7.1 14 6 14 4 13.1 4 12Z"};function ss(a){return K[a]||K["mdi:dots-horizontal"]}function as(a,r,o=!1){const t=o?56:48,j=ss(a),n=`
        <div class="marker-pin ${o?"marker-selected":""}" style="
            width: ${t}px;
            height: ${t}px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: ${r};
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 4px 16px rgba(0,0,0,0.35);
            transform: ${o?"scale(1.15)":"scale(1)"};
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        ">
            <svg viewBox="0 0 24 24" width="${t*.5}" height="${t*.5}" fill="white">
                <path d="${j}" />
            </svg>
        </div>
    `;return U.divIcon({html:n,className:"custom-marker-wrapper",iconSize:[t,t],iconAnchor:[t/2,t/2]})}function ts({onBoundsChange:a,onZoomChange:r}){const o=Q();return i.useEffect(()=>{const t=o.getBounds();a({minLat:t.getSouth(),minLon:t.getWest(),maxLat:t.getNorth(),maxLon:t.getEast()}),r(o.getZoom())},[o,a,r]),je({moveend:()=>{const t=o.getBounds();a({minLat:t.getSouth(),minLon:t.getWest(),maxLat:t.getNorth(),maxLon:t.getEast()}),r(o.getZoom())},zoomend:()=>{r(o.getZoom())}}),null}function rs({lat:a,lon:r}){const o=Q();return i.useEffect(()=>{a&&r&&o.flyTo([a,r],16,{duration:1.2})},[a,r,o]),null}function is({report:a,statusConfig:r,onViewDetails:o,onRoutes:t,onShare:j}){const[n,w]=i.useState(0),H=()=>{w(m=>(m+1)%a.images.length)},N=()=>{w(m=>(m-1+a.images.length)%a.images.length)};return e.jsxs("div",{className:"px-4 pb-6 space-y-5 overflow-y-auto h-full",children:[e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(F,{className:b(r[a.status]?.bgClass,"mb-2"),children:r[a.status]?.label}),e.jsx("h3",{className:"font-bold text-xl leading-tight text-slate-900 dark:text-slate-100",children:a.title})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(F,{variant:"outline",className:"font-medium shrink-0",children:a.category?.name||"Outros"}),a.protocol&&e.jsxs("span",{className:"text-[10px] text-muted-foreground font-mono bg-muted px-1.5 py-0.5 rounded",children:["#",a.protocol]})]})]})}),a.images.length>0?e.jsxs("div",{className:"relative aspect-video rounded-2xl overflow-hidden bg-slate-100 dark:bg-slate-800 shadow-sm group",children:[e.jsx(Y,{mode:"wait",children:e.jsx(C.img,{src:a.images[n].url,initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"w-full h-full object-cover",alt:`Evidência ${n+1}`},n)}),a.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between p-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(c,{size:"icon",variant:"ghost",className:"h-8 w-8 bg-black/20 hover:bg-black/40 text-white rounded-full backdrop-blur-sm",onClick:m=>{m.stopPropagation(),N()},children:e.jsx(Ue,{className:"w-4 h-4"})}),e.jsx(c,{size:"icon",variant:"ghost",className:"h-8 w-8 bg-black/20 hover:bg-black/40 text-white rounded-full backdrop-blur-sm",onClick:m=>{m.stopPropagation(),H()},children:e.jsx(Z,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1.5",children:a.images.map((m,g)=>e.jsx("div",{className:b("w-1.5 h-1.5 rounded-full transition-all shadow-sm",g===n?"bg-white w-3":"bg-white/50")},g))})]})]}):e.jsxs("div",{className:"flex items-center gap-4 p-4 rounded-2xl bg-slate-50 dark:bg-slate-900/50 border border-slate-100 dark:border-slate-800",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center shrink-0",style:{backgroundColor:`${a.category?.color||"#64748b"}20`},children:e.jsx(J,{icon:a.category?.icon||"mdi:dots-horizontal",color:a.category?.color||"#64748b",size:"lg"})}),e.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Esta denúncia não possui fotos anexadas."})]}),e.jsxs("div",{className:"grid gap-3",children:[a.description&&e.jsxs("div",{className:"bg-muted/30 rounded-xl p-3.5 border border-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Descrição"})]}),e.jsx("p",{className:"text-sm text-foreground/90 leading-relaxed",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-muted/30 rounded-xl p-3 border border-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Fe,{className:"w-3.5 h-3.5 text-primary"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-muted-foreground",children:"Local"})]}),e.jsx("p",{className:"text-xs font-medium line-clamp-2",title:a.address||a.addressShort,children:a.address||a.addressShort})]}),e.jsxs("div",{className:"bg-muted/30 rounded-xl p-3 border border-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Qe,{className:"w-3.5 h-3.5 text-primary"}),e.jsx("span",{className:"text-[10px] font-bold uppercase text-muted-foreground",children:"Data"})]}),e.jsx("p",{className:"text-xs font-medium",children:Ge(new Date(a.createdAt),"dd/MM/yyyy",{locale:_})}),e.jsxs("p",{className:"text-[10px] text-muted-foreground",children:["há ",Ke(new Date(a.createdAt),{locale:_})]})]})]})]}),e.jsxs("div",{className:"pt-2 space-y-2",children:[e.jsxs(c,{onClick:o,className:"w-full h-12 font-semibold shadow-md bg-gradient-to-r from-primary to-primary/90 hover:to-primary",size:"lg",children:[e.jsx(Xe,{className:"w-5 h-5 mr-2"}),"Ver Detathes Completos",e.jsx(Z,{className:"w-5 h-5 ml-auto opacity-50"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(c,{variant:"outline",onClick:t,className:"h-11 border-muted-foreground/20 hover:bg-muted/50",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2 text-blue-500"}),"Rotas"]}),e.jsxs(c,{variant:"outline",onClick:j,className:"h-11 border-muted-foreground/20 hover:bg-muted/50",children:[e.jsx(Je,{className:"w-4 h-4 mr-2 text-green-600"}),"Compartilhar"]})]})]})]})}function Ds(){const a=Me(),[r,o]=i.useState(null),[t,j]=i.useState(14),[n,w]=i.useState(null),[H,N]=i.useState(!1),[m,g]=i.useState(!1),[V,ee]=i.useState(null),[L,se]=i.useState(null),[I,S]=i.useState(!1),[u,M]=i.useState([]),[p,T]=i.useState([]),[f,A]=i.useState("all"),ae=[-27.2381,-48.6356],{stats:te}=Te(),re=te?.total??0,{data:ie}=E({queryKey:["report-categories"],queryFn:async()=>{const s=await fetch("/api/v1/report-categories");if(!s.ok)throw new Error("Failed to fetch");return s.json()},staleTime:5*60*1e3}),ne=ie?.data||[],v=r?`${r.minLat},${r.minLon},${r.maxLat},${r.maxLon}`:null,oe=i.useCallback(s=>{o(s)},[]),le=i.useCallback(s=>{j(s)},[]),{data:P,isLoading:ce,refetch:de,isFetching:z}=E({queryKey:["reports","map",v,t,u,p,f],queryFn:async()=>{const s=new URLSearchParams;v&&s.set("bbox",v),s.set("zoom",String(t)),s.set("limit","300"),u.length&&s.set("status",u.join(",")),p.length&&s.set("category",p.join(","));const d=await fetch(`/api/v1/reports/map?${s.toString()}`);if(!d.ok)throw new Error("Failed to fetch");return d.json()},enabled:!!v,staleTime:30*1e3,refetchOnWindowFocus:!1}),D=i.useMemo(()=>{let s=P?.reports||[];if(f!=="all"){const l=G.find(h=>h.id===f)?.getRange();l&&(s=s.filter(h=>{const y=new Date(h.createdAt);return y>=l.from&&y<=l.to}))}return s},[P?.reports,f]),x=u.length+p.length+(f!=="all"?1:0),me=()=>{M([]),T([]),A("all")},xe=i.useCallback(()=>{if(!navigator.geolocation){k.error("Geolocalização não suportada");return}S(!0),navigator.geolocation.getCurrentPosition(s=>{const{latitude:d,longitude:l}=s.coords;se({lat:d,lon:l}),ee({lat:d,lon:l}),S(!1),k.success("Localização encontrada!")},()=>{S(!1),k.error("Não foi possível obter sua localização")},{enableHighAccuracy:!0,timeout:1e4})},[]),he=i.useCallback(s=>{w(s),N(!0)},[]),ue=()=>{n&&a(`/denuncia/${n.id}`)},ge=async()=>{if(!n)return;const s=`${window.location.origin}/denuncia/${n.id}`;if(navigator.share)try{await navigator.share({title:n.title,url:s})}catch{}else await navigator.clipboard.writeText(s),k.success("Link copiado!")},pe=()=>{if(!n)return;const s=`https://www.google.com/maps/dir/?api=1&destination=${n.lat},${n.lon}`;window.open(s,"_blank")};return e.jsxs("div",{className:"fixed inset-0 flex flex-col bg-background",children:[e.jsx("header",{className:"safe-top bg-white/95 dark:bg-slate-900/95 backdrop-blur-md border-b z-50 shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between px-3 py-2.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{variant:"ghost",size:"icon",onClick:()=>a(-1),className:"shrink-0 -ml-1",children:e.jsx(Ae,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C.div,{initial:{rotate:-10,scale:.8},animate:{rotate:0,scale:1},transition:{type:"spring",stiffness:200},children:e.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-primary to-primary/60 flex items-center justify-center shadow-md",children:e.jsx(Pe,{className:"w-5 h-5 text-white"})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"font-bold text-lg leading-tight flex items-center gap-1.5",children:["Mapa",e.jsx(Oe,{className:"w-4 h-4 text-amber-500"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:z?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3 animate-spin"}),"Atualizando..."]}):e.jsxs("span",{children:[e.jsx("strong",{children:D.length})," de ",e.jsx("strong",{children:re})," denúncias"]})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(c,{variant:x>0?"default":"ghost",size:"icon",onClick:()=>g(!0),className:"relative",children:[e.jsx(q,{className:"w-5 h-5"}),x>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-destructive text-destructive-foreground text-xs rounded-full flex items-center justify-center font-bold",children:x})]}),e.jsx(c,{variant:"ghost",size:"icon",onClick:xe,disabled:I,children:I?e.jsx(R,{className:"w-5 h-5 animate-spin"}):e.jsx(es,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs(fe,{center:ae,zoom:14,className:"w-full h-full z-0",zoomControl:!1,children:[e.jsx(be,{attribution:"© OSM",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(ts,{onBoundsChange:oe,onZoomChange:le}),V&&e.jsx(rs,{lat:V.lat,lon:V.lon}),D.map(s=>e.jsx(O,{position:[s.lat,s.lon],icon:as(s.category?.icon||"mdi:dots-horizontal",s.category?.color||"#64748b",n?.id===s.id),eventHandlers:{click:()=>he(s)}},s.id)),L&&e.jsx(O,{position:[L.lat,L.lon],icon:U.divIcon({html:`
                                    <div class="user-location-marker">
                                        <div class="pulse-ring"></div>
                                        <div class="center-dot"></div>
                                    </div>
                                `,className:"user-marker-wrapper",iconSize:[24,24],iconAnchor:[12,12]})})]}),e.jsx(C.button,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.3,type:"spring",stiffness:200},whileTap:{scale:.9},onClick:()=>a("/denuncia/nova"),className:"absolute bottom-24 right-4 z-20 w-14 h-14 rounded-full bg-primary text-primary-foreground shadow-xl flex items-center justify-center",children:e.jsx(Be,{className:"w-7 h-7"})}),e.jsx(Y,{children:ce&&!D.length&&e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-background/60 backdrop-blur-sm flex items-center justify-center z-10",children:e.jsxs("div",{className:"flex flex-col items-center gap-3 p-6 bg-card rounded-2xl shadow-lg",children:[e.jsx(R,{className:"w-10 h-10 animate-spin text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"Carregando denúncias..."})]})})})]}),e.jsxs("div",{className:"shrink-0 bg-white/95 dark:bg-slate-900/95 backdrop-blur-md border-t px-3 py-2.5 flex gap-2 overflow-x-auto z-10",children:[Object.entries($).map(([s,d])=>e.jsx(c,{variant:u.includes(s)?"default":"outline",size:"sm",className:b("shrink-0 rounded-full font-medium transition-all",u.includes(s)&&"shadow-md"),onClick:()=>{M(l=>l.includes(s)?l.filter(h=>h!==s):[...l,s])},children:d.label},s)),e.jsx(c,{variant:"outline",size:"sm",className:"shrink-0 rounded-full ml-auto",onClick:()=>de(),disabled:z,children:e.jsx(ze,{className:b("w-4 h-4",z&&"animate-spin")})})]}),e.jsx(De,{}),e.jsx(Ce,{open:m,onOpenChange:g,children:e.jsxs(He,{side:"bottom",className:"max-h-[85vh] rounded-t-3xl",children:[e.jsx(Ve,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(Le,{className:"text-lg",children:"Filtros Avançados"}),e.jsx(Se,{children:x>0?`${x} filtro${x>1?"s":""} ativo${x>1?"s":""}`:"Nenhum filtro ativo"})]})]}),x>0&&e.jsxs(c,{variant:"ghost",size:"sm",onClick:me,children:[e.jsx(Re,{className:"w-4 h-4 mr-1"}),"Limpar"]})]})}),e.jsxs("div",{className:"space-y-6 pb-6 overflow-y-auto",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ee,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("h3",{className:"font-semibold",children:"Situação"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries($).map(([s,d])=>e.jsxs("label",{className:b("flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer transition-all",u.includes(s)?"border-primary bg-primary/5":"border-muted bg-muted/30 hover:border-muted-foreground/30"),children:[e.jsx(B,{checked:u.includes(s),onCheckedChange:l=>{M(h=>l?[...h,s]:h.filter(y=>y!==s))}}),e.jsx("span",{className:"font-medium text-sm",children:d.label})]},s))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ze,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("h3",{className:"font-semibold",children:"Categoria"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ne.map(s=>e.jsxs("label",{className:b("flex items-center gap-2 p-3 rounded-xl border-2 cursor-pointer transition-all",p.includes(s.slug)?"border-primary bg-primary/5":"border-muted bg-muted/30 hover:border-muted-foreground/30"),children:[e.jsx(B,{checked:p.includes(s.slug),onCheckedChange:d=>{T(l=>d?[...l,s.slug]:l.filter(h=>h!==s.slug))}}),e.jsx(J,{icon:s.icon,color:s.color,size:"sm"}),e.jsx("span",{className:"font-medium text-sm truncate",children:s.name})]},s.id))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx($e,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("h3",{className:"font-semibold",children:"Período"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:G.map(s=>e.jsx(c,{variant:f===s.id?"default":"outline",size:"sm",className:"rounded-full",onClick:()=>A(s.id),children:s.label},s.id))})]}),e.jsxs(c,{className:"w-full h-12 text-base font-semibold",onClick:()=>g(!1),children:["Aplicar Filtros",x>0&&e.jsx(F,{variant:"secondary",className:"ml-2",children:x})]})]})]})}),e.jsx(we,{open:H,onOpenChange:N,children:e.jsxs(Ne,{className:"max-h-[90vh]",children:[e.jsxs(ve,{className:"pb-0 pt-2",children:[e.jsx(ye,{className:"sr-only",children:"Detalhes da Denúncia"}),e.jsx(ke,{className:"sr-only",children:"Preview da denúncia selecionada"})]}),n&&e.jsx(is,{report:n,statusConfig:$,onViewDetails:ue,onRoutes:pe,onShare:ge})]})}),e.jsx("style",{children:`
                .custom-marker-wrapper {
                    background: transparent !important;
                    border: none !important;
                }
                .marker-pin {
                    animation: marker-pop-in 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
                }
                @keyframes marker-pop-in {
                    0% { transform: scale(0); opacity: 0; }
                    100% { transform: scale(1); opacity: 1; }
                }
                .marker-selected {
                    animation: marker-pulse 1.5s infinite;
                }
                @keyframes marker-pulse {
                    0%, 100% { box-shadow: 0 4px 16px rgba(0,0,0,0.35); }
                    50% { box-shadow: 0 4px 24px rgba(0,0,0,0.5), 0 0 0 8px rgba(0,0,0,0.1); }
                }
                .user-marker-wrapper {
                    background: transparent !important;
                    border: none !important;
                }
                .user-location-marker {
                    position: relative;
                    width: 24px;
                    height: 24px;
                }
                .user-location-marker .center-dot {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 14px;
                    height: 14px;
                    background: #3b82f6;
                    border: 3px solid white;
                    border-radius: 50%;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                }
                .user-location-marker .pulse-ring {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    width: 40px;
                    height: 40px;
                    background: rgba(59, 130, 246, 0.25);
                    border-radius: 50%;
                    animation: pulse-ring 2s infinite;
                }
                @keyframes pulse-ring {
                    0% { transform: translate(-50%, -50%) scale(0.5); opacity: 1; }
                    100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
                }
                .leaflet-container {
                    font-family: inherit;
                }
            `})]})}export{Ds as default};
