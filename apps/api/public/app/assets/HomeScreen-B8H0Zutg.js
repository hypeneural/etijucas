import{r as g,j as e,R as _}from"./vendor-radix-BOMdSbHx.js";import{S as oe,d as Ce,a as le,b as ce,c as de}from"./sheet-B6TU03sN.js";import{B as me}from"./badge-Dx3iuN7e.js";import{b as xe}from"./bairros-Cf5Z_oCw.js";import{b as I,d as R,h as ue,u as P,T as Q,g as C,m as Se,l as he,t as Ie,E as De,f as pe,M as ee,X as fe,c as D,R as Me}from"./index-nnnHtOJ2.js";import{u as W}from"./useAuthStore-oSB5YFQn.js";import{m as s,u as Ae,a as M,L as Ee,A as B,c as Pe}from"./vendor-motion-DqUnpu2Q.js";import{B as Re}from"./bell-Bud4W-mV.js";import{U as Be}from"./user-Wh_i1bx8.js";import{C as Oe}from"./chevron-down-CTMh-scu.js";import{I as Le}from"./input-ybXtZuRa.js";import{S as ze}from"./search-DGW4FYPH.js";import{H as X}from"./heart-Coq-R0BL.js";import{C as O}from"./clock-7xZ9GwFZ.js";import{P as ge}from"./phone-dPylyFpl.js";import{M as S}from"./map-pin-DI9D_lTY.js";import{h as v,B as A}from"./button-B4bczieO.js";import{u as je}from"./vendor-query-2Fnzm2h0.js";import{e as T}from"./localDatabase-CevzQPt2.js";import{a as z,E as H,Q as He}from"./client-BTgelhMB.js";import{C as Ue}from"./circle-alert-J0VsZKky.js";import{r as $e}from"./report.service-B_aS5s4T.js";import{F as be}from"./file-text-D8Q3nS0S.js";import{C as ye}from"./circle-check-wdRfyK1h.js";import{L as qe}from"./lightbulb-DUI9i_6x.js";import{T as ve}from"./trash-2-DG6tuApW.js";import{C as we}from"./camera-YroG2X9d.js";import{C as E}from"./chevron-right-NiYtMPQn.js";import{T as Ne}from"./trending-up-BnBtzAAk.js";import{S as Fe}from"./switch-D7GdXpV4.js";import{f as Ve}from"./formatTimeAgo-Fr0pCedg.js";import{u as _e,a as Ge}from"./useOfflineTopics-KMe_rthx.js";import{S as G}from"./sparkles-g2YhDpwv.js";import{U as Ye}from"./users-D135F5yK.js";import{M as te}from"./message-circle-Dli7-egF.js";import{S as Ke}from"./share-2-BrELRygF.js";import{C as Ze}from"./church-CR5g0COq.js";import{I as Qe}from"./info-B_jb5hnf.js";import{u as We,T as Xe}from"./useEventsApi-B3JLGB4S.js";import{v as Je,u as et,r as se,p as U,w as tt}from"./vendor-utils-CpAfWav3.js";import{a as st,T as at}from"./tourism.types-CI3l7VIN.js";import{S as rt}from"./star-5MxaPyhp.js";import{u as it,S as ke,D as nt,a as ot}from"./useInstallPrompt-Bz5lBQPj.js";import{S as Te}from"./smartphone-D4cZqrnn.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=I("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=I("CloudSun",[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=I("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=I("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=I("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=I("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=I("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function pt({todayEventsCount:n=0,hasActiveAlert:a=!1,streakDays:t=0}){const{user:c,isAuthenticated:r}=W(),{selectedBairro:i}=R(),u=g.useMemo(()=>{const j=new Date().getHours();return j>=5&&j<12?{text:"Bom dia",icon:ut,emoji:"â˜€ï¸"}:j>=12&&j<18?{text:"Boa tarde",icon:ct,emoji:"ðŸŒ¤ï¸"}:{text:"Boa noite",icon:xt,emoji:"ðŸŒ™"}},[]),o=c?.nome?.split(" ")[0]||"",d=g.useMemo(()=>a?null:n>0?`${n} evento${n>1?"s":""} hoje em ${i.nome}`:`Veja o que estÃ¡ rolando em ${i.nome}`,[a,n,i]),f=u.icon;return e.jsxs(s.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s.div,{animate:{rotate:[0,10,-10,0],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,repeatDelay:5},children:e.jsx(f,{className:"w-5 h-5 text-primary-foreground/80"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-primary-foreground",children:[u.text,o?`, ${o}!`:"!"," ",u.emoji]}),d&&e.jsx(s.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-xs text-primary-foreground/70",children:d})]})]}),t>1&&e.jsxs(s.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300,delay:.3},className:`flex items-center gap-1 px-2 py-1 \r
                     bg-gradient-to-r from-amber-500 to-orange-500 \r
                     rounded-full text-white text-xs font-medium shadow-lg`,children:[e.jsx(mt,{className:"w-3 h-3"}),e.jsxs("span",{children:[t,"d"]})]})]})}function ft({label:n="Ao vivo",size:a="sm",showLabel:t=!0}){const{isOnline:c}=ue(),r=a==="sm"?"w-2 h-2":"w-3 h-3",i=a==="sm"?"w-3 h-3":"w-4 h-4";return c?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("div",{className:"relative",children:[e.jsx(s.div,{className:`absolute ${i} rounded-full bg-green-500/50`,animate:{scale:[1,1.8,1],opacity:[.7,0,.7]},transition:{duration:2,repeat:1/0,ease:"easeOut"},style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),e.jsx(s.div,{className:`relative ${r} rounded-full bg-green-500`,animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),t&&e.jsx(s.span,{initial:{opacity:0},animate:{opacity:1},className:"text-xs text-primary-foreground/70 font-medium",children:n})]}):e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:`${r} rounded-full bg-amber-500`}),t&&e.jsx("span",{className:"text-xs text-primary-foreground/70",children:"Offline"})]})}function gt({scrollRef:n,todayEventsCount:a=0,hasActiveAlert:t=!1,streakDays:c=0}){const r=P(),{selectedBairro:i,setSelectedBairro:u}=R(),{user:o,isAuthenticated:d}=W(),[f,j]=g.useState(!1),{scrollY:m}=Ae({container:n}),x=M(m,[0,80],[160,80]),y=M(m,[0,80],[1,.85]),h=M(m,[0,50],[1,0]),N=()=>{r(d?"/perfil":"/login")};return e.jsxs(s.header,{style:{height:x},className:"relative overflow-hidden bg-gradient-to-br from-primary via-primary to-primary-dark",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("svg",{className:"absolute w-[200%] h-full opacity-20 animate-wave",viewBox:"0 0 1200 200",preserveAspectRatio:"none",children:e.jsx("path",{d:"M0,100 C150,150 350,50 500,100 C650,150 850,50 1000,100 C1150,150 1200,100 1200,100 L1200,200 L0,200 Z",fill:"currentColor",className:"text-primary-foreground"})}),e.jsx("svg",{className:"absolute w-[200%] h-full opacity-10 animate-wave-slow",viewBox:"0 0 1200 200",preserveAspectRatio:"none",children:e.jsx("path",{d:"M0,120 C200,80 400,160 600,120 C800,80 1000,160 1200,120 L1200,200 L0,200 Z",fill:"currentColor",className:"text-primary-foreground"})}),e.jsx(s.div,{className:"absolute top-4 right-8 w-2 h-2 rounded-full bg-secondary/40",animate:{y:[0,-10,0],x:[0,5,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"}}),e.jsx(s.div,{className:"absolute top-12 right-20 w-3 h-3 rounded-full bg-accent/30",animate:{y:[0,8,0],x:[0,-8,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut",delay:1}}),e.jsx(s.div,{className:"absolute top-8 left-16 w-1.5 h-1.5 rounded-full bg-secondary/50",animate:{y:[0,-6,0]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:2}})]}),e.jsxs("div",{className:"relative z-10 flex flex-col h-full px-4 pt-safe-top",children:[e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs(s.div,{style:{scale:y},className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-xl font-bold text-primary-foreground",children:"eTijucas"}),e.jsx(ft,{})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(s.button,{whileTap:{scale:.9},className:"relative p-2 rounded-full bg-primary-foreground/10",children:[e.jsx(Re,{className:"w-5 h-5 text-primary-foreground"}),e.jsx(me,{variant:"destructive",className:"absolute -top-1 -right-1 w-4 h-4 p-0 flex items-center justify-center text-[10px]",children:"2"})]}),e.jsx(s.button,{whileTap:{scale:.9},onClick:N,className:"w-8 h-8 rounded-full bg-primary-foreground/20 flex items-center justify-center overflow-hidden",children:o?.avatarUrl?e.jsx("img",{src:o.avatarUrl,alt:o.nome,className:"w-full h-full object-cover"}):e.jsx(Be,{className:"w-4 h-4 text-primary-foreground"})})]})]}),e.jsxs(s.div,{style:{opacity:h},className:"space-y-2",children:[e.jsx(pt,{todayEventsCount:a,hasActiveAlert:t,streakDays:c}),e.jsxs(oe,{open:f,onOpenChange:j,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(s.button,{whileTap:{scale:.95},className:"flex items-center gap-1 px-3 py-1.5 rounded-full bg-primary-foreground/15 text-primary-foreground text-sm font-medium",children:[e.jsx("span",{className:"text-xs opacity-80",children:"ðŸ“"}),e.jsx("span",{children:i.nome}),e.jsx(Oe,{className:"w-4 h-4"})]})}),e.jsxs(le,{side:"bottom",className:"rounded-t-3xl",children:[e.jsx(ce,{children:e.jsx(de,{children:"Selecione seu bairro"})}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-4 pb-8",children:xe.map(b=>e.jsx(s.button,{whileTap:{scale:.95},onClick:()=>{u(b),j(!1)},className:`p-3 rounded-xl text-left font-medium transition-colors ${i.id===b.id?"bg-primary text-primary-foreground":"bg-muted text-foreground hover:bg-muted/80"}`,children:b.nome},b.id))})]})]})]})]})]})}const jt=[{id:"reportar",label:"Reportar",icon:Q,action:"reportar",color:"accent"},{id:"curtidos",label:"Mais curtidos",icon:X,action:"filter"},{id:"eventos",label:"Eventos hoje",icon:C,action:"agenda"},{id:"missas",label:"Missas hoje",icon:O,action:"mais"},{id:"telefones",label:"Telefones Ãºteis",icon:ge,action:"mais"},{id:"turismo",label:"Turismo",icon:S,action:"mais"}];function bt({onNavigate:n}){const a=t=>{t.action&&t.action!=="filter"&&n(t.action)};return e.jsxs("div",{className:"px-4 py-4 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ze,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(Le,{type:"text",placeholder:"Buscar denÃºncias, eventos, missas, lugaresâ€¦",className:"pl-12 pr-4 h-12 rounded-2xl bg-card border-0 shadow-card text-base placeholder:text-muted-foreground/60"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1 -mx-4 px-4",children:jt.map((t,c)=>{const r=t.icon,i=t.color==="accent";return e.jsxs(s.button,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:c*.05},whileTap:{scale:.92},onClick:()=>a(t),className:`flex items-center gap-1.5 px-3 py-2 rounded-full whitespace-nowrap text-sm font-medium transition-colors ${i?"bg-accent text-accent-foreground":"bg-card text-foreground shadow-card"}`,children:[e.jsx(r,{className:"w-4 h-4"}),t.label]},t.id)})})]})}function $({variant:n="default"}){return e.jsx("div",{className:"bento-card animate-pulse",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl skeleton-shimmer"}),n==="stats"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-8 w-16 skeleton-shimmer rounded"}),e.jsx("div",{className:"h-4 w-24 skeleton-shimmer rounded"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-5 w-3/4 skeleton-shimmer rounded"}),e.jsx("div",{className:"h-4 w-full skeleton-shimmer rounded"})]})]})})}function yt(){return e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("div",{className:"h-6 w-32 skeleton-shimmer rounded mb-3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx($,{variant:"stats"}),e.jsx($,{variant:"stats"}),e.jsx($,{}),e.jsx($,{})]})]})}function ae(){return e.jsxs("div",{className:"flex-shrink-0 w-64 h-36 rounded-2xl skeleton-shimmer p-4",children:[e.jsx("div",{className:"h-3 w-20 bg-white/20 rounded mb-2"}),e.jsx("div",{className:"h-5 w-40 bg-white/20 rounded mb-1"}),e.jsx("div",{className:"h-4 w-32 bg-white/20 rounded"})]})}async function q(){(await T.getAll()).length}const vt={async getAll(n){await q();try{const a=await z.get(H.events.list,n);return a.data&&a.data.length>0&&await T.saveMany(a.data),a}catch(a){console.warn("[EventService] API failed, using cache:",a);let t=await T.getAll();if(n?.bairroId&&(t=t.filter(o=>o.bairroId===n.bairroId)),n?.fromDate){const o=new Date(n.fromDate);t=t.filter(d=>new Date(d.dateTime)>=o)}if(n?.toDate){const o=new Date(n.toDate);t=t.filter(d=>new Date(d.dateTime)<=o)}if(n?.search){const o=n.search.toLowerCase();t=t.filter(d=>d.titulo.toLowerCase().includes(o)||d.descricao?.toLowerCase().includes(o))}t.sort((o,d)=>new Date(o.dateTime).getTime()-new Date(d.dateTime).getTime());const c=n?.page||1,r=n?.perPage||10,i=(c-1)*r,u=i+r;return{data:t.slice(i,u),meta:{total:t.length,page:c,perPage:r,lastPage:Math.ceil(t.length/r),from:i+1,to:Math.min(u,t.length)}}}},async getUpcoming(n=5){await q();try{const a=await z.get(H.events.upcoming,{limit:n});return a.data&&a.data.length>0&&await T.saveMany(a.data),a.data}catch{console.warn("[EventService] API failed for upcoming, using cache");const t=new Date;return(await T.getAll()).filter(r=>new Date(r.dateTime)>=t).sort((r,i)=>new Date(r.dateTime).getTime()-new Date(i.dateTime).getTime()).slice(0,n)}},async getByDate(n){await q();try{const a=await z.get(H.events.byDate(n));return a.data&&a.data.length>0&&await T.saveMany(a.data),a.data}catch{console.warn("[EventService] API failed for byDate, using cache");const t=new Date(n).toDateString();return(await T.getAll()).filter(r=>new Date(r.dateTime).toDateString()===t)}},async getById(n){await q();try{const a=await z.get(H.events.get(n));return a.data&&await T.save(a.data),a.data}catch{return console.warn("[EventService] API failed for getById, using cache"),T.getById(n)}},async refresh(){await T.clear(),await this.getAll()}},wt=["offline","events","upcoming"];function Nt(n=5){const{isOnline:a}=ue();return je({queryKey:[...wt,n],queryFn:async()=>{if(a)try{return await vt.getUpcoming(n)}catch{console.warn("[useUpcomingOfflineEvents] API failed, using cache")}const t=new Date;return(await T.getAll()).filter(r=>new Date(r.dateTime)>=t).slice(0,n)},staleTime:1e3*60*5})}function kt({onNavigate:n}){const a=P(),{selectedBairro:t}=R(),{data:c,isLoading:r}=Nt(5),i=_.useMemo(()=>{if(!c)return[];const x=new Date;return c.filter(y=>new Date(y.dateTime).toDateString()===x.toDateString())},[c]),u=Se.find(x=>x.bairroId===t.id),o=Ie[0],d=he[0],f={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.08}}},j={hidden:{opacity:0,y:20,scale:.95},show:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:300,damping:24}}},m=x=>{v("selection"),a(x)};return r?e.jsx(yt,{}):e.jsxs("div",{className:"px-4 py-2",children:[e.jsx("h2",{className:"text-lg font-bold text-foreground mb-3",children:"Hoje em Tijucas"}),e.jsxs(s.div,{variants:f,initial:"hidden",animate:"show",className:"grid grid-cols-2 gap-3",children:[e.jsxs(s.button,{layoutId:"bento-eventos",variants:j,whileTap:{scale:.96},onClick:()=>m("/agenda"),className:"bento-card flex flex-col items-start gap-2 text-left relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/5 to-transparent pointer-events-none"}),e.jsx(s.div,{layoutId:"bento-eventos-icon",className:"w-10 h-10 rounded-xl bg-secondary/10 flex items-center justify-center relative z-10",children:e.jsx(C,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground",children:i.length}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Eventos hoje"})]}),i.length>0&&e.jsxs("p",{className:"text-xs text-secondary font-medium relative z-10",children:[new Date(i[0].dateTime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})," - ",i[0].titulo]})]}),e.jsxs(s.button,{layoutId:"bento-missas",variants:j,whileTap:{scale:.96},onClick:()=>m("/missas"),className:"bento-card flex flex-col items-start gap-2 text-left relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent pointer-events-none"}),e.jsx(s.div,{layoutId:"bento-missas-icon",className:"w-10 h-10 rounded-xl bg-primary/10 flex items-center justify-center relative z-10",children:e.jsx(O,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-lg font-bold text-foreground",children:u?u.horarios[0]:"â€”"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"PrÃ³xima missa"})]}),e.jsx("p",{className:"text-xs text-primary font-medium relative z-10",children:u?u.igrejaNome.slice(0,20)+"...":"Sem horÃ¡rios"})]}),e.jsxs(s.button,{layoutId:"bento-alertas",variants:j,whileTap:{scale:.96},className:"bento-card flex flex-col items-start gap-2 text-left relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-accent/5 to-transparent pointer-events-none"}),e.jsx(s.div,{layoutId:"bento-alertas-icon",className:"w-10 h-10 rounded-xl bg-accent/10 flex items-center justify-center relative z-10",animate:d?{scale:[1,1.05,1]}:{},transition:{duration:2,repeat:1/0},children:e.jsx(Ue,{className:"w-5 h-5 text-accent"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:d?.titulo||"Sem alertas"}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:d?.descricao||"Tudo tranquilo por aqui"})]})]}),e.jsxs(s.button,{layoutId:"bento-turismo",variants:j,whileTap:{scale:.96},onClick:()=>m("/pontos-turisticos"),className:"bento-card flex flex-col items-start gap-2 text-left overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-secondary/5 to-transparent pointer-events-none"}),e.jsx(s.div,{layoutId:"bento-turismo-icon",className:"w-10 h-10 rounded-xl bg-secondary/10 flex items-center justify-center relative z-10",children:e.jsx(S,{className:"w-5 h-5 text-secondary"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground",children:o.titulo}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2",children:o.descCurta})]})]})]})]})}function Tt({value:n,duration:a=1e3}){const[t,c]=_.useState(0);return _.useEffect(()=>{const r=Date.now(),i=t,u=n-i,o=()=>{const d=Date.now()-r,f=Math.min(d/a,1),j=1-Math.pow(1-f,3);c(Math.round(i+u*j)),f<1&&requestAnimationFrame(o)};requestAnimationFrame(o)},[n,a]),e.jsx("span",{children:t})}function K({icon:n,label:a,value:t,color:c,delay:r}){return e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:r,duration:.3},className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm rounded-xl px-3 py-2",children:[e.jsx("div",{className:`p-1.5 rounded-lg ${c}`,children:e.jsx(n,{className:"w-3.5 h-3.5 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-lg font-bold leading-none",children:e.jsx(Tt,{value:t,duration:1200})}),e.jsx("p",{className:"text-[10px] opacity-80 truncate",children:a})]})]})}const Ct=[{id:"buraco",label:"Buraco",icon:Q},{id:"iluminacao",label:"IluminaÃ§Ã£o",icon:qe},{id:"lixo",label:"Lixo",icon:ve},{id:"outros",label:"Outros",icon:De}];function St({onNavigate:n}){const a=P(),{data:t}=je({queryKey:He.reports.stats(),queryFn:()=>$e.getReportsStats(),staleTime:1e3*60*10}),c=()=>{a("/denuncia/nova")},r=()=>{a("/denuncias")};return e.jsx("div",{className:"px-4 py-4",children:e.jsxs(s.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:[.95,1.02,1]},transition:{duration:.5,times:[0,.7,1]},className:"relative overflow-hidden bg-gradient-to-br from-orange-500 via-orange-600 to-red-600 rounded-3xl p-5 text-white",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx(s.div,{animate:{x:[0,20,0],y:[0,-10,0]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},className:"absolute top-0 right-0 w-40 h-40 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/4"}),e.jsx(s.div,{animate:{x:[0,-15,0],y:[0,15,0]},transition:{duration:6,repeat:1/0,ease:"easeInOut"},className:"absolute bottom-0 left-0 w-32 h-32 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/4"})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(s.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},className:"p-2 bg-white/20 rounded-xl",children:e.jsx(ht,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:"Fiscaliza Tijucas"}),e.jsx("p",{className:"text-xs opacity-80",children:"Reporte problemas na cidade"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsx(K,{icon:be,label:"Total",value:t?.total||0,color:"bg-blue-500",delay:.1}),e.jsx(K,{icon:O,label:"Em anÃ¡lise",value:t?.byStatus?.em_analise||0,color:"bg-yellow-500",delay:.2}),e.jsx(K,{icon:ye,label:"Resolvidos",value:t?.byStatus?.resolvido||0,color:"bg-green-500",delay:.3})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Ct.map(i=>{const u=i.icon;return e.jsxs(s.button,{whileTap:{scale:.92},onClick:c,className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-white/20 backdrop-blur-sm text-sm font-medium hover:bg-white/30 transition-colors",children:[e.jsx(u,{className:"w-4 h-4"}),i.label]},i.id)})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(s.button,{whileTap:{scale:.95},onClick:c,className:"flex-1 flex items-center justify-center gap-2 bg-white text-orange-600 font-semibold py-3 rounded-xl shadow-lg shadow-orange-900/20",children:[e.jsx(we,{className:"w-5 h-5"}),"Reportar agora"]}),e.jsxs(s.button,{whileTap:{scale:.95},onClick:r,className:"flex items-center justify-center gap-1 bg-white/20 backdrop-blur-sm font-semibold py-3 px-4 rounded-xl hover:bg-white/30 transition-colors",children:["Ver",e.jsx(E,{className:"w-4 h-4"})]})]}),t?.thisMonth&&t.thisMonth>0&&e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"flex items-center justify-center gap-2 mt-4 pt-3 border-t border-white/20",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[e.jsx("span",{className:"font-bold",children:t.thisMonth})," denÃºncias este mÃªs",t.resolvedThisMonth&&t.resolvedThisMonth>0&&e.jsxs("span",{className:"opacity-80",children:[" ","â€¢ ",t.resolvedThisMonth," resolvidas"]})]})]})]})]})})}const Z={reclamacao:{label:"ReclamaÃ§Ã£o",color:"text-red-700",bg:"bg-red-100"},sugestao:{label:"SugestÃ£o",color:"text-blue-700",bg:"bg-blue-100"},duvida:{label:"DÃºvida",color:"text-purple-700",bg:"bg-purple-100"},alerta:{label:"Alerta",color:"text-orange-700",bg:"bg-orange-100"},elogio:{label:"Elogio",color:"text-green-700",bg:"bg-green-100"},outros:{label:"Outros",color:"text-gray-700",bg:"bg-gray-100"}};function It({onNavigate:n}){const a=P(),{selectedBairro:t}=R(),{isAuthenticated:c}=W(),{toast:r}=pe(),[i,u]=g.useState("curtidos"),[o,d]=g.useState(!1),{data:f=[],isLoading:j}=_e(),m=Ge(),x=g.useCallback(l=>c?!0:(r({title:"Login necessÃ¡rio",description:`Para ${l}, vocÃª precisa estar logado.`,action:e.jsx(A,{variant:"outline",size:"sm",onClick:()=>window.location.href="/login",children:"Entrar"})}),!1),[c,r]),y=g.useMemo(()=>{let l=[...f];switch(i){case"curtidos":l=l.sort((p,w)=>w.likesCount-p.likesCount);break;case"recentes":l=l.sort((p,w)=>new Date(w.createdAt).getTime()-new Date(p.createdAt).getTime());break;case"perto":l=l.filter(p=>p.bairroId===t?.id);break}return l.slice(0,3)},[f,i,t]),h=f.length,N=f.reduce((l,p)=>l+p.commentsCount,0),b=(l,p)=>p.bairro?.nome?p.bairro.nome:xe.find(w=>w.id===l)?.nome||"Tijucas",k=l=>{x("curtir")&&(navigator.vibrate&&navigator.vibrate(10),m.mutate({id:l.id,currentlyLiked:l.liked??!1}))},L=async l=>{if(navigator.share)try{await navigator.share({title:l.titulo,text:l.texto,url:window.location.href})}catch{}else await navigator.clipboard.writeText(window.location.href),r({title:"Link copiado!"})};return e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"px-4 py-4",children:[e.jsxs(s.div,{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-primary/10 via-primary/5 to-transparent p-4 mb-4",whileHover:{scale:1.01},transition:{type:"spring",stiffness:300},children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx(s.div,{animate:{scale:[1,1.2,1],opacity:[.1,.2,.1]},transition:{duration:3,repeat:1/0},className:"absolute -top-10 -right-10 w-40 h-40 rounded-full bg-primary/20"}),e.jsx(s.div,{animate:{scale:[1.2,1,1.2],opacity:[.1,.15,.1]},transition:{duration:4,repeat:1/0,delay:.5},className:"absolute -bottom-10 -left-10 w-32 h-32 rounded-full bg-primary/15"})]}),e.jsxs("div",{className:"relative flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.div,{animate:{rotate:[0,-10,10,-5,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},className:"w-12 h-12 rounded-xl bg-primary/10 flex items-center justify-center",children:e.jsx(ee,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-bold text-foreground flex items-center gap-2",children:["Boca no Trombone",e.jsx(s.div,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0},children:e.jsx(G,{className:"w-4 h-4 text-yellow-500"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"A voz da comunidade"})]})]}),e.jsxs(A,{variant:"ghost",size:"sm",onClick:()=>n("forum"),className:"text-primary font-medium group",children:["Ver todos",e.jsx(E,{className:"w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]}),e.jsxs(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"relative flex items-center gap-4 mt-3 pt-3 border-t border-primary/10",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(Ye,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-foreground",children:h})," tÃ³picos"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(te,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[e.jsx("strong",{className:"text-foreground",children:N})," comentÃ¡rios"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-3 overflow-x-auto scrollbar-hide -mx-4 px-4",children:[{id:"curtidos",label:"Mais curtidos",icon:Ne},{id:"recentes",label:"Recentes",icon:O},{id:"perto",label:"Perto de mim",icon:S}].map(l=>{const p=l.icon,w=i===l.id;return e.jsxs(s.button,{whileTap:{scale:.95},whileHover:{y:-2},onClick:()=>u(l.id),className:`relative flex items-center gap-1.5 px-4 py-2 rounded-full whitespace-nowrap text-xs font-medium transition-all min-h-[36px] ${w?"bg-primary text-primary-foreground shadow-sm":"bg-muted text-muted-foreground hover:bg-muted-foreground/10"}`,children:[e.jsx(p,{className:"w-3.5 h-3.5"}),l.label,w&&e.jsx(s.div,{layoutId:"activeSort",className:"absolute inset-0 bg-primary rounded-full -z-10",transition:{type:"spring",stiffness:400,damping:30}})]},l.id)})}),e.jsxs(s.div,{className:"flex items-center justify-between mb-4 p-3 bg-muted/50 rounded-xl",whileHover:{backgroundColor:"hsl(var(--muted))"},children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm cursor-pointer",children:[e.jsx(Fe,{checked:o,onCheckedChange:d,className:"scale-90"}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"Postar anÃ´nimo"})]}),e.jsx(s.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:e.jsxs(A,{size:"sm",onClick:()=>a("/forum?novo=true"),className:"bg-primary text-primary-foreground text-xs h-9 px-4 shadow-sm",children:[e.jsx(ee,{className:"w-3.5 h-3.5 mr-1.5"}),"Abrir tÃ³pico"]})})]}),e.jsx(Ee,{children:e.jsx("div",{className:"space-y-3",children:e.jsx(B,{mode:"popLayout",children:y.map((l,p)=>e.jsx(s.div,{layout:!0,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:300,damping:25,delay:p*.05},whileHover:{y:-2,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},className:"bg-card rounded-2xl p-3 shadow-card border border-border/50 cursor-pointer",onClick:()=>n("forum"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[l.fotoUrl&&e.jsxs(s.div,{className:"relative w-16 h-16 rounded-xl overflow-hidden flex-shrink-0",whileHover:{scale:1.05},children:[e.jsx("img",{src:l.fotoUrl,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[e.jsx(me,{className:`${Z[l.categoria].bg} ${Z[l.categoria].color} text-[10px] px-1.5 py-0 border-0`,children:Z[l.categoria].label}),e.jsxs("span",{className:"text-[10px] text-muted-foreground flex items-center gap-0.5",children:[e.jsx(S,{className:"w-2.5 h-2.5"}),b(l.bairroId,l)]}),e.jsx("span",{className:"text-[10px] text-muted-foreground ml-auto",children:Ve(l.createdAt)})]}),e.jsx("h3",{className:"font-medium text-sm text-foreground line-clamp-2 mb-2",children:l.titulo}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(s.button,{whileTap:{scale:.85},onClick:w=>{w.stopPropagation(),k(l)},className:"flex items-center gap-1 text-xs",children:[e.jsx(s.div,{animate:l.liked?{scale:[1,1.4,1]}:{},transition:{duration:.3},children:e.jsx(X,{className:`w-4 h-4 ${l.liked?"fill-red-500 text-red-500":"text-muted-foreground"}`})}),e.jsx("span",{className:l.liked?"text-red-500 font-medium":"text-muted-foreground",children:l.likesCount})]}),e.jsxs("button",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:l.commentsCount})]}),e.jsx("button",{onClick:w=>{w.stopPropagation(),L(l)},className:"flex items-center gap-1 text-xs text-muted-foreground ml-auto hover:text-foreground transition-colors",children:e.jsx(Ke,{className:"w-4 h-4"})})]})]})]})},l.id))})})}),e.jsxs(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n("forum"),className:"w-full mt-4 py-3 text-sm font-medium text-primary bg-primary/5 hover:bg-primary/10 rounded-xl transition-colors flex items-center justify-center gap-2",children:["Ver mais tÃ³picos",e.jsx(E,{className:"w-4 h-4"})]})]})}const Dt=[{id:"agenda",label:"Agenda de Eventos",icon:C,color:"bg-secondary/10 text-secondary",route:"/agenda"},{id:"turismo",label:"Pontos TurÃ­sticos",icon:S,color:"bg-green-100 text-green-600",route:"/pontos-turisticos"},{id:"missas",label:"HorÃ¡rios das Missas",icon:Ze,color:"bg-primary/10 text-primary",route:"/missas"},{id:"telefones",label:"Telefones Ãšteis",icon:ge,color:"bg-accent/10 text-accent",route:"/telefones"},{id:"coleta",label:"Coleta de Lixo",icon:ve,color:"bg-emerald-100 text-emerald-600",route:"/coleta-lixo"},{id:"envios",label:"Fiscaliza Tijucas",icon:be,color:"bg-purple-100 text-purple-600",route:"/denuncias"}];function Mt({onNavigate:n}){const a=P(),t={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.05}}},c={hidden:{opacity:0,scale:.9},show:{opacity:1,scale:1,transition:{type:"spring",stiffness:300,damping:24}}},r=i=>{a(i.route)};return e.jsxs("div",{className:"px-4 py-4",children:[e.jsx("h2",{className:"text-lg font-bold text-foreground mb-3",children:"ServiÃ§os"}),e.jsx(s.div,{variants:t,initial:"hidden",animate:"show",className:"grid grid-cols-2 gap-3",children:Dt.map(i=>{const u=i.icon;return e.jsxs(s.button,{variants:c,whileTap:{scale:.95},onClick:()=>r(i),className:"bento-card flex items-center gap-3 text-left",children:[e.jsx("div",{className:`w-10 h-10 rounded-xl ${i.color} flex items-center justify-center flex-shrink-0`,children:e.jsx(u,{className:"w-5 h-5"})}),e.jsx("span",{className:"text-sm font-medium text-foreground leading-tight",children:i.label})]},i.id)})})]})}const At={obras:dt,interdicao:Q,evento:C,clima:lt},Et={obras:"from-orange-600 to-amber-500",interdicao:"from-red-600 to-rose-500",evento:"from-blue-600 to-sky-500",clima:"from-slate-600 to-slate-500"};function Pt({alerts:n,onDismiss:a,onTap:t}){const[c,r]=g.useState(0),[i,u]=g.useState(new Set),o=n.filter(h=>!i.has(h.id)),d=o[c%o.length];if(!d||o.length===0)return null;const f=At[d.tipo]||Qe,j=Et[d.tipo]||"from-gray-600 to-gray-500",m=h=>{h.stopPropagation(),v("light"),u(N=>new Set(N).add(d.id)),a?.(d.id)},x=()=>{v("selection"),t?.(d)},y=h=>{h.stopPropagation(),o.length>1&&r(N=>(N+1)%o.length)};return e.jsx(B,{mode:"wait",children:e.jsx(s.div,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{type:"spring",stiffness:300,damping:30},className:"sticky top-0 z-50",children:e.jsx(s.div,{role:"button",tabIndex:0,onClick:x,onKeyDown:h=>h.key==="Enter"&&x(),whileTap:{scale:.98},className:`w-full bg-gradient-to-r ${j} 
            p-3 shadow-lg text-white text-left cursor-pointer`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.div,{animate:{scale:[1,1.1,1],rotate:d.tipo==="interdicao"?[0,-5,5,0]:0},transition:{duration:1.5,repeat:1/0,repeatDelay:2},children:e.jsx(f,{className:"w-5 h-5 flex-shrink-0"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm truncate",children:d.titulo}),e.jsx("p",{className:"text-xs opacity-80 truncate",children:d.descricao})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[o.length>1&&e.jsxs(s.button,{onClick:y,whileTap:{scale:.9},className:"text-xs bg-white/20 px-2 py-0.5 rounded-full hover:bg-white/30 transition-colors",children:[c+1,"/",o.length]}),e.jsx(E,{className:"w-4 h-4 opacity-60"}),e.jsx(s.button,{onClick:m,whileTap:{scale:.8},className:"p-1 hover:bg-white/20 rounded-full transition-colors","aria-label":"Fechar alerta",children:e.jsx(fe,{className:"w-4 h-4"})})]})]})})},d.id)})}const re=["from-violet-500 via-purple-500 to-fuchsia-500","from-cyan-500 via-blue-500 to-indigo-500","from-rose-500 via-pink-500 to-orange-400","from-emerald-500 via-teal-500 to-cyan-500","from-amber-500 via-orange-500 to-red-500"];function Rt({onNavigate:n,onEventClick:a}){const t=g.useRef(null),{data:c,isLoading:r}=We({perPage:15,orderBy:"startDateTime",order:"asc"}),i=c?.data??[],u=g.useMemo(()=>{if(!i||i.length===0)return 0;const m=Je(new Date),x=et(se(m,7));return i.filter(y=>{try{const h=U(y.startDateTime);return tt(h,{start:m,end:x})}catch{return!1}}).length},[i]),o=g.useMemo(()=>{if(!i||i.length===0)return 0;const m=new Date().toDateString();return i.filter(x=>{try{return U(x.startDateTime).toDateString()===m}catch{return!1}}).length},[i]),d=m=>{try{const x=U(m),y=new Date,h=se(y,1);return x.toDateString()===y.toDateString()?"Hoje":x.toDateString()===h.toDateString()?"AmanhÃ£":x.toLocaleDateString("pt-BR",{weekday:"short",day:"numeric"})}catch{return"Em breve"}},f=m=>{try{return U(m).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})}catch{return"--:--"}},j=m=>{v("selection"),a?.(m)};return r?e.jsxs("div",{className:"py-5",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 mb-4",children:[e.jsx("div",{className:"h-7 w-44 skeleton-shimmer rounded-lg"}),e.jsx("div",{className:"h-5 w-20 skeleton-shimmer rounded-lg"})]}),e.jsxs("div",{className:"flex gap-3 px-4 overflow-hidden",children:[e.jsx(ae,{}),e.jsx(ae,{})]})]}):i.length===0?e.jsx("div",{className:"py-5 px-4",children:e.jsxs("div",{className:"rounded-2xl border-2 border-dashed border-muted-foreground/20 bg-muted/50 p-6 text-center",children:[e.jsx(C,{className:"w-10 h-10 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("h3",{className:"font-semibold text-muted-foreground",children:"Nenhum evento prÃ³ximo"}),e.jsx("p",{className:"text-sm text-muted-foreground/70 mt-1",children:"Confira a agenda completa para ver todos os eventos"}),e.jsx(s.button,{whileTap:{scale:.97},onClick:()=>n("agenda"),className:"mt-4 px-5 py-2.5 bg-primary text-primary-foreground rounded-full text-sm font-medium",children:"Ver Agenda"})]})}):e.jsxs("div",{className:"py-5",children:[e.jsxs("div",{className:"px-4 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-primary to-primary/70 flex items-center justify-center shadow-lg shadow-primary/30",children:e.jsx(G,{className:"w-5 h-5 text-white"})}),o>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-rose-500 rounded-full text-[10px] font-bold text-white flex items-center justify-center shadow-sm",children:o})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-foreground",children:"PrÃ³ximos Eventos"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-semibold text-primary",children:u})," eventos nesta semana"]})]})]}),e.jsxs(s.button,{whileTap:{scale:.95},onClick:()=>{v("light"),n("agenda")},className:"flex items-center gap-1.5 px-3.5 py-2 bg-muted hover:bg-muted/80 rounded-full text-sm font-medium text-foreground transition-colors",children:["Ver todos",e.jsx(E,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-3 overflow-x-auto scrollbar-hide pb-1",children:[e.jsxs(s.button,{whileTap:{scale:.95},className:D("flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium shrink-0",o>0?"bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400":"bg-muted text-muted-foreground"),children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-rose-500"}),"Hoje: ",o]}),e.jsxs(s.div,{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-primary/10 text-primary shrink-0",children:[e.jsx(C,{className:"w-3 h-3"}),"Semana: ",u]}),e.jsxs(s.div,{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-emerald-100 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 shrink-0",children:[e.jsx(Xe,{className:"w-3 h-3"}),"Gratuitos: ",i.filter(m=>m.ticket?.type==="free").length]})]})]}),e.jsx("div",{ref:t,className:"overflow-x-auto scrollbar-hide",children:e.jsxs(s.div,{className:"flex gap-3 px-4 pb-2",drag:"x",dragConstraints:t,dragElastic:.1,onDragStart:()=>v("selection"),children:[i.slice(0,10).map((m,x)=>e.jsxs(s.button,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},transition:{delay:x*.06,type:"spring",stiffness:200},whileTap:{scale:.97},onClick:()=>j(m.id),className:D("flex-shrink-0 w-72 h-36 rounded-2xl p-4 text-white text-left overflow-hidden relative group","bg-gradient-to-br shadow-lg",re[x%re.length]),children:[e.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"absolute inset-0 overflow-hidden opacity-20",children:[e.jsx("div",{className:"absolute -top-6 -right-6 w-28 h-28 rounded-full bg-white/30 blur-xl"}),e.jsx("div",{className:"absolute -bottom-10 -left-10 w-36 h-36 rounded-full bg-white/20 blur-2xl"})]}),m.ticket?.type==="free"&&e.jsx("div",{className:"absolute top-3 right-3 px-2 py-0.5 bg-white/25 backdrop-blur-sm rounded-full text-[10px] font-bold uppercase tracking-wide",children:"GrÃ¡tis"}),e.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs opacity-90",children:[e.jsx(C,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"font-medium",children:d(m.startDateTime)}),e.jsx("span",{className:"opacity-60",children:"â€¢"}),e.jsx(O,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:f(m.startDateTime)})]}),e.jsx("h3",{className:"font-bold mt-2 line-clamp-2 leading-snug text-[15px]",children:m.title})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs opacity-80",children:[e.jsx(S,{className:"w-3.5 h-3.5 shrink-0"}),e.jsxs("span",{className:"truncate",children:[m.venue?.name??"Tijucas",m.venue?.bairro?.nome&&` â€¢ ${m.venue.bairro.nome}`]})]})]})]},m.id)),e.jsxs(s.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:i.length*.06},whileTap:{scale:.97},onClick:()=>{v("light"),n("agenda")},className:D("flex-shrink-0 w-36 h-36 rounded-2xl","bg-gradient-to-br from-muted/80 to-muted border-2 border-dashed border-primary/30","flex flex-col items-center justify-center gap-3","text-primary hover:border-primary/50 transition-colors"),children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-sm font-semibold",children:"Ver agenda"})]})]})})]})}function Bt({onNavigate:n}){const a=P(),{featuredSpots:t,isLoading:c,likeSpot:r}=st(),[i,u]=g.useState(0),[o,d]=g.useState(!1),f=g.useRef(null);g.useEffect(()=>{if(!(o||t.length<=1))return f.current=setInterval(()=>{u(b=>(b+1)%t.length)},4e3),()=>{f.current&&clearInterval(f.current)}},[o,t.length]);const j=g.useCallback((b,k)=>{k.offset.x<-50?(u(l=>(l+1)%t.length),v("light")):k.offset.x>50&&(u(l=>(l-1+t.length)%t.length),v("light"))},[t.length]),m=g.useCallback(b=>{v("selection"),a(`/ponto-turistico/${b}`)},[a]),x=g.useCallback((b,k)=>{b.stopPropagation(),v("medium"),r(k)},[r]),y=g.useCallback(()=>{v("selection"),a("/pontos-turisticos")},[a]);if(c)return e.jsxs("div",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"h-6 w-40 skeleton-shimmer rounded"}),e.jsx("div",{className:"h-5 w-20 skeleton-shimmer rounded"})]}),e.jsx("div",{className:"h-48 skeleton-shimmer rounded-2xl"})]});if(!t||t.length===0)return null;const h=t[i],N=at[h.categoria];return e.jsxs("div",{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 mb-3",children:[e.jsxs("h2",{className:"text-lg font-bold text-foreground flex items-center gap-2",children:[e.jsx(s.div,{animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0,repeatDelay:2},children:e.jsx(we,{className:"w-5 h-5 text-primary"})}),"Descubra Tijucas"]}),e.jsxs(s.button,{whileTap:{scale:.95},onClick:y,className:"flex items-center gap-1 text-sm text-primary font-medium",children:["Ver todos ",e.jsx(E,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"px-4",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[e.jsx(s.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:.2,onDragEnd:j,className:"relative h-52 rounded-2xl overflow-hidden shadow-xl cursor-grab active:cursor-grabbing",children:e.jsx(B,{mode:"wait",children:e.jsxs(s.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},className:"absolute inset-0",onClick:()=>m(h.id),children:[h.imageUrl?e.jsx("img",{src:h.imageUrl,alt:h.titulo,className:"absolute inset-0 w-full h-full object-cover"}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary to-secondary"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/30 to-transparent"}),e.jsx(s.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"absolute top-3 left-3",children:e.jsxs("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium bg-white/90 text-foreground backdrop-blur-sm flex items-center gap-1",children:[e.jsx("span",{children:N?.icon||"ðŸ“"}),N?.label||h.categoria]})}),e.jsx(s.button,{whileTap:{scale:.8},onClick:b=>x(b,h.id),className:D("absolute top-3 right-3 w-10 h-10 rounded-full flex items-center justify-center bg-white/90 backdrop-blur-sm shadow-lg",h.liked&&"bg-red-500"),children:e.jsx(X,{className:D("w-5 h-5 transition-all",h.liked?"fill-white text-white":"text-foreground")})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[h.rating>0&&e.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-0.5 px-2 py-0.5 rounded-full bg-amber-500 text-white",children:[e.jsx(rt,{className:"w-3 h-3 fill-current"}),e.jsx("span",{className:"text-xs font-bold",children:h.rating.toFixed(1)})]}),e.jsxs("span",{className:"text-xs text-white/80",children:["(",h.reviewsCount," avaliaÃ§Ãµes)"]})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-1",children:h.titulo}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-white/80",children:[e.jsx(S,{className:"w-3 h-3"}),h.bairroNome||h.endereco?.split(",")[0]]}),e.jsxs(s.button,{whileTap:{scale:.95},className:"flex items-center gap-1.5 px-4 py-2 rounded-full bg-white text-foreground text-sm font-semibold mt-3",onClick:b=>{b.stopPropagation(),m(h.id)},children:[e.jsx(G,{className:"w-4 h-4"})," Explorar"]})]})]},h.id)})}),e.jsx("div",{className:"flex justify-center gap-1.5 mt-3",children:t.map((b,k)=>e.jsx(s.button,{onClick:()=>{u(k),v("light")},className:D("rounded-full transition-all duration-300",k===i?"w-6 h-2 bg-primary":"w-2 h-2 bg-muted-foreground/30"),whileTap:{scale:.9}},k))})]})]})}function Ot(){const{shouldShowBanner:n,canInstallNative:a,isIOSSafari:t,promptInstall:c,dismiss:r,showIOSTutorial:i,hideIOSTutorial:u,isIOSTutorialVisible:o,isInstalled:d}=it(),f=async()=>{await c()||r("later_24h")},j=m=>{m.stopPropagation(),r("later_7d")};return d||!n?e.jsx(ie,{isOpen:o,onClose:u}):e.jsxs(e.Fragment,{children:[e.jsx(B,{children:e.jsxs(s.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-primary via-primary to-primary/80 p-4 shadow-lg",children:[e.jsx("div",{className:"absolute -right-6 -top-6 w-24 h-24 rounded-full bg-white/10"}),e.jsx("div",{className:"absolute -left-3 -bottom-3 w-16 h-16 rounded-full bg-white/5"}),e.jsx("button",{onClick:j,className:"absolute right-2 top-2 p-1.5 hover:bg-white/20 rounded-full transition-colors z-10","aria-label":"Fechar",children:e.jsx(fe,{className:"h-4 w-4 text-white/80"})}),e.jsxs("div",{className:"relative flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 bg-white/20 rounded-xl backdrop-blur-sm shrink-0",children:e.jsx(Te,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("h3",{className:"font-bold text-white text-base",children:"Instalar app"}),e.jsx(G,{className:"h-4 w-4 text-yellow-300"})]}),e.jsx("p",{className:"text-sm text-white/80 mt-0.5",children:"Acesso rÃ¡pido e funciona offline"})]}),t?e.jsxs(A,{onClick:i,size:"sm",variant:"secondary",className:"bg-white text-primary hover:bg-white/90 shrink-0 font-medium",children:[e.jsx(ke,{className:"h-4 w-4 mr-1.5"}),"Como"]}):a?e.jsxs(A,{onClick:f,size:"sm",variant:"secondary",className:"bg-white text-primary hover:bg-white/90 shrink-0 font-medium",children:[e.jsx(nt,{className:"h-4 w-4 mr-1.5"}),"Instalar"]}):null]})]})}),e.jsx(ie,{isOpen:o,onClose:u})]})}function ie({isOpen:n,onClose:a}){const t=[{icon:e.jsx(ke,{className:"h-6 w-6"}),title:"Toque em Compartilhar",description:"Na barra do Safari (quadrado com seta)"},{icon:e.jsx(ot,{className:"h-6 w-6"}),title:"Adicionar Ã  Tela de InÃ­cio",description:"Role e toque nessa opÃ§Ã£o"},{icon:e.jsx(ye,{className:"h-6 w-6"}),title:'Confirme tocando em "Adicionar"',description:"Pronto! O app aparecerÃ¡ na tela inicial"}];return e.jsx(oe,{open:n,onOpenChange:c=>!c&&a(),children:e.jsxs(le,{side:"bottom",className:"rounded-t-3xl pb-8",children:[e.jsx(ce,{className:"pb-4",children:e.jsxs(de,{className:"flex items-center gap-2 justify-center",children:[e.jsx(Te,{className:"h-5 w-5 text-primary"}),"Instalar eTijucas"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Siga os passos abaixo para adicionar o app:"}),e.jsx("div",{className:"space-y-3",children:t.map((c,r)=>e.jsxs(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:r*.1},className:"flex items-start gap-3 p-3 bg-muted/50 rounded-xl",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary shrink-0 font-semibold",children:r+1}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-primary",children:c.icon}),e.jsx("span",{className:"font-medium text-sm",children:c.title})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:c.description})]})]},r))}),e.jsx(A,{onClick:a,className:"w-full mt-4",children:"Entendi"})]})]})})}const F=80,V=120,ne=.4;function Ss({scrollRef:n,onNavigate:a}){const t=g.useRef(null),c=g.useRef(0),{isRefreshing:r,setIsRefreshing:i}=R(),{toast:u}=pe(),[o,d]=g.useState(!1),[f,j]=g.useState(!1),m=he,x=Pe(0,{stiffness:400,damping:40,mass:.5}),y=M(x,p=>p<=0?0:V*(1-Math.exp(-p/V*ne*5))),h=M(x,[0,F],[0,180]),N=M(x,p=>p>=F?1.2:1),b=g.useCallback(async()=>{i(!0),v("success"),await new Promise(p=>setTimeout(p,1500)),i(!1),j(!1),u({title:"Atualizado agora",description:"ConteÃºdo atualizado com sucesso!"})},[i,u]),k=g.useCallback(p=>{t.current?.scrollTop===0&&!r&&(c.current=p.touches[0].clientY,d(!0),j(!1))},[r]),L=g.useCallback(p=>{if(!o||r)return;if(t.current&&t.current.scrollTop>0){d(!1),x.set(0);return}const Y=p.touches[0].clientY-c.current;if(Y>0){const J=Y*Math.pow(ne,Y/V);x.set(Math.min(J,V*1.5)),J>=F&&!f&&(v("medium"),j(!0))}},[o,r,x,f]),l=g.useCallback(()=>{if(!o)return;x.get()>=F&&!r?(x.set(60),b()):x.set(0),d(!1)},[o,x,r,b]);return _.useEffect(()=>{r||x.set(0)},[r,x]),e.jsxs("div",{ref:p=>{t&&(t.current=p),n(p)},className:"h-full overflow-y-auto overflow-x-hidden scrollbar-hide",onTouchStart:k,onTouchMove:L,onTouchEnd:l,children:[e.jsx(Pt,{alerts:m,onTap:p=>{v("selection")}}),e.jsx(B,{children:(x.get()>0||r)&&e.jsxs(s.div,{style:{height:r?60:y},className:"flex items-center justify-center bg-gradient-to-b from-primary/10 to-transparent overflow-hidden",children:[e.jsx(s.div,{style:{rotate:r?void 0:h,scale:N},animate:r?{rotate:360}:void 0,transition:r?{repeat:1/0,duration:1,ease:"linear"}:void 0,className:"flex items-center justify-center",children:e.jsx(Me,{className:`w-6 h-6 transition-colors ${f||r?"text-primary":"text-muted-foreground"}`})}),f&&!r&&e.jsx(s.span,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"absolute mt-10 text-xs text-primary font-medium",children:"Solte para atualizar"})]})}),e.jsx(gt,{scrollRef:t,todayEventsCount:0,hasActiveAlert:m.length>0,streakDays:3}),e.jsxs("div",{className:"pb-24",children:[e.jsx(bt,{onNavigate:a}),e.jsx("div",{className:"px-4 pb-2",children:e.jsx(Ot,{})}),e.jsx(kt,{onNavigate:a}),e.jsx(Rt,{onNavigate:a}),e.jsx(Bt,{onNavigate:a}),e.jsx(St,{onNavigate:a}),e.jsx(It,{onNavigate:a}),e.jsx(Mt,{onNavigate:a})]})]})}export{Ss as default};
