import{a0 as ve,r as d,j as e,a1 as se,a2 as ae,a3 as te}from"./vendor-radix-E4gGnxjO.js";import{d as u,M as V,l as Ne,o as ye,u as we,m as ke}from"./index-BSTgcX-N.js";import{B as g}from"./badge-C76PU-ep.js";import{B as j}from"./button-WIEOpYI-.js";import{I}from"./input-BxohVy9Z.js";import{S as Q}from"./skeleton-Ds4a7r_m.js";import{S as B}from"./separator-B3zwVnCZ.js";import{S as re,a as Ce}from"./scroll-area-DxaAbH0D.js";import{C as W}from"./card-C8veluk1.js";import{a as Se,e as Te,A as De,b as T,c as D,d as R,u as Re,i as K,g as Ee,h as O,f as Pe,j as Ae,k as Me,l as Oe}from"./useEventFilters-BF30O61k.js";import{m as f,A as Fe}from"./vendor-motion-R11C44Ho.js";import{H as Y}from"./heart-ByjiOKiO.js";import{C as J}from"./clock-BUAXYXQP.js";import{U as $e}from"./users-D9rhPDFg.js";import{S as Be}from"./share-2-DCTrv385.js";import{T as Ie}from"./useEventsApi-DD3V3-5x.js";import{D as Le,a as ze,b as He,c as Ge,d as _e}from"./drawer-CEHEQKeo.js";import{S as Ue}from"./slider-XXuFTQ79.js";import{l as qe,m as Ve,n as Qe,o as We,q as Ke,f as X,k as Ye,r as Je}from"./vendor-utils-zfZBtJeF.js";import{B as Xe}from"./bell-CEnfzlmF.js";import{S as Ze}from"./search-BwNWK0EF.js";import{F as es}from"./filter-BQXudgiX.js";import{C as ss}from"./chevron-left-Uu1eq4XE.js";import{p as as}from"./pt-BR-G2JzEZM7.js";import"./vendor-query-CeEprVe-.js";import"./chevron-down-DFgiFmiE.js";const ts=ve,ie=d.forwardRef(({className:r,...i},h)=>e.jsx(se,{ref:h,className:u("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...i}));ie.displayName=se.displayName;const _=d.forwardRef(({className:r,...i},h)=>e.jsx(ae,{ref:h,className:u("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",r),...i}));_.displayName=ae.displayName;const U=d.forwardRef(({className:r,...i},h)=>e.jsx(te,{ref:h,className:u("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...i}));U.displayName=te.displayName;const Z={show:"bg-purple-500/10 text-purple-600 border-purple-200",festa:"bg-pink-500/10 text-pink-600 border-pink-200",cultura:"bg-amber-500/10 text-amber-600 border-amber-200",infantil:"bg-green-500/10 text-green-600 border-green-200",gastronomico:"bg-orange-500/10 text-orange-600 border-orange-200",esportes:"bg-blue-500/10 text-blue-600 border-blue-200"};function ee({event:r,isFavorite:i,onToggleFavorite:h,onOpen:C,variant:o="default"}){const p=r.ticket?.type==="free",E=p?"Grátis":`R$ ${r.ticket?.minPrice??0}`,P=Se(r.start,r.end),l=typeof r.category=="string"?r.category:r.category?.slug??"show",m=typeof r.category=="string"?r.category:r.category?.name??"Evento",N=r.venue?.bairro?.nome??"Tijucas",A=async v=>{v.stopPropagation();const y={title:r.title,text:`${r.title} • ${r.venue?.name??"Evento em Tijucas"}`,url:`${window.location.origin}/agenda/${r.id}`};if(navigator.share){try{await navigator.share(y)}catch{}return}if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(y.url)}catch{}},F=v=>{v.stopPropagation();const y=r.venue?.coordinates,a=y?`${y.latitude},${y.longitude}`:`${r.venue?.name??"Tijucas"}, ${N}, Tijucas - SC`;window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a)}`,"_blank")},S=v=>{v.stopPropagation(),r.ticket?.purchaseUrl&&window.open(r.ticket.purchaseUrl,"_blank")},w=v=>{v.stopPropagation(),h(r.id)};return o==="compact"?e.jsx(f.div,{whileTap:{scale:.96},onClick:()=>C(r.id),className:"cursor-pointer min-w-[280px] snap-start",children:e.jsxs(W,{className:"relative overflow-hidden rounded-2xl border-border/60 bg-card shadow-card h-full",children:[e.jsxs("div",{className:"relative h-36",children:[e.jsx("img",{src:r.coverImage??"/placeholder.svg",alt:r.title,className:"h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx(f.button,{whileTap:{scale:.8},onClick:w,className:u("absolute top-2 right-2 h-8 w-8 rounded-full flex items-center justify-center","bg-black/40 backdrop-blur-sm",i?"text-red-400":"text-white"),children:e.jsx(Y,{className:u("h-4 w-4",i&&"fill-current")})}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:e.jsx(g,{className:u("text-xs",Z[l]),children:m})})]}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 leading-tight",children:r.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx("span",{children:P})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:N}),e.jsx(g,{variant:"outline",className:"text-xs",children:E})]})]})]})}):e.jsx(f.div,{whileTap:{scale:.98},whileHover:{scale:1.01},transition:{type:"spring",stiffness:400,damping:25},onClick:()=>C(r.id),className:"cursor-pointer",children:e.jsx(W,{className:"relative overflow-hidden rounded-2xl border-border/60 bg-card shadow-card group",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"relative w-28 h-32 shrink-0",children:[e.jsx("img",{src:r.coverImage??"/placeholder.svg",alt:r.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent to-black/10"}),e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsx(g,{className:u("text-xs font-bold",p?"bg-green-500/90 text-white":"bg-black/70 text-white"),children:E})})]}),e.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-between min-h-[128px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(g,{variant:"secondary",className:u("text-xs mb-1.5",Z[l]),children:m}),e.jsx(f.button,{whileTap:{scale:.75},animate:{scale:i?[1,1.2,1]:1},className:u("flex h-8 w-8 items-center justify-center rounded-full -mt-1 -mr-1","transition-colors",i?"text-red-500":"text-muted-foreground hover:text-red-400"),onClick:w,children:e.jsx(Y,{className:u("h-4 w-4",i&&"fill-current")})})]}),e.jsx("h3",{className:"font-semibold text-sm leading-tight line-clamp-2",children:r.title})]}),e.jsxs("div",{className:"space-y-1.5 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(J,{className:"h-3 w-3 text-primary"}),e.jsx("span",{className:"font-medium",children:P})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(V,{className:"h-3 w-3 text-primary"}),e.jsxs("span",{className:"truncate",children:[r.venue?.name??"Local"," • ",N]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx($e,{className:"h-3 w-3"}),e.jsxs("span",{children:[r.popularityScore,"+ interessados"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full",onClick:F,children:e.jsx(V,{className:"h-3.5 w-3.5"})}),e.jsx(j,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full",onClick:A,children:e.jsx(Be,{className:"h-3.5 w-3.5"})}),r.ticket?.purchaseUrl&&e.jsx(j,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full text-primary",onClick:S,children:e.jsx(Ie,{className:"h-3.5 w-3.5"})})]})]})]})]})})})}const rs=[{id:"today",label:"Hoje"},{id:"tomorrow",label:"Amanhã"},{id:"weekend",label:"Fim de semana"},{id:"range",label:"Intervalo"}],is=[{id:"morning",label:"Manhã"},{id:"afternoon",label:"Tarde"},{id:"night",label:"Noite"}];function ns({open:r,onOpenChange:i,filters:h,applyFilters:C,allEvents:o,availableNeighborhoods:p,availableVenues:E,availableCategories:P}){const[l,m]=d.useState(h),[N,A]=d.useState("");d.useEffect(()=>{r&&m(h)},[r,h]);const F=d.useMemo(()=>Te(o,l).length,[o,l]),S=d.useMemo(()=>{const a=N.toLowerCase();return p.filter(c=>c.toLowerCase().includes(a))},[p,N]),w=(a,c)=>{m(M=>{const b=M[a];return{...M,[a]:b.includes(c)?b.filter($=>$!==c):[...b,c]}})},v=()=>{m({...h,search:"",datePreset:"all",dateRange:{start:null,end:null},categories:[],neighborhoods:[],venues:[],price:"all",priceRange:[0,150],timeOfDay:[],accessibility:!1,parking:!1,kids:!1,outdoor:!1,sortBy:"upcoming"})},y=()=>{C(l),i(!1)};return e.jsx(Le,{open:r,onOpenChange:i,children:e.jsxs(ze,{className:"max-h-[85vh]",children:[e.jsx(He,{children:e.jsx(Ge,{children:"Filtrar eventos"})}),e.jsxs(re,{className:"h-full px-4 pb-4",children:[e.jsxs(De,{type:"multiple",className:"space-y-3",children:[e.jsxs(T,{value:"dates",children:[e.jsx(D,{children:"Datas"}),e.jsxs(R,{children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:rs.map(a=>e.jsx(g,{variant:l.datePreset===a.id?"default":"outline",className:"cursor-pointer",onClick:()=>m(c=>({...c,datePreset:c.datePreset===a.id?"all":a.id})),children:a.label},a.id))}),l.datePreset==="range"&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[e.jsx(I,{type:"date",value:l.dateRange.start??"",onChange:a=>m(c=>({...c,dateRange:{...c.dateRange,start:a.target.value}}))}),e.jsx(I,{type:"date",value:l.dateRange.end??"",onChange:a=>m(c=>({...c,dateRange:{...c.dateRange,end:a.target.value}}))})]})]})]}),e.jsxs(T,{value:"category",children:[e.jsx(D,{children:"Categoria"}),e.jsx(R,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(a=>{const c=typeof a=="string"?a:a.slug,M=typeof a=="string"?a:a.name;return e.jsx(g,{variant:l.categories.includes(c)?"default":"outline",className:"cursor-pointer",onClick:()=>w("categories",c),children:M},c)})})})]}),e.jsxs(T,{value:"neighborhood",children:[e.jsx(D,{children:"Bairro"}),e.jsxs(R,{children:[e.jsx(I,{placeholder:"Buscar bairro...",value:N,onChange:a=>A(a.target.value)}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:S.map(a=>e.jsx(g,{variant:l.neighborhoods.includes(a)?"default":"outline",className:"cursor-pointer",onClick:()=>w("neighborhoods",a),children:a},a))})]})]}),e.jsxs(T,{value:"venues",children:[e.jsx(D,{children:"Locais"}),e.jsx(R,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(a=>e.jsx(g,{variant:l.venues.includes(a)?"default":"outline",className:"cursor-pointer",onClick:()=>w("venues",a),children:a},a))})})]}),e.jsxs(T,{value:"price",children:[e.jsx(D,{children:"Preço"}),e.jsxs(R,{children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","free","paid"].map(a=>e.jsx(g,{variant:l.price===a?"default":"outline",className:"cursor-pointer capitalize",onClick:()=>m(c=>({...c,price:a})),children:a==="all"?"Todos":a==="free"?"Grátis":"Pago"},a))}),l.price==="paid"&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx(Ue,{value:l.priceRange,min:0,max:150,step:5,onValueChange:a=>m(c=>({...c,priceRange:a}))}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["R$ ",l.priceRange[0]]}),e.jsxs("span",{children:["R$ ",l.priceRange[1]]})]})]})]})]}),e.jsxs(T,{value:"time",children:[e.jsx(D,{children:"Horário"}),e.jsx(R,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:is.map(a=>e.jsx(g,{variant:l.timeOfDay.includes(a.id)?"default":"outline",className:"cursor-pointer",onClick:()=>w("timeOfDay",a.id),children:a.label},a.id))})})]}),e.jsxs(T,{value:"accessibility",children:[e.jsx(D,{children:"Acessibilidade"}),e.jsx(R,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(g,{variant:l.accessibility?"default":"outline",className:"cursor-pointer",onClick:()=>m(a=>({...a,accessibility:!a.accessibility})),children:"Acessível"}),e.jsx(g,{variant:l.parking?"default":"outline",className:"cursor-pointer",onClick:()=>m(a=>({...a,parking:!a.parking})),children:"Estacionamento"}),e.jsx(g,{variant:l.kids?"default":"outline",className:"cursor-pointer",onClick:()=>m(a=>({...a,kids:!a.kids})),children:"Kids"}),e.jsx(g,{variant:l.outdoor?"default":"outline",className:"cursor-pointer",onClick:()=>m(a=>({...a,outdoor:!a.outdoor})),children:"Ao ar livre"})]})})]})]}),e.jsx(B,{className:"my-4"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[F," resultados encontrados"]})]}),e.jsxs(_e,{className:"border-t",children:[e.jsxs(j,{onClick:y,children:["Aplicar (",F,")"]}),e.jsx(j,{variant:"outline",onClick:v,children:"Limpar filtros"})]})]})})}function ls({scrollRef:r}){const{allEvents:i,filteredEvents:h,groupedEvents:C,filters:o,setFilters:p,availableNeighborhoods:E,availableVenues:P,availableCategories:l,favorites:m,toggleFavorite:N,isLoading:A}=Re(),{setActiveTab:F}=Ne();ye();const S=we(),[w,v]=d.useState("list"),[y,a]=d.useState(!1),[c,M]=d.useState(0),[b,$]=d.useState(new Date),q=d.useRef(null);d.useEffect(()=>{const s=setInterval(()=>{M(t=>(t+1)%3)},6e3);return()=>clearInterval(s)},[]);const L=d.useMemo(()=>{if(!i||i.length===0)return[{id:"today",label:"Hoje",caption:"Descubra os eventos de hoje",event:null},{id:"weekend",label:"Fim de Semana",caption:"Planeje o seu fim de semana",event:null},{id:"free",label:"Grátis",caption:"Curta eventos gratuitos",event:null}];const s=i.filter(x=>K(x.start)),t=i.filter(x=>Ee(x.start)),n=i.filter(x=>x.ticket?.type==="free");return[{id:"today",label:"Hoje",caption:s[0]?.title??"Descubra os eventos de hoje",event:s[0]??i[0]??null},{id:"weekend",label:"Fim de Semana",caption:t[0]?.title??"Planeje o seu fim de semana",event:t[0]??i[1]??i[0]??null},{id:"free",label:"Grátis",caption:n[0]?.title??"Curta eventos gratuitos",event:n[0]??i[2]??i[0]??null}]},[i]),k=L[c]??L[0],ne=d.useMemo(()=>{let s=0;return o.search.trim()&&s++,o.datePreset!=="all"&&s++,o.categories.length>0&&s++,o.neighborhoods.length>0&&s++,o.venues.length>0&&s++,o.price!=="all"&&s++,o.timeOfDay.length>0&&s++,(o.accessibility||o.parking||o.kids||o.outdoor)&&s++,s},[o]),le=d.useMemo(()=>Object.keys(C).sort(),[C]),oe=d.useMemo(()=>{if(!i||i.length===0)return[];const s=new Map;return i.forEach(t=>{const n=t.venue?.bairro?.nome;n&&s.set(n,(s.get(n)??0)+1)}),Array.from(s.entries()).sort((t,n)=>n[1]-t[1]).slice(0,6).map(([t])=>t)},[i]),z=d.useMemo(()=>{const s={};return h.forEach(t=>{const n=O(t.start);s[n]||(s[n]=[]),s[n].push(t)}),s},[h]),ce=s=>{p(t=>({...t,search:s}))},de=()=>{k?.event&&S(`/agenda/${k.event.id}`)},me=s=>{p(t=>{const n=t.categories.includes(s);return{...t,categories:n?t.categories.filter(x=>x!==s):[...t.categories,s]}})},xe=s=>{p(t=>{const n=t.neighborhoods.includes(s);return{...t,neighborhoods:n?t.neighborhoods.filter(x=>x!==s):[...t.neighborhoods,s]}})},ue=s=>{p(t=>({...t,datePreset:t.datePreset===s?"all":s}))},he=s=>{p(t=>({...t,price:t.price===s?"all":s}))},H=qe(b),ge=Ve(b),pe=Qe(H,{weekStartsOn:0}),fe=We(ge,{weekStartsOn:0}),je=Ke({start:pe,end:fe});return e.jsxs("div",{ref:r,className:"h-full min-h-screen overflow-y-auto bg-background pb-32",children:[e.jsx("div",{className:"sticky top-0 z-30 border-b bg-background/80 backdrop-blur-md safe-top",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Agenda"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Eventos, shows e festas"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"ghost",size:"icon",className:"h-9 w-9",children:e.jsx(Xe,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>q.current?.focus(),children:e.jsx(Ze,{className:"h-4 w-4"})}),e.jsxs(j,{variant:"ghost",size:"icon",className:"relative h-9 w-9",onClick:()=>a(!0),children:[e.jsx(es,{className:"h-4 w-4"}),ne>0&&e.jsx("span",{className:"absolute right-2 top-2 h-2 w-2 rounded-full bg-primary"})]})]})]})}),e.jsxs("div",{className:"px-4 pt-4 space-y-6",children:[A?e.jsx(Q,{className:"h-44 w-full rounded-3xl"}):e.jsxs("div",{className:"relative overflow-hidden rounded-3xl border bg-card/90 shadow-elevated",children:[e.jsx(Fe,{mode:"wait",children:e.jsxs(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.6},className:"relative",children:[e.jsx(f.img,{src:k?.event?.coverImage??"/placeholder.svg",alt:k?.event?.title??"Destaque",className:"h-44 w-full object-cover",initial:{scale:1.05},animate:{scale:1},transition:{duration:.8}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/70 via-black/40 to-transparent"}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between p-5",children:[e.jsxs("div",{className:"text-white",children:[e.jsx(g,{className:"bg-white/20 text-white",children:k?.label}),e.jsx("h2",{className:"mt-2 text-xl font-bold",children:k?.caption}),e.jsx("p",{className:"text-xs text-white/80",children:k?.event?Pe(k.event.start):"Confira a programação"})]}),e.jsx(j,{onClick:de,className:"rounded-full",children:"Ver"})]})]},k?.id)}),e.jsx("div",{className:"absolute bottom-3 left-1/2 flex -translate-x-1/2 gap-2",children:L.map((s,t)=>e.jsx("span",{className:u("h-2 w-2 rounded-full transition-all",t===c?"bg-white":"bg-white/40")},s.id))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(I,{ref:q,placeholder:"Buscar evento, local, bairro...",value:o.search,onChange:s=>ce(s.target.value)}),e.jsxs(re,{className:"w-full whitespace-nowrap",children:[e.jsxs("div",{className:"flex w-max gap-2 pb-2",children:[["Hoje","Amanhã","Fim de semana"].map(s=>{const t=s==="Hoje"?"today":s==="Amanhã"?"tomorrow":"weekend",n=o.datePreset===t;return e.jsx(f.button,{whileTap:{scale:.92},className:u("rounded-full border px-4 py-2 text-xs font-medium",n?"bg-primary text-primary-foreground border-primary":"bg-card"),onClick:()=>ue(t),children:s},s)}),e.jsx(B,{orientation:"vertical",className:"h-7"}),["Grátis","Pago"].map(s=>{const t=s==="Grátis"?"free":"paid",n=o.price===t;return e.jsx(f.button,{whileTap:{scale:.92},className:u("rounded-full border px-4 py-2 text-xs font-medium",n?"bg-secondary text-secondary-foreground border-secondary":"bg-card"),onClick:()=>he(t),children:s},s)}),e.jsx(B,{orientation:"vertical",className:"h-7"}),l.map(s=>{const t=typeof s=="string"?s:s.slug,n=typeof s=="string"?s:s.name,x=o.categories.includes(t);return e.jsx(f.button,{whileTap:{scale:.92},className:u("rounded-full border px-4 py-2 text-xs font-medium",x?"bg-accent text-accent-foreground border-accent":"bg-card"),onClick:()=>me(t),children:n},t)}),e.jsx(B,{orientation:"vertical",className:"h-7"}),oe.map(s=>{const t=o.neighborhoods.includes(s);return e.jsx(f.button,{whileTap:{scale:.92},className:u("rounded-full border px-4 py-2 text-xs font-medium",t?"bg-muted text-foreground border-border":"bg-card"),onClick:()=>xe(s),children:s},s)})]}),e.jsx(Ce,{orientation:"horizontal"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ordenar por"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{size:"sm",variant:o.sortBy==="upcoming"?"default":"outline",onClick:()=>p(s=>({...s,sortBy:"upcoming"})),children:"Próximos"}),e.jsx(j,{size:"sm",variant:o.sortBy==="popular"?"default":"outline",onClick:()=>p(s=>({...s,sortBy:"popular"})),children:"Populares"})]})]}),e.jsxs(ts,{value:w,onValueChange:s=>v(s),children:[e.jsxs(ie,{className:"grid w-full grid-cols-2",children:[e.jsx(_,{value:"list",children:"Lista"}),e.jsx(_,{value:"calendar",children:"Calendário"})]}),e.jsx(U,{value:"list",className:"mt-4 space-y-6",children:A?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((s,t)=>e.jsx(Q,{className:"h-28 w-full rounded-3xl"},`event-skel-${t}`))}):h.length===0?e.jsxs("div",{className:"rounded-2xl border bg-card p-6 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum evento encontrado."}),e.jsx(j,{variant:"link",onClick:()=>p(s=>({...s,search:"",datePreset:"all",categories:[],neighborhoods:[],venues:[],price:"all",timeOfDay:[],accessibility:!1,parking:!1,kids:!1,outdoor:!1})),children:"Limpar filtros"})]}):e.jsx("div",{className:"space-y-6",children:le.map(s=>{const t=C[s];if(!t||t.length===0)return null;const n=t[0].start;return e.jsxs(f.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:u("text-lg font-semibold",K(n)&&"text-primary"),children:Ae(n)}),Me(n)&&e.jsx(g,{variant:"secondary",className:"text-xs",children:"Amanhã"}),e.jsx(B,{className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.length," evento",t.length>1?"s":""]})]}),e.jsx("div",{className:"space-y-3",children:t.map((x,G)=>e.jsx(f.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:G*.05},children:e.jsx(ee,{event:x,isFavorite:m.includes(x.id),onToggleFavorite:N,onOpen:be=>S(`/agenda/${be}`)})},x.id))})]},s)})})}),e.jsxs(U,{value:"calendar",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border bg-card p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Tijucas"}),e.jsx("h3",{className:"text-lg font-semibold capitalize",children:X(H,"MMMM yyyy",{locale:as})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>$(Ye(b,1)),children:e.jsx(ss,{className:"h-4 w-4"})}),e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>$(Je(b,1)),children:e.jsx(ke,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"mt-4 grid grid-cols-7 gap-2 text-center text-xs text-muted-foreground",children:["D","S","T","Q","Q","S","S"].map((s,t)=>e.jsx("span",{children:s},`day-header-${t}`))}),e.jsx("div",{className:"mt-2 grid grid-cols-7 gap-2",children:je.map(s=>{const t=O(s),n=z[t]?.length,x=s.getMonth()===H.getMonth(),G=O(s)===O(b);return e.jsxs(f.button,{whileTap:{scale:.92},onClick:()=>$(s),className:u("flex h-10 flex-col items-center justify-center rounded-xl border text-xs",G?"bg-primary text-primary-foreground border-primary":"bg-background",!x&&"opacity-40"),children:[e.jsx("span",{className:"font-medium",children:X(s,"d")}),n?e.jsx("span",{className:"mt-1 h-1 w-1 rounded-full bg-current"}):null]},s.toISOString())})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Eventos em ",Oe(b)]}),(z[O(b)]??[]).length===0?e.jsx("div",{className:"rounded-2xl border bg-card p-6 text-center text-sm text-muted-foreground",children:"Nenhum evento neste dia."}):(z[O(b)]??[]).map((s,t)=>e.jsx(f.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:t*.04},children:e.jsx(ee,{event:s,isFavorite:m.includes(s.id),onToggleFavorite:N,onOpen:n=>S(`/agenda/${n}`)})},s.id))]})]})]})]}),e.jsx(ns,{open:y,onOpenChange:a,filters:o,applyFilters:p,allEvents:i,availableNeighborhoods:E,availableVenues:P,availableCategories:l})]})}function Os({scrollRef:r}){return e.jsx(ls,{scrollRef:r})}export{Os as default};
