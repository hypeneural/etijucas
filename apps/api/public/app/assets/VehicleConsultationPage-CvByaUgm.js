import{r as c,j as e,d5 as Se,x as G,d6 as se,ad as q,ak as be,bc as Ae,R as Ie,d7 as De,d8 as ge,ax as Pe,d9 as _e,bl as Ee,au as je,X as ve,cR as Fe,aJ as Me,S as ze,aa as Re,da as Ue,H as T,o as ae,db as Oe,m as Te,dc as Ve,bv as le,ah as Be,dd as Le,ag as Ge,Y as $e,Z as ne,de as Ze,aA as He,aF as re,df as Je,M as ie,dg as H,dh as J,di as oe,b1 as ce,a_ as de,dj as Ke,U as Ye,aK as We,bo as xe,bp as me,a4 as qe}from"./vendor-app-DsI_JdyL.js";import{a as M,c as x}from"./index-CEW-U-E1.js";import{t as he}from"./vendor-html2img-BvVRVkKh.js";import{I as X}from"./iconify-Ticu7unT.js";import{S as Xe,a as Qe,b as et,c as tt}from"./sheet-Dc4ybKzc.js";import{A as st,E as we,b as ue,a as at}from"./client-BdVdTjkU.js";function $(t){return(t||"").toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,7)}function lt(t){return/^[A-Z]{3}\d{4}$/.test($(t))}function nt(t){return/^[A-Z]{3}\d[A-Z]\d{2}$/.test($(t))}function V(t){return lt(t)||nt(t)}function fe(t){const s=(t||"").toUpperCase().replace(/[^A-Z0-9]/g,""),l=[];for(const a of s){const r=l.length;if(r>=7)break;if(r<=2){pe(a)&&l.push(a);continue}if(r===3){K(a)&&l.push(a);continue}if(r===4){(pe(a)||K(a))&&l.push(a);continue}if(r>=5){K(a)&&l.push(a);continue}}return l.join("")}function pe(t){const s=t.charCodeAt(0);return s>=65&&s<=90}function K(t){const s=t.charCodeAt(0);return s>=48&&s<=57}function B(t){if(!V(t))return-1;const l=$(t).slice(-1),a=parseInt(l,10);return isNaN(a)?-1:a}function L(t){const s=$(t);if(s.length<3)return s;const l=s.slice(0,3),a=s.slice(3);return`${l}¬∑${a}`}function rt(t){if(t.length<5)return"unknown";const s=t[4];return/[A-Z]/.test(s)?"mercosul":/[0-9]/.test(s)?"old":"unknown"}function it(t){switch(t){case"mercosul":return["A","B","C","1","D","2","3"];case"old":return["A","B","C","1","2","3","4"];default:return["A","B","C","1","?","?","?"]}}function ot(t,s){if(!t)return!0;const l=/[A-Z]/.test(t),a=/[0-9]/.test(t);return s<=2?l:s===3?a:s===4?l||a:s>=5?a:!1}function ct(t,s){return t<=2?"letter":t===3?"number":t===4?s==="mercosul"?"letter":s==="old"?"number":"flex":"number"}const dt=({value:t,onChange:s,isLoading:l=!1,isValid:a=!1,hasError:r=!1,errorMessage:h,onOcrClick:o})=>{const u=c.useRef(null),[d,p]=c.useState(!1),[N,k]=c.useState("unknown"),[j,y]=c.useState(null),[S,A]=c.useState(!1),m=c.useMemo(()=>rt(t),[t]),z=c.useMemo(()=>it(m),[m]),I=t.padEnd(7," ").split("").slice(0,7);c.useEffect(()=>{if(m!=="unknown"&&m!==N&&t.length>=5){k(m);const i=m==="mercosul"?"Mercosul":"Antiga";M.success(`Placa ${i} detectada`,{duration:1200,icon:"üöó"}),navigator.vibrate&&navigator.vibrate([30,50,30])}},[m,N,t.length]),c.useEffect(()=>{t.length<5&&k("unknown")},[t.length]);const D=i=>{const b=fe(i.target.value);if(i.target.value.length>t.length){const f=i.target.value.toUpperCase().slice(-1),w=t.length;!ot(f,w)&&/[A-Z0-9]/.test(f)&&(y(w),setTimeout(()=>y(null),400),navigator.vibrate&&navigator.vibrate(50))}b.length<=7&&s(b)},U=i=>{i.preventDefault();const b=i.clipboardData.getData("text"),f=fe(b).slice(0,7);s(f),A(!0),setTimeout(()=>A(!1),300),navigator.vibrate&&navigator.vibrate([20,30,20])},_=c.useMemo(()=>{if(a||r||l)return null;const i=t.length;return i===0?"Toque para digitar a placa":i<3?"3 letras (ex: ABC)":i===3?"Agora 1 n√∫mero":i===4?"Letra = Mercosul ¬∑ N√∫mero = Antiga":i>=5&&i<7?"√öltimos 2 n√∫meros":null},[t.length,a,r,l]);c.useEffect(()=>{a&&!l&&navigator.vibrate&&navigator.vibrate([50,30,50])},[a,l]);const E=()=>e.jsx("div",{className:"relative z-10 flex items-center gap-1 sm:gap-1.5 px-2",children:I.map((i,b)=>{const f=i.trim()!=="",w=t.length===b,R=ct(b,m),Z=j===b,F=b===3;return e.jsxs(Ie.Fragment,{children:[F&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-400 mx-0.5 sm:mx-1"}),e.jsxs("div",{className:x("w-9 h-12 sm:w-10 sm:h-14 rounded-md flex items-center justify-center text-xl sm:text-2xl font-black font-sans uppercase transition-all duration-200 relative",f?a?"bg-green-500/10 text-slate-900":m==="old"?"bg-slate-200/80 text-slate-900":"bg-white text-slate-900":w&&d?"bg-blue-500/10 border-2 border-blue-500/50":"bg-slate-100/50 border-2 border-dashed border-slate-300",!f&&!w&&R==="letter"&&"border-blue-200",!f&&!w&&R==="number"&&"border-amber-200",!f&&!w&&R==="flex"&&"border-purple-200",Z&&"!bg-red-500/20 !border-red-500 animate-[shake_0.3s_ease-in-out]",a&&f&&"shadow-[0_0_8px_rgba(34,197,94,0.3)]"),children:[f?i:e.jsx("span",{className:x("text-slate-300 text-lg",w&&d&&"animate-pulse text-blue-400"),children:z[b]}),w&&d&&!f&&e.jsx("div",{className:"absolute bottom-1.5 left-1/2 -translate-x-1/2 w-5 h-0.5 bg-blue-500 animate-pulse rounded-full"})]})]},b)})});return e.jsxs("div",{className:"w-full relative group",children:[e.jsxs("div",{className:x("absolute -inset-4 border rounded-2xl transition-all duration-300 pointer-events-none z-0",d?"border-blue-500/30":"border-transparent"),children:[e.jsx("div",{className:x("absolute top-0 left-0 w-4 h-4 border-t-2 border-l-2 border-blue-400 transition-opacity duration-300",d?"opacity-100":"opacity-0")}),e.jsx("div",{className:x("absolute top-0 right-0 w-4 h-4 border-t-2 border-r-2 border-blue-400 transition-opacity duration-300",d?"opacity-100":"opacity-0")}),e.jsx("div",{className:x("absolute bottom-0 left-0 w-4 h-4 border-b-2 border-l-2 border-blue-400 transition-opacity duration-300",d?"opacity-100":"opacity-0")}),e.jsx("div",{className:x("absolute bottom-0 right-0 w-4 h-4 border-b-2 border-r-2 border-blue-400 transition-opacity duration-300",d?"opacity-100":"opacity-0")}),e.jsxs("div",{className:x("absolute -top-6 left-1/2 -translate-x-1/2 text-[10px] font-mono font-bold text-blue-400 tracking-widest transition-all duration-300 flex items-center gap-2",d?"opacity-100":"opacity-0"),children:[e.jsx(Se,{className:"w-3 h-3 animate-pulse"}),"SCAN MODE"]})]}),e.jsxs("div",{className:x("relative w-full overflow-hidden shadow-lg transition-all duration-300 transform z-10",m==="old"?"rounded-xl":"rounded-lg",d?"scale-[1.02]":"scale-100",S?"animate-[snap_0.3s_ease-out]":"",a?"shadow-[0_0_30px_rgba(34,197,94,0.3)] ring-2 ring-green-500":r?"shadow-[0_0_30px_rgba(239,68,68,0.3)] ring-2 ring-red-500 animate-[shake_0.5s_ease-in-out]":m==="old"?"shadow-slate-400/40 border-2 border-slate-400":"shadow-slate-900/30 border-2 border-slate-300",l?"animate-pulse":""),onClick:()=>u.current?.focus(),children:[m==="old"?e.jsxs("div",{className:"bg-gradient-to-b from-[#d8d8d8] via-[#c8c8c8] to-[#b8b8b8] relative",children:[e.jsx("div",{className:"h-6 bg-gradient-to-b from-[#f0f0f0] to-[#e0e0e0] flex items-center justify-center relative z-10 border-b border-slate-300",children:e.jsx("span",{className:"text-slate-700 font-bold text-[10px] tracking-[0.06em] font-sans",children:"SC-TIJUCAS"})}),e.jsxs("div",{className:"h-16 flex items-center justify-center relative bg-gradient-to-b from-[#e0e0e0] via-[#d8d8d8] to-[#d0d0d0]",children:[e.jsx("div",{className:"absolute left-2 top-2 w-1.5 h-1.5 rounded-full bg-slate-500/50 shadow-inner"}),e.jsx("div",{className:"absolute right-2 top-2 w-1.5 h-1.5 rounded-full bg-slate-500/50 shadow-inner"}),e.jsx("div",{className:"absolute left-2 bottom-2 w-1.5 h-1.5 rounded-full bg-slate-500/50 shadow-inner"}),e.jsx("div",{className:"absolute right-2 bottom-2 w-1.5 h-1.5 rounded-full bg-slate-500/50 shadow-inner"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:e.jsx("div",{className:"absolute -left-full top-0 w-1/2 h-full bg-gradient-to-r from-transparent via-white/25 to-transparent skew-x-12 animate-[shine_4s_ease-in-out_infinite]"})}),E()]})]}):e.jsxs("div",{className:"bg-white relative flex",children:[e.jsx("div",{className:"w-7 bg-[#009739] flex flex-col items-center justify-end pb-1.5 relative shrink-0 rounded-l-lg",children:e.jsx("span",{className:"text-white font-bold text-[9px] tracking-tight",children:"BR"})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:x("h-7 flex items-center justify-between px-2 relative z-10 transition-all duration-300",m==="mercosul"?"bg-[#003399]":"bg-[#003399]/80"),children:[e.jsx("span",{className:"text-white/70 font-bold text-[6px] tracking-[0.03em] uppercase",children:"MERCOSUL"}),e.jsx("span",{className:x("text-white font-bold text-[10px] tracking-[0.12em] transition-all duration-300 absolute left-1/2 -translate-x-1/2",m==="mercosul"?"opacity-100":"opacity-70"),children:"BRASIL"}),e.jsxs("div",{className:"w-5 h-3 bg-[#009c3b] rounded-[1px] overflow-hidden relative border border-white/10",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-2 bg-[#ffdf00] rotate-45 scale-[0.55]"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-[5px] h-[5px] bg-[#002776] rounded-full"})})]})]}),e.jsx("div",{className:"h-16 flex items-center justify-center relative bg-white",children:E()})]})]}),m==="unknown"&&e.jsxs("div",{className:"absolute inset-0 bg-white flex",style:{display:m==="unknown"?"flex":"none"},children:[e.jsx("div",{className:"w-7 bg-[#009739]/60 flex flex-col items-center justify-end pb-1.5 shrink-0 rounded-l-lg",children:e.jsx("span",{className:"text-white/70 font-bold text-[9px]",children:"BR"})}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"h-7 flex items-center justify-between px-2 bg-[#003399]/60",children:[e.jsx("span",{className:"text-white/50 font-bold text-[6px] tracking-[0.03em]",children:"MERCOSUL"}),e.jsx("span",{className:"text-white/60 font-bold text-[10px] tracking-[0.12em] absolute left-1/2 -translate-x-1/2",children:"BRASIL"}),e.jsxs("div",{className:"w-5 h-3 bg-[#009c3b]/60 rounded-[1px] overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-3 h-2 bg-[#ffdf00]/60 rotate-45 scale-[0.55]"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-[5px] h-[5px] bg-[#002776]/60 rounded-full"})})]})]}),e.jsx("div",{className:"h-16 flex items-center justify-center bg-white/90",children:E()})]})]}),e.jsx("input",{ref:u,type:"text",inputMode:"text",className:"absolute inset-0 w-full h-full opacity-0 cursor-text z-20",value:t,onChange:D,onPaste:U,onFocus:()=>p(!0),onBlur:()=>p(!1),autoComplete:"off",autoCorrect:"off",autoCapitalize:"characters",spellCheck:"false"}),l&&e.jsx("div",{className:"absolute inset-0 z-10 overflow-hidden pointer-events-none",children:e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.5)] animate-[scan-y_1.5s_linear_infinite]"})}),e.jsx("div",{className:"absolute right-2 top-2 animate-in fade-in zoom-in duration-300 z-20",children:l?e.jsx(G,{className:"w-5 h-5 text-blue-500 animate-spin"}):a?e.jsx("div",{className:"bg-green-500 rounded-full p-1 shadow-lg shadow-green-500/30",children:e.jsx(se,{className:"w-4 h-4 text-white"})}):null})]}),o&&t.length===0&&!l&&e.jsx("div",{className:"mt-3 flex justify-center animate-in fade-in duration-300",children:e.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-slate-800/80 hover:bg-slate-700 border border-white/10 rounded-full text-slate-300 text-sm font-medium transition-all hover:scale-105 active:scale-95",children:[e.jsx(q,{className:"w-4 h-4 text-blue-400"}),"Ler placa por foto"]})}),e.jsxs("div",{className:"mt-3 text-center min-h-[24px] space-y-1",children:[h&&r?e.jsxs("div",{className:"text-sm text-red-500 font-medium animate-in fade-in slide-in-from-top-2 duration-300 flex items-center justify-center gap-2",children:[e.jsx(be,{className:"w-4 h-4"}),h]}):a?e.jsxs("div",{className:"text-sm text-green-500 font-medium animate-in fade-in zoom-in duration-300 flex items-center justify-center gap-2",children:[e.jsx(se,{className:"w-4 h-4"}),"Placa ",m==="mercosul"?"Mercosul":"Antiga"," reconhecida"]}):_?e.jsxs("div",{className:"text-sm text-muted-foreground animate-in fade-in slide-in-from-top-2 duration-300 flex items-center justify-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-blue-400"}),_]}):null,m==="unknown"&&t.length>=1&&t.length<5&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2 animate-in fade-in duration-300",children:[e.jsx("span",{className:"text-[10px] text-slate-500 font-medium px-2 py-0.5 rounded-full bg-slate-200/50 border border-slate-300/50",children:"Antiga"}),e.jsx("span",{className:"text-[10px] text-slate-400",children:"ou"}),e.jsx("span",{className:"text-[10px] text-slate-500 font-medium px-2 py-0.5 rounded-full bg-blue-100/50 border border-blue-300/50",children:"Mercosul"})]})]}),e.jsx("div",{className:"sr-only",children:"Digite a placa do ve√≠culo"})]})},xt=({state:t,className:s})=>{const l=()=>{switch(t){case"empty":return"Digite a placa que eu te mostro as datas rapidinho.";case"loading":return"T√¥ puxando... 1 segundinho!";case"valid":return"Boa! Confere as informa√ß√µes abaixo üëá";case"error":return"Na base n√£o veio, mas no Whats eu resolvo pra voc√™.";case"idle":default:return"Consultar d√©bitos e IPVA nunca foi t√£o f√°cil!"}},a=t==="valid"||t==="loading";return e.jsxs("div",{className:x("w-full flex items-end gap-3",s),children:[e.jsxs("div",{className:"relative w-14 h-14 shrink-0 transition-transform duration-300 hover:scale-110",children:[e.jsx("div",{className:x("w-14 h-14 rounded-full border-2 shadow-lg overflow-hidden flex items-center justify-center backdrop-blur-sm",a?"border-green-400 bg-green-400/10":"border-blue-400 bg-blue-400/10"),children:e.jsx("img",{alt:"Mascote Tiquinho",className:"w-full h-full object-cover",src:"https://lh3.googleusercontent.com/aida-public/AB6AXuDt_YDD7wGOwNo-2Gmi2t3Uqt2R45LQdVVCa6vmJmHCvtze_WoZBGI4OkoaQ-9dAp00tt4TSplaVcZF76H2S9abSzpBuiRRUK_MMcRqxvetoBwg1ifaiIz0DZ6eAR2e09yH_MllFjwJnyZGseGwKYz4iwmvTNISnjXNKPugb5jDZLtBxKeflJH8znY6OmBUoEjfcnMu3NX4PmgPiO-TfVg_cKca3HkfrM1cHDhle1cDUFLoQs4CVMgeZfwUAi1w1Vee8vKKSDuGVG4"})}),e.jsx("div",{className:x("absolute bottom-0 right-0 w-3.5 h-3.5 border-2 border-background rounded-full transition-colors duration-300",t==="valid"?"bg-green-500":t==="error"?"bg-amber-500":t==="loading"?"bg-blue-500 animate-pulse":"bg-slate-400")})]}),e.jsx("div",{className:x("relative p-3 rounded-2xl rounded-bl-none shadow-sm flex-1 transition-all duration-300 border backdrop-blur-md","bg-white/5 border-white/10 text-slate-100"),children:e.jsx("p",{className:"text-sm font-medium leading-relaxed animate-in fade-in slide-in-from-left-2 duration-300 key-[state]",children:l()})})]})},mt={1:{cotaUnica:"2026-01-31",parcela1:"2026-01-10",parcela2:"2026-02-10",parcela3:"2026-03-10",licenciamento:"2026-03-31"},2:{cotaUnica:"2026-02-28",parcela1:"2026-02-10",parcela2:"2026-03-10",parcela3:"2026-04-10",licenciamento:"2026-04-30"},3:{cotaUnica:"2026-03-31",parcela1:"2026-03-10",parcela2:"2026-04-10",parcela3:"2026-05-10",licenciamento:"2026-05-31"},4:{cotaUnica:"2026-04-30",parcela1:"2026-04-10",parcela2:"2026-05-10",parcela3:"2026-06-10",licenciamento:"2026-06-30"},5:{cotaUnica:"2026-05-31",parcela1:"2026-05-10",parcela2:"2026-06-10",parcela3:"2026-07-10",licenciamento:"2026-07-31"},6:{cotaUnica:"2026-06-30",parcela1:"2026-06-10",parcela2:"2026-07-10",parcela3:"2026-08-10",licenciamento:"2026-08-31"},7:{cotaUnica:"2026-07-31",parcela1:"2026-07-10",parcela2:"2026-08-10",parcela3:"2026-09-10",licenciamento:"2026-09-30"},8:{cotaUnica:"2026-08-31",parcela1:"2026-08-10",parcela2:"2026-09-10",parcela3:"2026-10-10",licenciamento:"2026-10-31"},9:{cotaUnica:"2026-09-30",parcela1:"2026-09-10",parcela2:"2026-10-10",parcela3:"2026-11-10",licenciamento:"2026-11-30"},0:{cotaUnica:"2026-10-31",parcela1:"2026-10-10",parcela2:"2026-11-10",parcela3:"2026-12-10",licenciamento:"2026-12-31"}};function ht(t){return mt[t]}function Y(t){const s=new Date(t),l=new Date;s.setHours(0,0,0,0),l.setHours(0,0,0,0);const a=s.getTime()-l.getTime();return Math.ceil(a/(1e3*60*60*24))}const ut=({dates:t})=>{const s=r=>{if(!r)return"--/--";const[h,o,u]=r.split("-");return`${u} ${["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(o)-1]}`},l=r=>{const h=Y(r);return h<0?{label:"Vencido",color:"text-red-500",bg:"bg-red-500/10"}:h===0?{label:"Vence Hoje",color:"text-amber-500",bg:"bg-amber-500/10"}:h<=7?{label:`Faltam ${h} dias`,color:"text-amber-400",bg:"bg-amber-400/10"}:{label:"Em dia",color:"text-slate-400",bg:"bg-slate-500/10"}},a=({label:r,dateStr:h,icon:o,highlight:u=!1,badgeText:d})=>{const p=l(h);return e.jsxs("div",{className:x("relative flex flex-col p-4 rounded-xl border transition-all hover:scale-[1.02]",u?"bg-gradient-to-br from-[#1e3a8a]/40 to-slate-900 border-blue-500/30 shadow-lg shadow-blue-900/20":"bg-[#1e293b]/50 border-slate-700/50",Y(h)<=3&&Y(h)>=0?"animate-pulse ring-1 ring-amber-500/50":""),children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:x("opacity-80",u?"text-blue-400":"text-slate-400"),children:o}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-slate-400",children:r})]}),d&&e.jsx("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-green-500/20 text-green-400 border border-green-500/20",children:d})]}),e.jsx("div",{className:"flex items-baseline gap-2 mt-auto",children:e.jsx("span",{className:x("text-2xl font-bold tracking-tight",u?"text-white":"text-slate-200"),children:s(h)})}),e.jsx("div",{className:x("self-start mt-2 text-[10px] font-bold px-2 py-0.5 rounded-full",p.color,p.bg),children:p.label})]})};return e.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("div",{className:"col-span-2",children:e.jsx(a,{label:"Cota √önica",dateStr:t.cotaUnica,icon:e.jsx(De,{className:"w-5 h-5"}),highlight:!0,badgeText:"Economize juros"})}),e.jsx(a,{label:"1¬™ Cota",dateStr:t.parcela1,icon:e.jsx(ge,{className:"w-5 h-5"})}),e.jsx(a,{label:"2¬™ Cota",dateStr:t.parcela2,icon:e.jsx(Pe,{className:"w-5 h-5"})}),e.jsx(a,{label:"3¬™ Cota",dateStr:t.parcela3,icon:e.jsx(_e,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative flex flex-col p-4 rounded-xl border border-amber-500/20 bg-amber-900/10",children:[e.jsx("div",{className:"flex justify-between items-start mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5 text-amber-400"}),e.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-amber-400/80",children:"Licenciamento"})]})}),e.jsx("span",{className:"text-2xl font-bold tracking-tight text-white mb-2",children:s(t.licenciamento)}),e.jsx("div",{className:"text-[10px] text-amber-300/60",children:"Obrigat√≥rio para rodar"})]})]})},ft=({isOpen:t,onClose:s,plate:l,schedule:a})=>{const r=c.useRef(null),[h,o]=c.useState(!1),[u,d]=c.useState("story");if(!t)return null;const p=j=>{if(!j)return"--/--";const[y,S,A]=j.split("-");return`${A} ${["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(S)-1]}`},N=async()=>{if(r.current){o(!0);try{const j=await he(r.current,{cacheBust:!0,pixelRatio:2}),y=document.createElement("a");y.download=`ipva-${l.toLowerCase()}-${u}.png`,y.href=j,y.click()}catch(j){console.error("Error generating image:",j)}finally{o(!1)}}},k=async j=>{if(r.current){o(!0);try{const y=await he(r.current,{cacheBust:!0,pixelRatio:2}),A=await(await fetch(y)).blob(),m=new File([A],`ipva-${l}.png`,{type:"image/png"});j==="whatsapp"?navigator.share?await navigator.share({files:[m],title:`Vencimentos IPVA - ${L(l)}`,text:"Confira os vencimentos do meu ve√≠culo! üöó"}):N():j==="generic"&&navigator.share?await navigator.share({files:[m],title:`IPVA SC - ${L(l)}`}):N()}catch(y){console.error("Error sharing:",y)}finally{o(!1)}}};return e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",children:[e.jsx("div",{className:"absolute inset-0",onClick:s}),e.jsxs("div",{className:"relative z-10 w-full max-w-sm mx-4 bg-[#1e293b] rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 slide-in-from-bottom-4 duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsxs("h3",{className:"text-white font-bold flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5 text-blue-400"}),"Gerar Card Viral"]}),e.jsx("button",{onClick:s,className:"p-1.5 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(ve,{className:"w-5 h-5 text-slate-400"})})]}),e.jsxs("div",{className:"flex gap-2 p-4 pb-2",children:[e.jsx("button",{onClick:()=>d("story"),className:x("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all",u==="story"?"bg-blue-500 text-white":"bg-slate-700/50 text-slate-400 hover:bg-slate-700"),children:"Story (9:16)"}),e.jsx("button",{onClick:()=>d("post"),className:x("flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-all",u==="post"?"bg-blue-500 text-white":"bg-slate-700/50 text-slate-400 hover:bg-slate-700"),children:"Post (1:1)"})]}),e.jsx("div",{className:"p-4 flex justify-center overflow-hidden",children:e.jsxs("div",{ref:r,className:x("bg-gradient-to-br from-[#0f172a] via-[#1e3a8a] to-[#0f172a] rounded-xl overflow-hidden flex flex-col items-center justify-center p-6 shadow-lg relative",u==="story"?"w-[270px] h-[480px]":"w-[300px] h-[300px]"),style:{backgroundImage:"radial-gradient(rgba(59, 130, 246, 0.15) 1px, transparent 1px)",backgroundSize:"16px 16px"},children:[e.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"T"})}),e.jsx("span",{className:"text-white/80 text-xs font-bold tracking-wider",children:"TITICO APP"})]}),e.jsxs("div",{className:"flex flex-col items-center text-center mt-8",children:[e.jsx("div",{className:"bg-white rounded-lg px-6 py-3 shadow-lg mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-slate-900 font-mono tracking-wider",children:L(l)})}),e.jsxs("p",{className:"text-blue-300 text-sm mb-4",children:["Final ",B(l)]}),e.jsxs("div",{className:x("w-full space-y-2",u==="story"?"mt-4":""),children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex justify-between items-center backdrop-blur-sm",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:"Cota √önica"}),e.jsx("span",{className:"text-white font-bold",children:p(a.cotaUnica)})]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex justify-between items-center backdrop-blur-sm",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:"1¬™ Cota"}),e.jsx("span",{className:"text-white font-bold",children:p(a.parcela1)})]}),u==="story"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white/10 rounded-lg p-3 flex justify-between items-center backdrop-blur-sm",children:[e.jsx("span",{className:"text-slate-300 text-sm",children:"2¬™ Cota"}),e.jsx("span",{className:"text-white font-bold",children:p(a.parcela2)})]}),e.jsxs("div",{className:"bg-amber-500/20 border border-amber-500/30 rounded-lg p-3 flex justify-between items-center backdrop-blur-sm",children:[e.jsx("span",{className:"text-amber-300 text-sm",children:"Licenciamento"}),e.jsx("span",{className:"text-amber-100 font-bold",children:p(a.licenciamento)})]})]})]})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 right-4 flex flex-col items-center",children:[e.jsxs("div",{className:"bg-[#25D366] text-white text-xs font-bold px-4 py-2 rounded-full flex items-center gap-2",children:[e.jsx(X,{icon:"mdi:whatsapp",width:"16",height:"16"}),"Consulta gr√°tis pelo Titico"]}),e.jsx("span",{className:"text-white/40 text-[10px] mt-2",children:"etijucas.com.br"})]})]})}),e.jsxs("div",{className:"p-4 pt-0 grid grid-cols-3 gap-2",children:[e.jsxs("button",{onClick:N,disabled:h,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-slate-700/50 hover:bg-slate-700 transition-colors disabled:opacity-50",children:[e.jsx(Fe,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-xs text-slate-300",children:"Baixar"})]}),e.jsxs("button",{onClick:()=>k("whatsapp"),disabled:h,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-[#25D366]/20 hover:bg-[#25D366]/30 transition-colors disabled:opacity-50",children:[e.jsx(X,{icon:"mdi:whatsapp",width:"20",height:"20",className:"text-[#25D366]"}),e.jsx("span",{className:"text-xs text-slate-300",children:"WhatsApp"})]}),e.jsxs("button",{onClick:()=>k("generic"),disabled:h,className:"flex flex-col items-center gap-1 p-3 rounded-xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 transition-colors disabled:opacity-50",children:[e.jsx(Me,{className:"w-5 h-5 text-pink-400"}),e.jsx("span",{className:"text-xs text-slate-300",children:"Stories"})]})]}),h&&e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})})]})]})};function pt(t){const s=document.createElement("input");s.type="file",s.accept="image/*",s.capture="environment",s.onchange=()=>{const l=s.files?.[0];l&&t(l)},s.click()}function bt(t){const s=document.createElement("input");s.type="file",s.accept="image/*",s.onchange=()=>{const l=s.files?.[0];l&&t(l)},s.click()}async function gt(t){const s=new FormData;s.append("image",t);try{return await(await fetch(`${st.baseURL}${we.plates.recognize}`,{method:"POST",body:s})).json()}catch(l){return console.error("OCR Error:",l),{ok:!1,message:"Erro ao processar imagem"}}}function Ne(t){return t>=.88?{level:"high",label:"Alta confian√ßa",color:"text-green-400"}:t>=.7?{level:"medium",label:"M√©dia confian√ßa",color:"text-yellow-400"}:{level:"low",label:"Baixa confian√ßa",color:"text-red-400"}}function Q(t){if(t.length!==7)return[];const s=new Set,l=t.split("");for(let a=0;a<3;a++){if(l[a]==="0"){const r=[...l];r[a]="O",s.add(r.join(""))}if(l[a]==="1"){const r=[...l];r[a]="I",s.add(r.join(""))}}if(l[3]==="O"){const a=[...l];a[3]="0",s.add(a.join(""))}if(l[3]==="I"){const a=[...l];a[3]="1",s.add(a.join(""))}for(let a=5;a<7;a++){if(l[a]==="O"){const r=[...l];r[a]="0",s.add(r.join(""))}if(l[a]==="I"){const r=[...l];r[a]="1",s.add(r.join(""))}}return s.delete(t),Array.from(s)}const W={pickImageFromCamera:pt,pickImageFromGallery:bt,recognizePlate:gt,getConfidenceLevel:Ne,suggestAlternatives:Q},jt=({isOpen:t,onClose:s,onPlateSelected:l})=>{const[a,r]=c.useState("idle"),[h,o]=c.useState(null),[u,d]=c.useState([]),[p,N]=c.useState(null),[k,j]=c.useState([]),[y,S]=c.useState(""),A=c.useRef(null),m=()=>{r("idle"),o(null),d([]),N(null),j([]),S(""),A.current=null},z=async i=>{A.current=i;const b=URL.createObjectURL(i);o(b),r("analyzing");try{const f=await W.recognizePlate(i);if(f.ok&&f.results&&f.results.length>0){d(f.results);const w=f.results[0];N(w.plate);const R=Q(w.plate);j(R),r("results")}else r("error"),S(f.message||"Nenhuma placa encontrada. Tente outra foto.")}catch(f){console.error("OCR Error:",f),r("error"),S("Erro ao processar imagem. Tente novamente.")}},I=()=>{r("capturing"),W.pickImageFromCamera(z)},D=()=>{r("capturing"),W.pickImageFromGallery(z)},U=()=>{p&&(l(p),M.success(`Placa ${p} selecionada`),s(),setTimeout(m,300))},_=()=>{m()},E=()=>{s(),setTimeout(m,300)};return e.jsx(Xe,{open:t,onOpenChange:E,children:e.jsxs(Qe,{side:"bottom",className:"bg-slate-900 border-t border-white/10 rounded-t-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(et,{className:"mb-4",children:e.jsxs(tt,{className:"text-white text-lg flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-blue-400"}),"Ler placa por foto"]})}),a==="idle"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ze,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-slate-300",children:[e.jsx("p",{className:"font-medium text-white mb-1",children:"Dicas para melhor leitura:"}),e.jsxs("ul",{className:"space-y-1 text-slate-400",children:[e.jsx("li",{children:"‚Ä¢ Boa ilumina√ß√£o, sem reflexos"}),e.jsx("li",{children:"‚Ä¢ Placa centralizada na foto"}),e.jsx("li",{children:"‚Ä¢ Aproxime-se do ve√≠culo"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:I,className:"flex flex-col items-center justify-center gap-3 p-6 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl text-white font-medium hover:from-blue-500 hover:to-indigo-500 transition-all active:scale-95",children:[e.jsx(q,{className:"w-8 h-8"}),e.jsx("span",{children:"Tirar foto"})]}),e.jsxs("button",{onClick:D,className:"flex flex-col items-center justify-center gap-3 p-6 bg-slate-800 border border-white/10 rounded-xl text-white font-medium hover:bg-slate-700 transition-all active:scale-95",children:[e.jsx(Re,{className:"w-8 h-8 text-slate-400"}),e.jsx("span",{children:"Galeria"})]})]})]}),(a==="capturing"||a==="analyzing")&&e.jsx("div",{className:"animate-in fade-in duration-300",children:e.jsx("div",{className:"relative rounded-xl overflow-hidden bg-slate-800 aspect-video flex items-center justify-center",children:h?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:h,alt:"Preview",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ue,{className:"w-16 h-16 text-blue-400 animate-pulse"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(G,{className:"w-8 h-8 text-white animate-spin"})})]}),e.jsx("p",{className:"text-white mt-3 font-medium",children:"Analisando..."})]})}),e.jsx("div",{className:"absolute inset-x-0 h-0.5 bg-gradient-to-r from-transparent via-blue-400 to-transparent animate-scan-line"})]}):e.jsxs("div",{className:"text-center text-slate-400",children:[e.jsx(G,{className:"w-8 h-8 animate-spin mx-auto mb-2"}),e.jsx("p",{children:"Aguardando imagem..."})]})})}),a==="results"&&u.length>0&&e.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4 duration-300",children:[h&&e.jsxs("div",{className:"relative rounded-xl overflow-hidden",children:[e.jsx("img",{src:h,alt:"Captured",className:"w-full h-32 object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsxs("div",{className:"absolute bottom-2 left-2 right-2 flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-slate-300 flex items-center gap-1",children:[e.jsx(T,{className:"w-3 h-3 text-green-400"}),"Placa detectada"]}),e.jsxs("button",{onClick:_,className:"text-xs text-blue-400 flex items-center gap-1",children:[e.jsx(ae,{className:"w-3 h-3"}),"Nova foto"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Placa reconhecida:"}),u.map((i,b)=>{const f=Ne(i.score),w=p===i.plate;return e.jsx("button",{onClick:()=>{N(i.plate),j(Q(i.plate))},className:x("w-full p-4 rounded-xl border-2 transition-all text-left",w?"bg-blue-500/20 border-blue-500":"bg-slate-800 border-white/10 hover:border-white/20"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white font-mono tracking-wider",children:i.plate}),e.jsxs("p",{className:x("text-xs font-medium mt-1",f.color),children:[f.label," (",Math.round(i.score*100),"%)"]})]}),w&&e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx(T,{className:"w-5 h-5 text-white"})})]})},b)}),k.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(be,{className:"w-3 h-3"}),"Talvez seja:"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:k.map((i,b)=>e.jsx("button",{onClick:()=>N(i),className:x("px-3 py-1.5 rounded-lg text-sm font-mono font-medium transition-all",p===i?"bg-blue-500 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"),children:i},b))})]}),u[0]?.candidates&&u[0].candidates.length>1&&e.jsxs("div",{className:"space-y-2 pt-2 border-t border-white/5",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Outras leituras:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u[0].candidates.slice(1,4).map((i,b)=>e.jsxs("button",{onClick:()=>N(i.plate),className:x("px-3 py-1.5 rounded-lg text-xs font-mono transition-all flex items-center gap-1",p===i.plate?"bg-blue-500 text-white":"bg-slate-800 text-slate-400 hover:bg-slate-700"),children:[i.plate,e.jsxs("span",{className:"text-slate-500 text-[10px]",children:[Math.round(i.score*100),"%"]})]},b))})]})]}),e.jsxs("button",{onClick:U,disabled:!p,className:"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-500 disabled:bg-slate-700 disabled:text-slate-500 text-white font-bold py-4 rounded-xl transition-all active:scale-95",children:[e.jsx(T,{className:"w-5 h-5"}),"Usar esta placa"]}),e.jsx("p",{className:"text-center text-xs text-slate-500",children:"Voc√™ poder√° editar a placa antes de confirmar"})]}),a==="error"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-4",children:e.jsx(ve,{className:"w-8 h-8 text-red-400"})}),e.jsx("p",{className:"text-white font-medium mb-2",children:"N√£o foi poss√≠vel ler a placa"}),e.jsx("p",{className:"text-slate-400 text-sm",children:y})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:_,className:"flex items-center justify-center gap-2 py-3 bg-blue-600 hover:bg-blue-500 text-white font-medium rounded-xl transition-all",children:[e.jsx(ae,{className:"w-4 h-4"}),"Tentar novamente"]}),e.jsx("button",{onClick:E,className:"flex items-center justify-center gap-2 py-3 bg-slate-700 hover:bg-slate-600 text-white font-medium rounded-xl transition-all",children:"Digitar placa"})]})]})]})})},vt=`
@keyframes scan-line {
    0% { top: 0; }
    100% { top: 100%; }
}
.animate-scan-line {
    animation: scan-line 1.5s ease-in-out infinite;
}
`;if(typeof document<"u"&&!document.getElementById("plate-ocr-styles")){const t=document.createElement("style");t.id="plate-ocr-styles",t.textContent=vt,document.head.appendChild(t)}const wt=({children:t,onSwipeRight:s,onSwipeLeft:l,rightActionColor:a="bg-red-500",leftActionColor:r="bg-blue-500",rightIcon:h,leftIcon:o,className:u})=>{const d=Oe(),p=async(N,k)=>{k.offset.x<-100&&s?(await d.start({x:-500,opacity:0,transition:{duration:.2}}),s()):k.offset.x>100&&l?(l(),d.start({x:0})):d.start({x:0})};return e.jsxs("div",{className:x("relative overflow-hidden rounded-xl",u),children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-between pointer-events-none",children:e.jsx("div",{className:x("h-full w-full flex items-center pl-4 justify-start",r),children:o})}),e.jsx("div",{className:x("absolute inset-0 flex items-center justify-end pr-4 pointer-events-none",a),children:h}),e.jsx(Te.div,{drag:"x",dragConstraints:{left:0,right:0},dragElastic:.5,onDragEnd:p,animate:d,className:"relative bg-[#1e293b] z-10",children:t})]})},Nt={async lookup(t){try{return await at.post(we.vehicles.lookup,t)}catch(s){if(s instanceof ue)return{ok:!1,plate:t.plate.toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,7),plateType:null,finalDigit:null,cache:{hit:!1,fetchedAt:null,expiresAt:null,lastStatus:s.status,lastError:s.message},availableSections:{basic:!1,extra:!1,fipe:!1,logo:!1},data:{},code:s.code??"ERROR",message:s.message};throw s}},async lookupOrThrow(t){const s=await this.lookup({plate:t});if(!s.ok)throw new ue(s.message??"Ve√≠culo n√£o encontrado",s.cache.lastStatus??404,s.code);return s},async refreshVehicle(t){return this.lookup({plate:t,refresh:!0})},async getFipeValue(t){const s=await this.lookup({plate:t,sections:["fipe"]});if(!s.ok||!s.data.fipe?.dados?.length)return null;const l=s.data.fipe.dados;return l.reduce((a,r)=>r.score>(a?.score??0)?r:a,l[0])},async exists(t){const s=await this.lookup({plate:t,sections:["basic"]});return s.ok&&s.availableSections.basic}},yt="https://api.whatsapp.com/send?phone=5548991414232",Pt=()=>{const[t,s]=c.useState(""),[l,a]=c.useState("empty"),[r,h]=c.useState(void 0),[o,u]=c.useState(null),[d,p]=c.useState([]),[N,k]=c.useState(!1),[j,y]=c.useState(!1),[S,A]=c.useState(!1),[m,z]=c.useState(!1),[I,D]=c.useState(0),[U,_]=c.useState(!1),[E,i]=c.useState(!1);c.useEffect(()=>{const n=localStorage.getItem("titico_vehicles");if(n)try{p(JSON.parse(n))}catch{console.error("Failed to parse saved vehicles")}},[]);const b=n=>{if(!V(n))return;const v={plate:n,addedAt:Date.now(),finalDigit:B(n)};if(d.some(P=>P.plate===n)){M.info("Ve√≠culo j√° est√° na garagem!");return}const g=[v,...d].slice(0,5);p(g),localStorage.setItem("titico_vehicles",JSON.stringify(g)),M.success("Ve√≠culo salvo na garagem!")},f=n=>{const v=d.filter(C=>C.plate!==n);p(v),localStorage.setItem("titico_vehicles",JSON.stringify(v)),M.info("Ve√≠culo removido.")};c.useEffect(()=>{if(V(t)){const n=B(t),v=ht(n);h(v),a("valid"),D(1),u(null),A(!1),z(!1)}else t.length===0&&a("empty"),h(void 0),D(0),u(null)},[t]);const w=async()=>{if(V(t)){y(!0),D(2);try{const n=await Nt.lookup({plate:t});n.ok&&n.data.basic?(u(n),a("valid"),D(3),n.cache.hit&&M.info("Dados do cache",{duration:2e3,icon:"üíæ"})):(a("error"),D(1),M.error(n.message??"Ve√≠culo n√£o encontrado"))}catch(n){console.error("Vehicle lookup error:",n),a("error"),D(1),M.error("Erro ao consultar. Tente novamente.")}finally{y(!1)}}},R=()=>{window.open(yt,"_blank")},Z=n=>s(n),[F,ee]=c.useState(!1),[te,ye]=c.useState(0);c.useEffect(()=>{const n=()=>{const v=window.scrollY;v>te&&v>50?ee(!0):ee(!1),ye(v)};return window.addEventListener("scroll",n,{passive:!0}),()=>window.removeEventListener("scroll",n)},[te]);const O=()=>{const n=o?.data.fipe?.dados;return n?.length?n.reduce((v,C)=>C.score>(v?.score??0)?C:v,n[0]):null},ke=()=>{const n=o?.data.extra;if(!n)return null;const v=[{icon:H,label:"Combust√≠vel",value:n.combustivel,show:!!n.combustivel},{icon:Ke,label:"Cilindradas",value:n.cilindradas?`${n.cilindradas} cc`:null,show:!!n.cilindradas},{icon:Ye,label:"Passageiros",value:n.quantidade_passageiro,show:!!n.quantidade_passageiro},{icon:We,label:"Nacionalidade",value:n.nacionalidade,show:!!n.nacionalidade},{icon:xe,label:"Esp√©cie",value:n.especie,show:!!n.especie},{icon:oe,label:"Tipo",value:n.tipo_veiculo,show:!!n.tipo_veiculo},{icon:xe,label:"Segmento",value:n.segmento,show:!!n.segmento},{icon:ie,label:"Munic√≠pio Faturado",value:n.municipio,show:!!n.municipio},{icon:me,label:"Chassi",value:n.chassi,show:!!n.chassi}].filter(g=>g.show&&g.value),C=[n.restricao_1,n.restricao_2,n.restricao_3,n.restricao_4].filter(g=>g&&!g.toUpperCase().includes("SEM RESTRICAO")&&!g.toUpperCase().includes("SEM RESTRI√á√ÉO"));return e.jsxs("div",{className:"space-y-2",children:[v.map((g,P)=>e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx(g.icon,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),e.jsxs("span",{className:"text-slate-400",children:[g.label,":"]}),e.jsx("span",{className:"text-white font-medium",children:g.value})]},P)),C.length>0&&e.jsxs("div",{className:"mt-3 p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-400 text-sm font-medium mb-1",children:[e.jsx(qe,{className:"w-4 h-4"}),"Restri√ß√µes"]}),C.map((g,P)=>e.jsx("p",{className:"text-amber-300 text-xs",children:g},P))]})]})},Ce=()=>{const n=o?.data.fipe?.dados;if(!n?.length)return null;const v=[...n].sort((g,P)=>P.score-g.score),C=v[0];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-400 text-xs font-medium mb-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Melhor Correspond√™ncia (Score: ",C.score,"%)"]}),e.jsx("p",{className:"text-white font-semibold text-lg",children:C.texto_valor}),e.jsx("p",{className:"text-slate-400 text-sm mt-1",children:C.texto_modelo}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-3 h-3"}),C.mes_referencia]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),C.combustivel]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"}),"FIPE: ",C.codigo_fipe]})]})]}),v.length>1&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Outras correspond√™ncias:"}),v.slice(1,4).map((g,P)=>e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white text-sm font-medium",children:g.texto_valor}),e.jsx("p",{className:"text-slate-400 text-xs truncate max-w-[200px]",children:g.texto_modelo})]}),e.jsxs("span",{className:"text-xs text-slate-500 bg-slate-700/50 px-2 py-1 rounded",children:[g.score,"%"]})]},P))]})]})};return e.jsxs("div",{className:"min-h-screen bg-[#101623] pb-40 font-sans relative overflow-x-hidden selection:bg-blue-500/30",children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none opacity-20",style:{backgroundImage:"radial-gradient(#256af4 1px, transparent 1px)",backgroundSize:"24px 24px"}}),e.jsxs("header",{className:"relative z-10 p-6 flex items-center justify-between",children:[e.jsxs("div",{onClick:()=>window.history.back(),className:"cursor-pointer",children:[e.jsx("h2",{className:"text-white text-2xl font-bold leading-none tracking-tight",children:"IPVA SC"}),e.jsx("span",{className:"text-blue-400 text-xs font-bold uppercase tracking-widest opacity-80",children:"Titico App"})]}),e.jsxs("div",{onClick:()=>k(!N),className:"w-10 h-10 rounded-full bg-[#1e293b] border border-white/10 flex items-center justify-center shadow-lg cursor-pointer hover:bg-slate-700 transition-colors relative",children:[e.jsx(Ve,{className:"w-5 h-5 text-blue-500"}),d.length>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-[10px] flex items-center justify-center text-white border-2 border-[#101623]",children:d.length})]})]}),N&&e.jsx("div",{className:"px-6 mb-6 animate-in slide-in-from-top-4 duration-300 relative z-30",children:e.jsxs("div",{className:"bg-[#1e293b]/90 backdrop-blur-md rounded-2xl border border-white/10 p-4 shadow-2xl",children:[e.jsxs("h3",{className:"text-white font-bold mb-3 flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5 text-yellow-400 fill-yellow-400"}),"Minha Garagem"]}),d.length===0?e.jsx("p",{className:"text-slate-400 text-sm py-2",children:"Nenhum ve√≠culo salvo ainda."}):e.jsx("div",{className:"space-y-3",children:d.map(n=>e.jsx(wt,{onSwipeRight:()=>f(n.plate),onSwipeLeft:()=>{s(n.plate),k(!1)},rightIcon:e.jsx(Ge,{className:"w-6 h-6 text-white"}),rightActionColor:"bg-red-500/80",leftIcon:e.jsx(Le,{className:"w-6 h-6 text-white"}),leftActionColor:"bg-blue-500/80",children:e.jsxs("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-white/5 transition-colors",onClick:()=>{s(n.plate),k(!1)},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center text-blue-400 font-bold",children:n.finalDigit}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-bold font-mono tracking-wider",children:L(n.plate)}),e.jsx("p",{className:"text-[10px] text-slate-400",children:"Tocar para consultar"})]})]}),e.jsx(Be,{className:"w-5 h-5 text-slate-500"})]})},n.plate))}),e.jsxs("div",{className:"mt-2 text-[10px] text-slate-500 text-center flex items-center justify-center gap-2 opacity-50",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx($e,{className:"w-3 h-3"})," Swipe"]}),e.jsx("span",{children:"para a√ß√µes"}),e.jsxs("span",{className:"flex items-center gap-1",children:["Swipe ",e.jsx(ne,{className:"w-3 h-3"})]})]})]})}),e.jsxs("main",{className:"relative z-10 px-6 flex flex-col w-full max-w-md mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 mt-4 animate-in slide-in-from-top-4 fade-in duration-500",children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-2 tracking-tight",children:"Consulta Veicular"}),e.jsx("p",{className:"text-slate-400 text-sm font-medium",children:"Digite sua placa e veja IPVA + licenciamento."})]}),e.jsx("div",{className:"mb-6 relative z-20",children:e.jsx(dt,{value:t,onChange:s,isValid:l==="valid",isLoading:j,hasError:l==="error",onOcrClick:()=>i(!0)})}),I===0&&e.jsx("div",{className:"flex gap-2 justify-center mb-8 animate-in fade-in duration-700 delay-150",children:e.jsxs("button",{onClick:()=>Z("OZL7H33"),className:"bg-slate-800/50 hover:bg-slate-700/80 border border-slate-700/50 backdrop-blur-sm text-slate-300 px-4 py-2 rounded-full text-xs font-medium flex items-center gap-2 transition-all hover:scale-105 active:scale-95 group",children:[e.jsx(Ze,{className:"w-4 h-4 text-blue-400 group-hover:rotate-180 transition-transform duration-500"}),"Preencher exemplo"]})}),e.jsx("div",{className:"mb-6",children:e.jsx(xt,{state:l})}),r&&I>=1&&e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"animate-in slide-in-from-bottom-8 fade-in duration-500 fill-mode-forwards",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3 px-1",children:[e.jsxs("h3",{className:"text-white font-bold flex items-center gap-2",children:[e.jsx(ge,{className:"w-5 h-5 text-blue-500"}),"Vencimentos ",e.jsxs("span",{className:"text-slate-500 text-sm font-normal",children:["(Final ",B(t),")"]})]}),I>=3&&e.jsxs("div",{className:"flex gap-2 animate-in fade-in zoom-in duration-300",children:[e.jsxs("button",{onClick:()=>b(t),className:"text-xs text-yellow-500 hover:text-yellow-400 flex items-center gap-1 font-medium px-2 py-1 rounded hover:bg-yellow-500/10 transition-colors",children:[e.jsx(le,{className:"w-4 h-4"}),"Salvar"]}),e.jsxs("button",{onClick:()=>_(!0),className:"text-xs text-pink-400 hover:text-pink-300 flex items-center gap-1 font-medium px-2 py-1 rounded hover:bg-pink-500/10 transition-colors",children:[e.jsx(je,{className:"w-4 h-4"}),"Card Viral"]})]})]}),e.jsx(ut,{dates:r})]}),I===1&&e.jsxs("div",{className:"animate-in slide-in-from-bottom-8 fade-in duration-500",children:[e.jsx("button",{onClick:w,disabled:j,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-500/20 transition-all duration-300 transform hover:scale-[1.02] active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed",children:j?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"w-5 h-5 animate-spin"}),"Buscando dados..."]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{className:"w-5 h-5"}),"Ver dados do ve√≠culo"]})}),e.jsx("p",{className:"text-center text-xs text-slate-500 mt-2",children:"Consulta marca, modelo, FIPE e mais detalhes"})]}),I>=3&&o?.data.basic&&e.jsx("div",{className:"animate-in slide-in-from-bottom-8 fade-in duration-500 fill-mode-forwards",children:e.jsxs("div",{className:"bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden shadow-xl",children:[e.jsxs("div",{className:"p-5 flex items-center gap-4 border-b border-white/5",children:[o.data.basic.logoUrl&&e.jsx("div",{className:"w-16 h-16 rounded-xl bg-white flex items-center justify-center p-2 shadow-lg",children:e.jsx("img",{src:o.data.basic.logoUrl,alt:o.data.basic.brand??"Logo",className:"w-full h-full object-contain",onError:n=>{n.target.style.display="none"}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-white font-bold text-lg leading-tight",children:o.data.basic.brand}),e.jsx("p",{className:"text-blue-400 font-medium",children:o.data.basic.model})]})]}),e.jsxs("div",{className:"p-5 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Ano"}),e.jsxs("p",{className:"text-white font-medium",children:[o.data.basic.ano??o.data.extra?.ano_fabricacao??"-","/",o.data.basic.anoModelo??o.data.extra?.ano_modelo??"-"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Cor"}),e.jsx("p",{className:"text-white font-medium",children:o.data.basic.color??"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"w-4 h-4 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Cidade/UF"}),e.jsxs("p",{className:"text-white font-medium",children:[o.data.basic.municipio??"-","/",o.data.basic.uf??"-"]})]})]}),o.data.extra?.combustivel&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500",children:"Combust√≠vel"}),e.jsx("p",{className:"text-white font-medium text-sm",children:o.data.extra.combustivel})]})]})]}),O()&&e.jsx("div",{className:"px-5 pb-4",children:e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-500/10 to-emerald-500/10 border border-green-500/20 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-green-400 font-medium flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3"}),"Valor FIPE"]}),e.jsx("p",{className:"text-white font-bold text-xl",children:O()?.texto_valor})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-xs text-slate-500 bg-slate-700/50 px-2 py-1 rounded",children:[O()?.score,"% match"]})})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:O()?.mes_referencia})]})}),o.data.extra&&Object.keys(o.data.extra).length>0&&e.jsxs("div",{className:"border-t border-white/5",children:[e.jsxs("button",{onClick:()=>A(!S),className:"w-full px-5 py-3 flex items-center justify-between text-slate-400 hover:bg-white/5 transition-colors",children:[e.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),"Informa√ß√µes detalhadas"]}),S?e.jsx(ce,{className:"w-4 h-4"}):e.jsx(de,{className:"w-4 h-4"})]}),S&&e.jsx("div",{className:"px-5 pb-5 animate-in slide-in-from-top-2 duration-200",children:ke()})]}),o.data.fipe?.dados&&o.data.fipe.dados.length>1&&e.jsxs("div",{className:"border-t border-white/5",children:[e.jsxs("button",{onClick:()=>z(!m),className:"w-full px-5 py-3 flex items-center justify-between text-slate-400 hover:bg-white/5 transition-colors",children:[e.jsxs("span",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Todas refer√™ncias FIPE (",o.data.fipe.dados.length,")"]}),m?e.jsx(ce,{className:"w-4 h-4"}):e.jsx(de,{className:"w-4 h-4"})]}),m&&e.jsx("div",{className:"px-5 pb-5 animate-in slide-in-from-top-2 duration-200",children:Ce()})]})]})}),I>=1&&e.jsx("div",{className:"text-[10px] text-slate-500 text-center pb-24 px-4 leading-relaxed opacity-60 animate-in fade-in duration-500",children:"Datas conforme tabela oficial SC. Consulte d√©bitos completos via WhatsApp."})]})]}),I>=1&&e.jsx("div",{className:x("fixed left-0 w-full z-40 p-4 transition-all duration-500 ease-in-out",F?"py-2 bg-[#101623]/95 backdrop-blur-md border-t border-white/5":"bg-gradient-to-t from-[#101623] via-[#101623]/95 to-transparent backdrop-blur-[2px]"),style:{bottom:"calc(var(--tab-bar-height, 5rem) + 0.5rem)"},children:e.jsxs("div",{className:"max-w-md mx-auto flex flex-col gap-2",children:[e.jsxs("button",{onClick:R,className:x("w-full flex items-center justify-center gap-2 bg-[#25D366] hover:bg-[#20bd5a] text-white font-bold rounded-xl shadow-[0_0_20px_rgba(37,211,102,0.3)] transition-all duration-500 transform active:scale-95 group relative overflow-hidden",F?"h-12 text-sm":"h-14"),children:[e.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),e.jsx(X,{icon:"mdi:whatsapp",width:F?"20":"24",height:F?"20":"24",className:"text-white relative z-10 transition-all"}),e.jsx("span",{className:"relative z-10 whitespace-nowrap",children:"Consultar d√©bitos"}),!F&&e.jsx(ne,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform relative z-10"})]}),e.jsxs("div",{className:x("flex items-center justify-center gap-2 text-[10px] text-slate-400 font-medium opacity-80 transition-all duration-300 overflow-hidden",F?"h-0 opacity-0":"h-auto opacity-100"),children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"w-3 h-3 text-green-500"})," Resposta r√°pida"]}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-600"}),e.jsx("span",{children:"Evita multa"}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-600"}),e.jsx("span",{children:"Sem enrola√ß√£o"})]})]})}),r&&e.jsx(ft,{isOpen:U,onClose:()=>_(!1),plate:t,schedule:r}),e.jsx(jt,{isOpen:E,onClose:()=>i(!1),onPlateSelected:n=>{s(n),i(!1)}})]})};export{Pt as default};
