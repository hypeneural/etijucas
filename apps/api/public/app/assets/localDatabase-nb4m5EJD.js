import{k as n,d as c,g as a,s,e as m}from"./index-C5loSG7w.js";const y=m("etijucas-reports","reports"),d=m("etijucas-topics","topics"),p=m("etijucas-comments","comments"),l=m("etijucas-sync","queue"),u=m("etijucas-events","events"),f=m("etijucas-tourism","spots"),w=m("etijucas-bairros","bairros");async function g(r,e,t){try{return await r()}catch(o){return console.warn(`[localDatabase] ${t}:`,o),e}}const h={async getAll(){return g(async()=>{const r=await n(y),e=[];for(const t of r){const o=await a(t,y);o&&e.push(o)}return e.sort((t,o)=>new Date(o.createdAt).getTime()-new Date(t.createdAt).getTime())},[],"Error getting reports")},async getById(r){return g(()=>a(r,y),void 0,"Error getting report by id")},async save(r){return g(()=>s(r.id,r,y),void 0,"Error saving report")},async saveMany(r){return g(async()=>{for(const e of r)await s(e.id,e,y)},void 0,"Error saving reports")},async delete(r){return g(()=>c(r,y),void 0,"Error deleting report")},async clear(){return g(async()=>{const r=await n(y);for(const e of r)await c(e,y)},void 0,"Error clearing reports")}},B={async getAll(){try{const r=await n(d),e=[];for(const t of r){const o=await a(t,d);o&&e.push(o)}return e.sort((t,o)=>new Date(o.createdAt).getTime()-new Date(t.createdAt).getTime())}catch(r){return console.error("Error getting topics from IndexedDB:",r),[]}},async getById(r){try{return await a(r,d)}catch(e){console.error("Error getting topic from IndexedDB:",e);return}},async save(r){try{await s(r.id,r,d)}catch(e){console.error("Error saving topic to IndexedDB:",e)}},async saveMany(r){try{for(const e of r)await s(e.id,e,d)}catch(e){console.error("Error saving topics to IndexedDB:",e)}},async update(r,e){try{const t=await a(r,d);if(t){const o={...t,...e};return await s(r,o,d),o}}catch(t){console.error("Error updating topic in IndexedDB:",t)}},async delete(r){try{await c(r,d)}catch(e){console.error("Error deleting topic from IndexedDB:",e)}}},E={async getByTopicId(r){try{const e=await n(p),t=[];for(const o of e){const i=await a(o,p);i&&i.topicId===r&&t.push(i)}return t.sort((o,i)=>new Date(o.createdAt).getTime()-new Date(i.createdAt).getTime())}catch(e){return console.error("Error getting comments from IndexedDB:",e),[]}},async save(r){try{await s(r.id,r,p)}catch(e){console.error("Error saving comment to IndexedDB:",e)}},async delete(r){try{await c(r,p)}catch(e){console.error("Error deleting comment from IndexedDB:",e)}}},I={async getAll(){try{const r=await n(l),e=[];for(const t of r){const o=await a(t,l);o&&e.push(o)}return e.sort((t,o)=>new Date(t.createdAt).getTime()-new Date(o.createdAt).getTime())}catch(r){return console.error("Error getting sync queue from IndexedDB:",r),[]}},async add(r){const e={...r,id:`sync-${Date.now()}-${Math.random().toString(36).slice(2)}`,createdAt:new Date,retryCount:0};try{await s(e.id,e,l)}catch(t){console.error("Error adding to sync queue:",t)}return e},async update(r,e){try{const t=await a(r,l);t&&await s(r,{...t,...e},l)}catch(t){console.error("Error updating sync queue item:",t)}},async remove(r){try{await c(r,l)}catch(e){console.error("Error removing from sync queue:",e)}},async clear(){try{const r=await n(l);for(const e of r)await c(e,l)}catch(r){console.error("Error clearing sync queue:",r)}},async exists(r){try{return(await this.getAll()).some(t=>t.idempotencyKey===r)}catch{return!1}}},x={async getAll(){try{const r=await n(u),e=[];for(const t of r){const o=await a(t,u);o&&e.push(o)}return e.sort((t,o)=>{const i=t.startDateTime||t.dateTime,D=o.startDateTime||o.dateTime;return!i||!D?0:new Date(i).getTime()-new Date(D).getTime()})}catch(r){return console.error("Error getting events from IndexedDB:",r),[]}},async getById(r){try{return await a(r,u)}catch(e){console.error("Error getting event from IndexedDB:",e);return}},async save(r){try{await s(r.id,r,u)}catch(e){console.error("Error saving event to IndexedDB:",e)}},async saveMany(r){try{for(const e of r)await s(e.id,e,u)}catch(e){console.error("Error saving events to IndexedDB:",e)}},async clear(){try{const r=await n(u);for(const e of r)await c(e,u)}catch(r){console.error("Error clearing events from IndexedDB:",r)}}},A={async getAll(){try{const r=await n(f),e=[];for(const t of r){const o=await a(t,f);o&&e.push(o)}return e}catch(r){return console.error("Error getting tourism spots from IndexedDB:",r),[]}},async saveMany(r){try{for(const e of r)await s(e.id,e,f)}catch(e){console.error("Error saving tourism spots to IndexedDB:",e)}},async clear(){try{const r=await n(f);for(const e of r)await c(e,f)}catch(r){console.error("Error clearing tourism spots from IndexedDB:",r)}}},T={async getAll(){try{const r=await n(w),e=[];for(const t of r){const o=await a(t,w);o&&e.push(o)}return e.sort((t,o)=>t.nome.localeCompare(o.nome,"pt-BR"))}catch(r){return console.error("Error getting bairros from IndexedDB:",r),[]}},async saveMany(r){try{for(const e of r)await s(e.id,e,w)}catch(e){console.error("Error saving bairros to IndexedDB:",e)}},async clear(){try{const r=await n(w);for(const e of r)await c(e,w)}catch(r){console.error("Error clearing bairros from IndexedDB:",r)}}};export{A as a,T as b,E as c,x as e,h as r,I as s,B as t};
