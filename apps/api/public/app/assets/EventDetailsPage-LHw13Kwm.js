import{aB as U,u as D,r as n,aC as H,aD as g,aE as K,j as e,m as t,aF as I,Y as A,au as b,as as L,U as q,n as J,ai as W,aG as Q,M as X,aH as Z,aI as ee,aJ as ae,z as se,aK as te,aL as ie,aM as re,aN as le,l as ne}from"./vendor-app-B8taUZN0.js";import{B as r}from"./button-CjHDq6e1.js";import{B as l}from"./badge-BbuTPJjn.js";import{C as S}from"./card-CQBU6rkv.js";import{u as oe,f as ce,a as de,A as me,b as xe,c as pe,d as he}from"./useEventFilters-ChC_QOAg.js";import{u as ue,c as o}from"./index-7lqVfN1E.js";import"./useHaptics-BLro82Ls.js";import"./useEventsApi-DPuXz4OH.js";import"./client-BdVdTjkU.js";import"./localDatabase-DOcQsLFS.js";import"./pt-BR-BbMsESwv.js";const ge=[{key:"instagram",icon:ae,label:"Instagram",color:"from-pink-500 to-purple-500"},{key:"whatsapp",icon:se,label:"WhatsApp",color:"from-green-500 to-green-600"},{key:"website",icon:te,label:"Site",color:"from-blue-500 to-blue-600"},{key:"youtube",icon:ie,label:"YouTube",color:"from-red-500 to-red-600"},{key:"tiktok",icon:re,label:"TikTok",color:"from-gray-800 to-black"}],be={show:"Show",festa:"Festa",cultura:"Cultura",infantil:"Infantil",gastronomico:"GastronÃ´mico",esportes:"Esportes"},fe={show:"bg-purple-500/20 text-purple-300 border-purple-500/30",festa:"bg-pink-500/20 text-pink-300 border-pink-500/30",cultura:"bg-amber-500/20 text-amber-300 border-amber-500/30",infantil:"bg-green-500/20 text-green-300 border-green-500/30",gastronomico:"bg-orange-500/20 text-orange-300 border-orange-500/30",esportes:"bg-blue-500/20 text-blue-300 border-blue-500/30"};function Se(){const{eventId:E}=U(),m=D(),{allEvents:h,toggleFavorite:$,isFavorite:f}=oe(),{toast:c}=ue(),[j,R]=n.useState(!1),[y,v]=n.useState(null),[d,z]=n.useState(!1),[G,M]=n.useState(!1),N=n.useRef(null),{scrollY:x}=H({container:N}),P=g(x,[0,200],[0,1]),B=g(x,[0,200],[1,1.1]),F=g(x,[0,300],[1,.3]);K(x,"change",s=>{M(s>150)});const a=h.find(s=>s.id===E),w=n.useMemo(()=>a?h.filter(s=>s.id!==a.id&&(s.category.slug===a.category.slug||s.venue?.bairro?.id===a.venue?.bairro?.id)).sort((s,i)=>i.popularityScore-s.popularityScore).slice(0,5):[],[h,a]);if(!a)return e.jsxs(t.div,{initial:{opacity:0},animate:{opacity:1},className:"min-h-screen bg-background flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"rounded-full bg-muted p-6",children:e.jsx(I,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Evento nÃ£o encontrado."}),e.jsx(r,{variant:"outline",onClick:()=>m(-1),children:"Voltar"})]});const u=async()=>{const s={title:a.title,text:`${a.title} â€¢ ${a.venue.name}`,url:window.location.href};if(navigator.share){try{await navigator.share(s),c({title:"Compartilhado!"})}catch{}return}if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(s.url),c({title:"Link copiado!",description:"Cole onde quiser compartilhar."})}catch{}},k=()=>{$(a.id);const s=!f(a.id);c({title:s?"Adicionado aos favoritos":"Removido dos favoritos",description:s?"VocÃª serÃ¡ notificado sobre este evento.":void 0})},O=()=>{z(!d),d||c({title:"ðŸŽ‰ PresenÃ§a confirmada!",description:"VocÃª receberÃ¡ lembretes sobre este evento."})},V=()=>{c({title:"Adicionado ao calendÃ¡rio",description:"Lembrete configurado para o dia do evento."})},_=a.ticket?.type==="free"?"GrÃ¡tis":`R$ ${a.ticket?.minPrice??0}`,C=f(a.id),Y=a.media?.bannerImageMobile??a.media?.bannerImage??a.media?.coverImage??a.coverImage??"/placeholder.svg",T=n.useMemo(()=>(a.media?.gallery??[]).map(i=>typeof i=="string"?i:i?.url).filter(i=>!!i),[a.media?.gallery]);return e.jsxs("div",{ref:N,className:"min-h-screen bg-background overflow-y-auto",children:[e.jsx(t.div,{style:{opacity:P},className:o("fixed top-0 left-0 right-0 z-50 border-b bg-background/95 backdrop-blur-xl",!G&&"pointer-events-none"),children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-top",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>m(-1),children:e.jsx(A,{className:"h-5 w-5"})}),e.jsx("p",{className:"text-sm font-medium truncate max-w-[50%]",children:a.title}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:u,children:e.jsx(b,{className:"h-4 w-4"})}),e.jsx(r,{variant:"ghost",size:"icon",onClick:k,children:e.jsx(L,{className:o("h-4 w-4",C&&"fill-red-500 text-red-500")})})]})]})}),e.jsxs("div",{className:"relative h-80 overflow-hidden",children:[e.jsx(t.img,{style:{scale:B,opacity:F},src:Y,alt:a.title,className:"h-full w-full object-cover origin-center"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-background via-background/20 to-transparent"}),e.jsxs(t.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"absolute top-4 left-4 right-4 flex items-center justify-between safe-top",children:[e.jsx(r,{variant:"ghost",size:"icon",onClick:()=>m(-1),className:"bg-black/40 hover:bg-black/60 text-white backdrop-blur-sm rounded-full h-10 w-10",children:e.jsx(A,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(t.div,{whileTap:{scale:.9},children:e.jsx(r,{variant:"ghost",size:"icon",onClick:u,className:"bg-black/40 hover:bg-black/60 text-white backdrop-blur-sm rounded-full h-10 w-10",children:e.jsx(b,{className:"h-5 w-5"})})}),e.jsx(t.div,{whileTap:{scale:.9},children:e.jsx(r,{variant:"ghost",size:"icon",onClick:k,className:"bg-black/40 hover:bg-black/60 text-white backdrop-blur-sm rounded-full h-10 w-10",children:e.jsx(L,{className:o("h-5 w-5 transition-all",C&&"fill-red-400 text-red-400 scale-110")})})})]})]}),e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"absolute bottom-4 left-4 right-4 text-white",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx(l,{className:o("border",fe[a.category.slug]||"bg-primary/20"),children:be[a.category.slug]??a.category.name}),e.jsx(l,{className:"bg-white/20 text-white border-white/30",children:_}),e.jsx(l,{className:"bg-white/20 text-white border-white/30",children:a.flags.ageRating})]}),e.jsx("h1",{className:"text-2xl font-bold leading-tight",children:a.title}),e.jsxs("p",{className:"text-sm text-white/80 mt-1 flex items-center gap-1",children:[e.jsx(q,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[a.popularityScore,"+ interessados"]})]})]})]}),e.jsxs("div",{className:"px-4 py-6 space-y-6",children:[e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-3 gap-3",children:[e.jsxs(t.button,{whileTap:{scale:.95},onClick:O,className:o("flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border transition-all",d?"bg-green-500/10 border-green-500/30 text-green-600":"bg-card border-border hover:bg-muted/50"),children:[e.jsx(J,{className:o("h-6 w-6",d&&"fill-green-500")}),e.jsx("span",{className:"text-xs font-medium",children:d?"Confirmado!":"Confirmar"})]}),e.jsxs(t.button,{whileTap:{scale:.95},onClick:V,className:"flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border bg-card border-border hover:bg-muted/50 transition-all",children:[e.jsx(W,{className:"h-6 w-6 text-primary"}),e.jsx("span",{className:"text-xs font-medium",children:"Lembrete"})]}),e.jsxs(t.button,{whileTap:{scale:.95},onClick:u,className:"flex flex-col items-center justify-center gap-2 p-4 rounded-2xl border bg-card border-border hover:bg-muted/50 transition-all",children:[e.jsx(b,{className:"h-6 w-6 text-primary"}),e.jsx("span",{className:"text-xs font-medium",children:"Compartilhar"})]})]}),e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},children:e.jsx(S,{className:"rounded-2xl p-4 bg-gradient-to-br from-card to-muted/30",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:e.jsx(I,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:ce(a.start)}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(Q,{className:"h-3.5 w-3.5"}),de(a.start,a.end)]})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10",children:e.jsx(X,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:a.venue?.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.venue?.bairro?.nome})]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a.venue.address)}`,"_blank"),children:[e.jsx(Z,{className:"h-3.5 w-3.5 mr-1"}),"Mapa"]})]})]})})}),a.ticket?.purchaseUrl&&e.jsx(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:e.jsxs(S,{className:"rounded-2xl p-4 bg-gradient-to-r from-primary/10 via-primary/5 to-transparent border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-primary/20",children:e.jsx(ee,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.ticket?.type==="free"?"Entrada Gratuita":`A partir de ${a.ticket?.minPrice?`R$ ${a.ticket.minPrice}`:"???"}`}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.ticket?.type==="free"?"Reserve seu lugar":"Garanta seu ingresso"})]})]}),e.jsx(r,{onClick:()=>window.open(a.ticket.purchaseUrl,"_blank"),children:a.ticket?.type==="free"?"Reservar":"Comprar"})]}),a.ticket?.lots&&a.ticket.lots.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-border/50 space-y-2",children:a.ticket.lots.map(s=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:s.name}),e.jsxs("span",{className:"font-medium",children:["R$ ",s.price]})]},s.name))})]})}),e.jsxs(t.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.45},className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Sobre o evento"}),e.jsx(l,{variant:"outline",className:"text-xs",children:a.organizer?.name??"Organizador"})]}),e.jsxs(t.div,{layout:!0,className:"rounded-2xl border bg-card p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:j?a.descriptionFull:a.descriptionShort}),e.jsx(r,{variant:"link",size:"sm",className:"px-0 mt-2",onClick:()=>R(s=>!s),children:j?"Ler menos":"Ler mais"})]})]}),(()=>{const s=Array.isArray(a.schedule)?a.schedule:a.schedule?.items;return!s||s.length===0?null:e.jsxs(t.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"space-y-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"ProgramaÃ§Ã£o"}),e.jsx(me,{type:"multiple",className:"space-y-2",children:s.map((i,p)=>e.jsxs(xe,{value:`${a.id}-${p}`,className:"border rounded-xl overflow-hidden",children:[e.jsx(pe,{className:"px-4 hover:no-underline",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-bold text-primary tabular-nums",children:i.time}),e.jsx("span",{className:"text-sm font-medium",children:i.title})]})}),i.description&&e.jsx(he,{className:"px-4 pb-4 pt-1 text-muted-foreground",children:i.description})]},`${a.id}-schedule-${p}`))})]})})(),e.jsxs(t.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.55},className:"flex flex-wrap gap-2",children:[a.flags.parking&&e.jsxs(l,{variant:"outline",className:"gap-1",children:[e.jsx("span",{className:"text-lg",children:"ðŸ…¿ï¸"})," Estacionamento"]}),a.flags.accessibility&&e.jsxs(l,{variant:"outline",className:"gap-1",children:[e.jsx("span",{className:"text-lg",children:"â™¿"})," AcessÃ­vel"]}),a.flags.outdoor&&e.jsxs(l,{variant:"outline",className:"gap-1",children:[e.jsx("span",{className:"text-lg",children:"ðŸŒ³"})," Ao ar livre"]}),a.flags.kids&&e.jsxs(l,{variant:"outline",className:"gap-1",children:[e.jsx("span",{className:"text-lg",children:"ðŸ‘¶"})," Kids"]})]}),a.links&&e.jsxs(t.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"space-y-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Links e redes"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[ge.map(s=>{const i=a.links[s.key];if(!i)return null;const p=s.icon;return e.jsxs(t.button,{whileTap:{scale:.95},onClick:()=>window.open(i,"_blank"),className:o("flex items-center gap-2 p-3 rounded-xl border bg-gradient-to-r",s.color,"text-white"),children:[e.jsx(p,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:s.label})]},s.key)}),a.links.other&&a.links.other.map((s,i)=>e.jsxs(t.button,{whileTap:{scale:.95},onClick:()=>window.open(s.url,"_blank"),className:"flex items-center gap-2 p-3 rounded-xl border bg-card hover:bg-muted/50",children:[e.jsx(le,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:s.label??"Link"})]},`other-${i}`))]})]}),T.length>0&&e.jsxs(t.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.65},className:"space-y-3",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Galeria"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:T.map((s,i)=>e.jsx(t.button,{whileTap:{scale:.95},whileHover:{scale:1.02},onClick:()=>v(s),className:"overflow-hidden rounded-2xl aspect-[4/3]",children:e.jsx("img",{src:s,alt:"Galeria do evento",className:"h-full w-full object-cover"})},`${a.id}-gallery-${i}`))})]}),w.length>0&&e.jsxs(t.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"space-y-3 pb-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-lg font-semibold",children:"VocÃª tambÃ©m pode curtir"})}),e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-4 px-4 snap-x snap-mandatory",children:w.map((s,i)=>e.jsxs(t.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.7+i*.05},whileTap:{scale:.96},onClick:()=>m(`/agenda/${s.id}`),className:"min-w-[180px] rounded-2xl border bg-card p-3 text-left shadow-card snap-start",children:[e.jsx("img",{src:s.media?.coverImage??s.coverImage??"/placeholder.svg",alt:s.title,className:"h-24 w-full rounded-xl object-cover"}),e.jsx("p",{className:"mt-2 text-sm font-semibold line-clamp-2",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.venue?.bairro?.nome??""})]},s.id))})]})]}),e.jsx(ne,{children:y&&e.jsx(t.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 px-6",onClick:()=>v(null),children:e.jsx(t.img,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:25},src:y,alt:"Evento",className:"max-h-[85vh] w-full rounded-2xl object-contain"})})})]})}export{Se as default};
