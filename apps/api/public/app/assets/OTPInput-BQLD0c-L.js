import{r,j as e}from"./vendor-ui-D9xZN4Ii.js";import{B as K}from"./button-C-OHlVEk.js";import{c as C}from"./index-Cp9zGyK_.js";import{m as i,k as _,y as q,A as E,p as G,i as H,z as V,S as W,D as J,F as I}from"./vendor-core-BXwV2Lc3.js";function Z({value:u,onChange:l,onComplete:h,onResend:S,error:n,expiresAt:y,disabled:j=!1,isResending:N=!1,isVerifying:b=!1,phone:w}){const d=r.useRef([]),F=r.useRef(null),[R,c]=r.useState(null),[v,P]=r.useState(0),[M,k]=r.useState(!1),[A,D]=r.useState(null),o=6,p=u.padEnd(o," ").split("").slice(0,o);r.useEffect(()=>{if(y){const t=()=>{const a=Math.max(0,Math.floor((y.getTime()-Date.now())/1e3));return P(a),a};t();const s=setInterval(()=>{t()===0&&clearInterval(s)},1e3);return()=>clearInterval(s)}},[y]),r.useEffect(()=>{if(n){k(!0);const t=setTimeout(()=>k(!1),600);return()=>clearTimeout(t)}},[n]),r.useEffect(()=>{const t=setTimeout(()=>{d.current[0]?.focus(),c(0)},300);return()=>clearTimeout(t)},[]),r.useEffect(()=>{if(u.length===o&&h&&!n&&!b){const t=setTimeout(()=>{h(u)},300);return()=>clearTimeout(t)}},[u,h,n,b]);const f=r.useCallback(t=>{D(t),setTimeout(()=>D(null),300)},[]),B=r.useCallback((t,s)=>{const a=s.replace(/\D/g,"").slice(-1);if(a){const m=[...p];m[t]=a;const x=m.join("").replace(/ /g,"");l(x),f(t),t<o-1&&setTimeout(()=>{d.current[t+1]?.focus(),c(t+1)},50)}},[p,l,f]),L=r.useCallback((t,s)=>{if(s.key==="Backspace"){s.preventDefault();const a=[...p];p[t]!==" "?(a[t]=" ",l(a.join("").replace(/ /g,""))):t>0&&(a[t-1]=" ",l(a.join("").replace(/ /g,"")),d.current[t-1]?.focus(),c(t-1))}s.key==="ArrowLeft"&&t>0&&(d.current[t-1]?.focus(),c(t-1)),s.key==="ArrowRight"&&t<o-1&&(d.current[t+1]?.focus(),c(t+1))},[p,l]),O=r.useCallback(t=>{t.preventDefault();const s=t.clipboardData.getData("text").replace(/\D/g,"").slice(0,o);if(s.length>0){l(s),s.split("").forEach((m,x)=>{setTimeout(()=>f(x),x*80)});const a=Math.min(s.length,o-1);setTimeout(()=>{d.current[a]?.focus(),c(a)},s.length*80+100)}},[l,f]),$=t=>{const s=Math.floor(t/60),a=t%60;return`${s}:${a.toString().padStart(2,"0")}`},T=u.length===o,z=u.length/o*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center space-y-3",children:[e.jsx(i.div,{animate:{scale:[1,1.05,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},className:"inline-flex p-4 rounded-2xl bg-gradient-to-br from-green-400 to-green-600 shadow-lg shadow-green-500/30",children:e.jsx(_,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl",children:"Verificação WhatsApp"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enviamos um código de 6 dígitos para"}),w&&e.jsxs(i.p,{initial:{opacity:0},animate:{opacity:1},className:"text-primary font-semibold flex items-center justify-center gap-1 mt-1",children:[e.jsx(q,{className:"h-4 w-4"}),w]})]})]}),e.jsx("div",{className:"relative h-1.5 bg-muted rounded-full overflow-hidden",children:e.jsx(i.div,{initial:{width:0},animate:{width:`${z}%`},transition:{duration:.3,ease:"easeOut"},className:C("absolute inset-y-0 left-0 rounded-full",T?"bg-gradient-to-r from-green-400 to-green-600":"bg-gradient-to-r from-primary to-primary/70")})}),e.jsx(i.div,{ref:F,animate:M?{x:[-12,12,-12,12,-6,6,0],transition:{duration:.5}}:{},className:"flex justify-center gap-2 sm:gap-3",children:p.map((t,s)=>{const a=t!==" ",m=R===s,x=A===s;return e.jsxs(i.div,{initial:{opacity:0,y:30,scale:.8},animate:{opacity:1,y:0,scale:x?1.1:1},transition:{delay:s*.08,duration:.3,scale:{duration:.15}},className:"relative",children:[m&&e.jsx(i.div,{layoutId:"otp-glow",className:"absolute -inset-1 rounded-2xl bg-primary/20 blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),e.jsx("input",{ref:g=>{d.current[s]=g},type:"text",inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",maxLength:1,value:t===" "?"":t,onChange:g=>B(s,g.target.value),onKeyDown:g=>L(s,g),onFocus:()=>c(s),onBlur:()=>c(null),onPaste:O,disabled:j,className:C("relative w-12 h-14 sm:w-14 sm:h-16 text-center text-2xl sm:text-3xl font-bold","rounded-xl sm:rounded-2xl border-2 outline-none","transition-all duration-200 ease-out","bg-background/50 backdrop-blur-sm",!a&&!m&&!n&&"border-border hover:border-muted-foreground/50",m&&!n&&"border-primary shadow-lg shadow-primary/20",a&&!n&&"border-green-400 bg-green-50/50 dark:bg-green-950/30 text-green-700 dark:text-green-300",n&&"border-red-400 bg-red-50/50 dark:bg-red-950/30 text-red-600",j&&"opacity-50 cursor-not-allowed")}),e.jsx(E,{children:a&&!n&&e.jsx(i.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-green-500 flex items-center justify-center shadow-sm",children:e.jsx(G,{className:"h-3 w-3 text-white"})})})]},s)})}),e.jsxs(E,{mode:"wait",children:[T&&!n&&e.jsx(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10},className:"flex items-center justify-center gap-2 p-3 rounded-xl bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800",children:b?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"h-5 w-5 text-green-600 dark:text-green-400 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Verificando código..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(i.div,{animate:{rotate:[0,360]},transition:{duration:.5},children:e.jsx(V,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Código completo!"}),e.jsx(W,{className:"h-4 w-4 text-green-500 animate-pulse"})]})},"success"),n&&e.jsxs(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10},className:"flex items-center justify-center gap-2 p-3 rounded-xl bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800",children:[e.jsx(J,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:n})]},"error")]}),e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center space-y-3",children:[v>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Não recebeu o código?"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-muted/50",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),e.jsxs("span",{className:"text-sm font-medium",children:["Reenviar em ",e.jsx("span",{className:"font-mono text-primary",children:$(v)})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Não recebeu o código?"}),e.jsx(K,{variant:"outline",size:"sm",onClick:S,disabled:N||j,className:"rounded-full px-6 border-primary/50 hover:bg-primary/10",children:N?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"Reenviar código"]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Dica: Cole o código automaticamente quando receber"})]})]})}export{Z as O};
