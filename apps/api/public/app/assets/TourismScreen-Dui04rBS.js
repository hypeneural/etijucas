import{r as h,j as e}from"./vendor-radix-i3jPA7eY.js";import{I as L}from"./input-hryC7RkY.js";import{B as x}from"./button-CzQZFubz.js";import{B as k}from"./badge-D2Pac-zB.js";import{S as M,d as I,a as E,b as H,c as U}from"./sheet-D_SkiT2l.js";import{S as j}from"./skeleton-BCTXaJeU.js";import{S as y,a as C}from"./scroll-area-DV0poE17.js";import{a as _,b as D,P as T,T as O}from"./tourism.types-BlBOYt1V.js";import{u as Q,X as q}from"./index-BDiq7wAJ.js";import{C as G}from"./clock-BcmZAVmQ.js";import{S as V}from"./search-DnIqa6Il.js";import{S as f}from"./star-DQT8KCgE.js";import{m as p,A as X}from"./vendor-motion-CFwwOuCD.js";import{M as z}from"./map-pin-0GriYRC7.js";import{S as J}from"./sliders-horizontal-iNFcqiVk.js";import{C as K}from"./circle-check-Vg-F9ZzD.js";import{B as W}from"./bookmark-CXowLr1P.js";import{H as Y}from"./heart-BTwWldlC.js";import{M as Z}from"./message-circle-DREug8Ln.js";import"./vendor-utils-DycLLelI.js";import"./vendor-query-1wfeA5IL.js";import"./localDatabase-C0mB-rzz.js";import"./client-KRu84Nbi.js";function B({rating:s,size:d="sm"}){const i=[],n=Math.floor(s),r=s%1>=.5,t=d==="sm"?"w-3 h-3":"w-4 h-4";for(let c=0;c<5;c++)c<n?i.push(e.jsx(f,{className:`${t} fill-yellow-400 text-yellow-400`},c)):c===n&&r?i.push(e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:`${t} text-gray-200`}),e.jsx(f,{className:`${t} fill-yellow-400 text-yellow-400 absolute top-0 left-0`,style:{clipPath:"inset(0 50% 0 0)"}})]},c)):i.push(e.jsx(f,{className:`${t} text-gray-200`},c));return e.jsx("div",{className:"flex items-center gap-0.5",children:i})}function ee({spot:s,onLike:d,onSave:i,onClick:n}){const r=O[s.categoria];return e.jsxs(p.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},whileTap:{scale:.98},onClick:n,className:"bg-card rounded-2xl overflow-hidden shadow-card cursor-pointer",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[e.jsx("img",{src:s.imageUrl,alt:s.titulo,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),e.jsxs("div",{className:"absolute top-3 left-3 right-3 flex items-start justify-between",children:[e.jsxs(k,{className:`${r?.color} text-xs`,children:[r?.icon," ",r?.label]}),e.jsxs("div",{className:"flex gap-2",children:[s.isVerificado&&e.jsx("div",{className:"bg-white/90 backdrop-blur rounded-full p-1.5",children:e.jsx(K,{className:"w-4 h-4 text-primary"})}),e.jsx(p.button,{whileTap:{scale:.85},onClick:t=>{t.stopPropagation(),i()},className:"bg-white/90 backdrop-blur rounded-full p-1.5",children:e.jsx(W,{className:`w-4 h-4 ${s.isSaved?"fill-primary text-primary":"text-gray-600"}`})})]})]}),e.jsxs("div",{className:"absolute bottom-3 left-3 right-3",children:[e.jsx("h3",{className:"text-white font-bold text-lg line-clamp-1 mb-1",children:s.titulo}),e.jsxs("div",{className:"flex items-center gap-2 text-white/90 text-sm",children:[e.jsx(z,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"line-clamp-1",children:s.bairroNome||s.endereco})]})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-3",children:s.descCurta}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{rating:s.rating}),e.jsx("span",{className:"text-sm font-medium",children:s.rating.toFixed(1)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",s.reviewsCount," avaliaÃ§Ãµes)"]})]})}),s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-3",children:[s.tags.slice(0,3).map(t=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-muted rounded-full text-muted-foreground",children:t},t)),s.tags.length>3&&e.jsxs("span",{className:"text-xs px-2 py-0.5 text-muted-foreground",children:["+",s.tags.length-3]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(p.button,{whileTap:{scale:.9},onClick:t=>{t.stopPropagation(),d()},className:"flex items-center gap-1.5 text-sm",children:[e.jsx(Y,{className:`w-4 h-4 ${s.liked?"fill-accent text-accent":"text-muted-foreground"}`}),e.jsx("span",{className:s.liked?"text-accent":"text-muted-foreground",children:s.likesCount})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(Z,{className:"w-4 h-4"}),e.jsx("span",{children:s.reviewsCount})]})]}),s.preco&&e.jsx("span",{className:"text-xs font-medium text-secondary",children:T[s.preco]?.label})]})]})]})}function w(){return e.jsxs("div",{className:"bg-card rounded-2xl overflow-hidden shadow-card",children:[e.jsx(j,{className:"aspect-[4/3] w-full"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx(j,{className:"h-4 w-full"}),e.jsx(j,{className:"h-3 w-3/4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{className:"h-6 w-16 rounded-full"}),e.jsx(j,{className:"h-6 w-16 rounded-full"})]})]})]})}function se({category:s,isActive:d,onClick:i}){const n=s==="todos"?{icon:"ðŸ—ºï¸",label:"Todos"}:O[s];return e.jsxs(p.button,{whileTap:{scale:.95},onClick:i,className:`
        flex items-center gap-1.5 px-3 py-2 rounded-full text-sm font-medium whitespace-nowrap
        transition-colors
        ${d?"bg-primary text-primary-foreground":"bg-card text-foreground border border-border"}
      `,children:[e.jsx("span",{children:n?.icon}),e.jsx("span",{children:n?.label})]})}function ae({filters:s,onChange:d,usedCategories:i,allTags:n}){const[r,t]=h.useState(s),[c,u]=h.useState(!1),g=()=>{d(r),u(!1)},v=()=>{const a={};t(a),d(a),u(!1)};return e.jsxs(M,{open:c,onOpenChange:u,children:[e.jsx(I,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(J,{className:"w-4 h-4"})})}),e.jsxs(E,{side:"bottom",className:"h-[80vh] rounded-t-3xl",children:[e.jsx(H,{children:e.jsx(U,{children:"Filtros"})}),e.jsx(y,{className:"h-[calc(100%-120px)] mt-4",children:e.jsxs("div",{className:"space-y-6 pb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Ordenar por"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(a=>e.jsx(x,{variant:r.sortBy===a.value?"default":"outline",size:"sm",onClick:()=>t(o=>({...o,sortBy:a.value})),children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"AvaliaÃ§Ã£o mÃ­nima"}),e.jsx("div",{className:"flex gap-2",children:[4.5,4,3.5,3].map(a=>e.jsxs(x,{variant:r.rating===a?"default":"outline",size:"sm",onClick:()=>t(o=>({...o,rating:o.rating===a?void 0:a})),className:"flex items-center gap-1",children:[e.jsx(f,{className:"w-3 h-3 fill-current"}),a,"+"]},a))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"PreÃ§o"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(T).map(([a,o])=>e.jsxs(x,{variant:r.preco===a?"default":"outline",size:"sm",onClick:()=>t(m=>({...m,preco:m.preco===a?void 0:a})),children:[o.icon," ",o.label]},a))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.slice(0,12).map(a=>e.jsx(x,{variant:r.tags?.includes(a)?"default":"outline",size:"sm",onClick:()=>t(o=>{const m=o.tags||[],N=m.includes(a)?m.filter(b=>b!==a):[...m,a];return{...o,tags:N.length?N:void 0}}),children:a},a))})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[e.jsx(x,{variant:"outline",className:"flex-1",onClick:v,children:"Limpar"}),e.jsx(x,{className:"flex-1",onClick:g,children:"Aplicar filtros"})]})]})]})}function ke({scrollRef:s}){const d=Q(),[i,n]=h.useState(""),[r,t]=h.useState("todos"),[c,u]=h.useState({}),g=h.useRef(null),v=h.useMemo(()=>({...c,categoria:r==="todos"?void 0:r,search:i||void 0}),[c,r,i]),{spots:a,featuredSpots:o,usedCategories:m,allTags:N,isLoading:b,likeSpot:P,saveSpot:R,isOnline:A}=_(v),S=h.useCallback(l=>{d(`/ponto-turistico/${l}`)},[d]),$=()=>{n(""),g.current?.focus()},F=["todos",...m];return e.jsxs("div",{ref:s,className:"h-full overflow-y-auto bg-background",children:[e.jsxs("div",{className:"sticky top-0 z-20 bg-background/95 backdrop-blur-sm safe-top border-b border-border",children:[e.jsxs("div",{className:"px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Pontos TurÃ­sticos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Descubra o melhor de Tijucas"})]}),!A&&e.jsxs(k,{variant:"secondary",className:"text-xs",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),"Offline"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(L,{ref:g,type:"text",placeholder:"Buscar lugares, atividades...",value:i,onChange:l=>n(l.target.value),className:"pl-10 pr-10 rounded-full bg-muted/50"}),i&&e.jsx("button",{onClick:$,className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(q,{className:"w-4 h-4 text-muted-foreground"})})]}),e.jsx(ae,{filters:c,onChange:u,usedCategories:m,allTags:N})]})]}),e.jsxs(y,{className:"px-4 pb-3",children:[e.jsx("div",{className:"flex gap-2",children:F.map(l=>e.jsx(se,{category:l,isActive:r===l,onClick:()=>t(l)},l))}),e.jsx(C,{orientation:"horizontal"})]})]}),e.jsxs("div",{className:"px-4 pb-24 mt-4",children:[!i&&r==="todos"&&!Object.keys(c).length&&o.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),"Destaques"]}),e.jsxs(y,{className:"-mx-4 px-4",children:[e.jsx("div",{className:"flex gap-3",children:o.map(l=>e.jsx(p.div,{whileTap:{scale:.98},onClick:()=>S(l.id),className:"w-[280px] shrink-0 bg-card rounded-2xl overflow-hidden shadow-card cursor-pointer",children:e.jsxs("div",{className:"relative aspect-[16/10]",children:[e.jsx("img",{src:l.imageUrl,alt:l.titulo,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent"}),e.jsxs("div",{className:"absolute bottom-3 left-3 right-3",children:[e.jsx("h3",{className:"text-white font-bold line-clamp-1",children:l.titulo}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(B,{rating:l.rating}),e.jsxs("span",{className:"text-white/80 text-xs",children:[l.rating.toFixed(1)," (",l.reviewsCount,")"]})]})]})]})},l.id))}),e.jsx(C,{orientation:"horizontal"})]})]}),!b&&e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," ",a.length===1?"lugar encontrado":"lugares encontrados"]})}),e.jsx(X,{mode:"popLayout",children:b?e.jsxs("div",{className:"space-y-4",children:[e.jsx(w,{}),e.jsx(w,{}),e.jsx(w,{})]}):a.length===0?e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[e.jsx(z,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"font-medium text-foreground mb-2",children:"Nenhum lugar encontrado"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Tente ajustar os filtros ou buscar por outro termo"}),e.jsx(x,{variant:"outline",onClick:()=>{n(""),t("todos"),u({})},children:"Limpar filtros"})]}):e.jsx("div",{className:"space-y-4",children:a.map(l=>e.jsx(ee,{spot:l,onLike:()=>P(l.id),onSave:()=>R(l.id),onClick:()=>S(l.id)},l.id))})})]})]})}export{ke as default};
