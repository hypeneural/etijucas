import{j as e,r as c}from"./vendor-radix-CQkmBfGK.js";import{f as K,u as q,p as C,d as k,m as H,i as X,h as G,l as Z,X as g,B as W,Q as V}from"./index-BHMDYAkL.js";import{B as h}from"./button-B2-CpamS.js";import{I as ee}from"./input-27FI8huz.js";import{B as f}from"./badge-BswxyE_a.js";import{T as se,a as ae,b as E}from"./tabs-Cx_FS55R.js";import{S as O,a as D,b as F,c as R,d as u}from"./select-BPQUiUMF.js";import{u as L}from"./vendor-query-BnSlUk-m.js";import"./sheet-D7Uch_v-.js";import{b as te}from"./votes--jqTh9CK.js";import{m as d,A as P}from"./vendor-motion-3m9Rluu3.js";import{T as re}from"./thumbs-up-BvaywDng.js";import{C as le}from"./clock-B3f3gsdz.js";import{C as ie}from"./circle-x-COcvXSaB.js";import{v as B}from"./votes.service-DI2zA78Y.js";import{A as ne}from"./arrow-left-BrfYu7ne.js";import{S as I}from"./search-738_hg3k.js";import{U as M}from"./users-CMNfQ78k.js";import{F as oe}from"./filter-1dKpfO1p.js";import"./vendor-utils-YRYEdvK0.js";import"./chevron-down-D_4YcjCI.js";import"./chevron-up-BCqaPC4_.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=K("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);function de({counts:s}){const l=s.sim+s.nao+s.abstencao+s.naoVotou;if(l===0)return null;const p=s.sim/l*100,n=s.nao/l*100,m=(s.abstencao+s.naoVotou)/l*100;return e.jsxs("div",{className:"h-1.5 w-full rounded-full overflow-hidden bg-muted flex",children:[e.jsx(d.div,{initial:{width:0},animate:{width:`${p}%`},transition:{duration:.6,delay:.2},className:"h-full bg-green-500"}),e.jsx(d.div,{initial:{width:0},animate:{width:`${n}%`},transition:{duration:.6,delay:.3},className:"h-full bg-red-500"}),m>0&&e.jsx(d.div,{initial:{width:0},animate:{width:`${m}%`},transition:{duration:.6,delay:.4},className:"h-full bg-gray-300 dark:bg-gray-600"})]})}function me({status:s}){switch(s){case"APROVADO":return e.jsx(X,{className:"w-3.5 h-3.5"});case"REJEITADO":return e.jsx(ie,{className:"w-3.5 h-3.5"});case"EM_ANDAMENTO":return e.jsx(le,{className:"w-3.5 h-3.5"})}}function xe({vote:s,index:l=0}){const p=q(),n=te[s.status],m=t=>new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}),i=()=>{p(`/votacao/${s.id}`)};return e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.05},whileTap:{scale:.98},onClick:i,className:k("bg-card rounded-2xl p-4 border shadow-card","cursor-pointer transition-all duration-200","hover:shadow-md hover:border-border/80","active:shadow-sm"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(C,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:m(s.date)})]}),e.jsxs(f,{className:k("gap-1 px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider border",n.bgColor,n.textColor,n.borderColor),children:[e.jsx(me,{status:s.status}),n.label]})]}),e.jsx("h3",{className:"text-lg font-bold text-foreground leading-tight mb-1.5 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed line-clamp-2 mb-4",children:s.summary}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/30",children:e.jsx(re,{className:"w-3 h-3 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:s.counts.sim})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/30",children:e.jsx(ce,{className:"w-3 h-3 text-red-600 dark:text-red-400"})}),e.jsx("span",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:s.counts.nao})]}),(s.counts.abstencao>0||s.counts.naoVotou>0)&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",s.counts.abstencao+s.counts.naoVotou," outros"]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-1 text-sm font-bold text-foreground",children:[e.jsx("span",{className:"text-green-600",children:s.counts.sim}),e.jsx("span",{className:"text-muted-foreground",children:"×"}),e.jsx("span",{className:"text-red-600",children:s.counts.nao})]})]}),e.jsx(de,{counts:s.counts}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border/50",children:[e.jsx("div",{className:"flex gap-1.5 flex-wrap",children:s.tags.slice(0,2).map(t=>e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-muted text-[10px] font-medium text-muted-foreground",children:t},t))}),e.jsxs(h,{variant:"ghost",size:"sm",className:"text-primary font-semibold gap-1 -mr-2",onClick:t=>{t.stopPropagation(),i()},children:["Ver votos",e.jsx(H,{className:"w-4 h-4"})]})]})]})}function ue(){return e.jsx("div",{className:"space-y-4 animate-pulse",children:[...Array(4)].map((s,l)=>e.jsxs("div",{className:"bg-card rounded-2xl p-4 border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"h-4 w-20 bg-muted rounded"}),e.jsx("div",{className:"h-5 w-16 bg-muted rounded-full"})]}),e.jsx("div",{className:"h-6 w-3/4 bg-muted rounded mb-2"}),e.jsx("div",{className:"h-4 w-full bg-muted rounded mb-1"}),e.jsx("div",{className:"h-4 w-2/3 bg-muted rounded mb-4"}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsx("div",{className:"h-6 w-12 bg-muted rounded"}),e.jsx("div",{className:"h-6 w-12 bg-muted rounded"})]}),e.jsx("div",{className:"h-1.5 w-full bg-muted rounded-full"})]},l))})}function Pe(){const s=q();G();const{activeTab:l,setActiveTab:p}=Z(),[n,m]=c.useState("votacoes"),[i,t]=c.useState(""),[r,N]=c.useState("all"),[o,b]=c.useState("all"),[z,_]=c.useState("all"),[v,A]=c.useState(!1),{data:Q,isLoading:j,error:w}=L({queryKey:V.votes.votacoes({status:r!=="all"?r:void 0,ano:o!=="all"?o:void 0,search:i||void 0}),queryFn:()=>B.getAll({status:r!=="all"?r:void 0,ano:o!=="all"?o:void 0,search:i||void 0,perPage:50}),staleTime:5*60*1e3}),{data:U}=L({queryKey:V.votes.anos,queryFn:()=>B.getAnos(),staleTime:60*60*1e3}),T=Q?.data||[],Y=U||[2026,2025],x=c.useMemo(()=>T.map(a=>({id:a.id,status:a.status,date:a.data,title:a.titulo,summary:a.subtitulo||"",counts:a.counts,tags:a.tags})),[T]),S=()=>{t(""),N("all"),b("all"),_("all"),A(!1)},$=a=>{p(a),s("/")},y=i||r!=="all"||o!=="all"||z!=="all";return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-muted/50",children:e.jsxs("div",{className:"relative w-full max-w-[420px] h-full bg-background overflow-hidden shadow-elevated",children:[e.jsxs("div",{className:"h-full overflow-y-auto pb-24",children:[e.jsxs("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-xl border-b",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-top",children:[e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>s(-1),children:e.jsx(ne,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-bold",children:"Câmara Municipal"}),e.jsx(h,{variant:"ghost",size:"icon",onClick:()=>A(!v),className:k(v&&"bg-primary/10 text-primary"),children:e.jsx(I,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"px-4 pb-3",children:e.jsx(se,{value:n,onValueChange:a=>{a==="vereadores"?s("/vereadores"):m(a)},children:e.jsxs(ae,{className:"w-full grid grid-cols-2",children:[e.jsxs(E,{value:"votacoes",className:"gap-2",children:[e.jsx(C,{className:"h-4 w-4"}),"Votações"]}),e.jsxs(E,{value:"vereadores",className:"gap-2",children:[e.jsx(M,{className:"h-4 w-4"}),"Vereadores"]})]})})})]}),e.jsxs("div",{className:"sticky top-28 z-30 bg-background/95 backdrop-blur-xl border-b px-4 py-3 space-y-3",children:[e.jsx(P,{children:v&&e.jsx(d.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(ee,{placeholder:"Buscar votação...",value:i,onChange:a=>t(a.target.value),className:"pl-10 pr-10",autoFocus:!0}),i&&e.jsx("button",{onClick:()=>t(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(g,{className:"h-4 w-4 text-muted-foreground hover:text-foreground"})})]})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsxs(O,{value:r,onValueChange:a=>N(a),children:[e.jsx(D,{className:"flex-1 h-9 text-xs",children:e.jsx(F,{placeholder:"Status"})}),e.jsxs(R,{children:[e.jsx(u,{value:"all",children:"Todos"}),e.jsx(u,{value:"APROVADO",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"Aprovados"]})}),e.jsx(u,{value:"REJEITADO",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"Rejeitados"]})}),e.jsx(u,{value:"EM_ANDAMENTO",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Em Andamento"]})})]})]}),e.jsxs(O,{value:o.toString(),onValueChange:a=>b(a==="all"?"all":parseInt(a)),children:[e.jsx(D,{className:"w-24 h-9 text-xs",children:e.jsx(F,{placeholder:"Ano"})}),e.jsxs(R,{children:[e.jsx(u,{value:"all",children:"Todos"}),Y.map(a=>e.jsx(u,{value:a.toString(),children:a},a))]})]})]}),y&&e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r!=="all"&&e.jsxs(f,{variant:"secondary",className:"gap-1 text-xs",children:[r==="APROVADO"&&"Aprovados",r==="REJEITADO"&&"Rejeitados",r==="EM_ANDAMENTO"&&"Em Andamento",e.jsx(g,{className:"h-3 w-3 cursor-pointer",onClick:()=>N("all")})]}),o!=="all"&&e.jsxs(f,{variant:"secondary",className:"gap-1 text-xs",children:[o,e.jsx(g,{className:"h-3 w-3 cursor-pointer",onClick:()=>b("all")})]}),i&&e.jsxs(f,{variant:"secondary",className:"gap-1 text-xs",children:['"',i,'"',e.jsx(g,{className:"h-3 w-3 cursor-pointer",onClick:()=>t("")})]}),e.jsx("button",{onClick:S,className:"text-xs text-primary font-medium ml-auto",children:"Limpar tudo"})]})]}),e.jsxs("main",{className:"px-4 py-5",children:[!j&&x.length>0&&e.jsx(d.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between mb-4",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:[x.length," ",x.length===1?"votação":"votações"]})}),j&&e.jsx(ue,{}),w&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground",children:"Erro ao carregar votações"}),e.jsx(h,{variant:"outline",size:"sm",className:"mt-4",onClick:()=>window.location.reload(),children:"Tentar novamente"})]}),!j&&!w&&x.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(C,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("p",{className:"font-medium text-foreground mb-1",children:"Nenhuma votação encontrada"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:y?"Tente ajustar os filtros de busca":"As votações aparecerão aqui quando forem registradas"}),y&&e.jsx(h,{variant:"outline",size:"sm",onClick:S,children:"Limpar filtros"}),e.jsx("div",{className:"mt-6 pt-6 border-t w-full",children:e.jsxs(h,{variant:"default",className:"w-full gap-2",onClick:()=>s("/vereadores"),children:[e.jsx(M,{className:"h-4 w-4"}),"Ver Vereadores"]})})]}),!j&&!w&&x.length>0&&e.jsx(P,{mode:"popLayout",children:e.jsx(d.div,{layout:!0,className:"space-y-4 pb-8",children:x.map((a,J)=>e.jsx(xe,{vote:a,index:J},a.id))})})]})]}),e.jsx(W,{activeTab:l,onTabChange:$})]})})}export{Pe as default};
