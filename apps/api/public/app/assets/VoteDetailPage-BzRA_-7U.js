import{j as e,r as g}from"./vendor-radix-DVNDhy8K.js";import{B as k}from"./button-Dhyx0Jqy.js";import{B as G}from"./badge-Bl9GUXaa.js";import{C as X}from"./card-Bic5sCMG.js";import{f as I,C as S,X as C,d as r,U as z,m as Q,o as L,n as Z,u as K,l as Y,i as ee,p as te,B as ae}from"./index-Dbd8THHx.js";import{m as x,A as se}from"./vendor-motion-BUrkef5A.js";import{V as re}from"./vote-CQSoW0FP.js";import{S as $}from"./search-BTvyhZpH.js";import{C as oe}from"./chevron-down-TZo6MVZ9.js";import{V as A,a as P}from"./votes-CdQdfeEO.js";import{S as ie,a as ne,b as le,c as de}from"./sheet-CzlRWsAq.js";import{F as ce}from"./file-text-DEnV-b53.js";import{S as F}from"./share-2-dwmmd6JU.js";import{E as R}from"./external-link-B4Zio8AK.js";import{U as me}from"./users-DnjdYnQX.js";import{C as xe}from"./circle-alert-DhQMaZmj.js";import{A as ue}from"./arrow-left-ChEuayjO.js";import{C as pe}from"./circle-x-BU-Qpvwl.js";import"./vendor-utils-Lf-MeoKe.js";import"./vendor-query-BBHVyEFd.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=I("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=I("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),ge=[{key:"sim",label:"Sim",icon:S,bgColor:"bg-green-50 dark:bg-green-950/30",iconBg:"bg-green-500",textColor:"text-green-700 dark:text-green-400",borderColor:"border-green-200 dark:border-green-800/50"},{key:"nao",label:"Não",icon:C,bgColor:"bg-red-50 dark:bg-red-950/30",iconBg:"bg-red-500",textColor:"text-red-700 dark:text-red-400",borderColor:"border-red-200 dark:border-red-800/50"},{key:"abstencao",label:"Abstenção",icon:T,bgColor:"bg-amber-50 dark:bg-amber-950/30",iconBg:"bg-amber-500",textColor:"text-amber-700 dark:text-amber-400",borderColor:"border-amber-200 dark:border-amber-800/50"},{key:"naoVotou",label:"Ausente",icon:O,bgColor:"bg-gray-50 dark:bg-gray-800/30",iconBg:"bg-gray-400",textColor:"text-gray-600 dark:text-gray-400",borderColor:"border-gray-200 dark:border-gray-700"}];function he({value:t,duration:s=1e3}){const[a,i]=g.useState(0);return g.useEffect(()=>{const l=Date.now(),o=0,m=()=>{const c=Date.now()-l,f=Math.min(c/s,1),n=1-Math.pow(1-f,3),b=Math.round(o+(t-o)*n);i(b),f<1&&requestAnimationFrame(m)};requestAnimationFrame(m)},[t,s]),e.jsx("span",{children:a})}function fe({counts:t,className:s}){return e.jsx("div",{className:r("grid grid-cols-4 gap-2",s),children:ge.map((a,i)=>{const l=a.icon,o=t[a.key];return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},className:r("flex flex-col items-center gap-1.5 p-3 rounded-xl border",a.bgColor,a.borderColor),children:[e.jsx("div",{className:r("flex items-center justify-center w-8 h-8 rounded-full",a.iconBg),children:e.jsx(l,{className:"w-4 h-4 text-white",strokeWidth:2.5})}),e.jsx("span",{className:r("text-2xl font-bold tabular-nums",a.textColor),children:e.jsx(he,{value:o,duration:800})}),e.jsx("span",{className:"text-[10px] font-medium text-muted-foreground uppercase tracking-wide",children:a.label})]},a.key)})})}function E({value:t,duration:s=1200}){const[a,i]=g.useState(0);return g.useEffect(()=>{const l=Date.now(),o=()=>{const m=Date.now()-l,c=Math.min(m/s,1),f=1-Math.pow(1-c,4),n=Math.round(t*f);i(n),c<1&&requestAnimationFrame(o)};requestAnimationFrame(o)},[t,s]),e.jsx("span",{children:a})}function be({counts:t,status:s,className:a}){const[i,l]=g.useState(0),o=g.useRef(null),m=t.sim+t.nao+t.abstencao+t.naoVotou,c=m>0?t.sim/m*100:0,f=m>0?t.nao/m*100:0;g.useEffect(()=>{const B=Date.now(),D=1500,y=()=>{const M=Date.now()-B,h=Math.min(M/D,1),v=1-Math.pow(1-h,3);l(v),h<1&&requestAnimationFrame(y)};requestAnimationFrame(y)},[]);const n=c*3.6*i,b=f*3.6*i,u=(100-c-f)*3.6*i,V=`conic-gradient(
    #22c55e 0deg ${n}deg,
    #ef4444 ${n}deg ${n+b}deg,
    #9ca3af ${n+b}deg ${n+b+u}deg,
    #e5e7eb ${n+b+u}deg 360deg
  )`;return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:r("flex items-center justify-between gap-4",a),children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx(x.span,{className:"text-5xl font-extrabold text-foreground tabular-nums tracking-tight",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15},children:e.jsx(E,{value:t.sim})}),e.jsx("span",{className:"text-2xl text-muted-foreground font-medium",children:"×"}),e.jsx(x.span,{className:"text-5xl font-extrabold text-foreground tabular-nums tracking-tight",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:200,damping:15,delay:.1},children:e.jsx(E,{value:t.nao})})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500"}),e.jsxs("span",{className:"text-green-600 dark:text-green-400 font-medium",children:[t.sim," ",t.sim===1?"voto":"votos"," Sim"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500"}),e.jsxs("span",{className:"text-red-600 dark:text-red-400 font-medium",children:[t.nao," ",t.nao===1?"voto":"votos"," Não"]})]}),(t.abstencao>0||t.naoVotou>0)&&e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-gray-400"}),e.jsxs("span",{className:"text-muted-foreground font-medium",children:[t.abstencao+t.naoVotou," outros"]})]})]})]}),e.jsx(x.div,{ref:o,initial:{scale:0,rotate:-90},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:100,damping:15,delay:.2},className:"relative w-28 h-28 shrink-0 rounded-full flex items-center justify-center",style:{background:V},children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-card flex items-center justify-center shadow-inner",children:e.jsx(re,{className:"w-7 h-7 text-muted-foreground"})})})]})}const je=[{value:"all",label:"Todos"},{value:"SIM",label:"Sim"},{value:"NAO",label:"Não"},{value:"ABSTENCAO",label:"Abstenção"},{value:"NAO_VOTOU",label:"Ausente"}];function ve({searchQuery:t,onSearchChange:s,selectedParty:a,onPartyChange:i,selectedVote:l,onVoteChange:o,sortBy:m,onSortChange:c,availableParties:f,className:n}){const[b,j]=g.useState(!1);return e.jsxs("div",{className:r("flex flex-col gap-3",n),children:[e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",value:t,onChange:u=>s(u.target.value),placeholder:"Buscar vereador...",className:r("w-full h-11 pl-10 pr-10 rounded-xl border bg-card","text-sm placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary","transition-all duration-200")}),t&&e.jsx("button",{onClick:()=>s(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-muted transition-colors",children:e.jsx(C,{className:"w-4 h-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsxs("button",{onClick:()=>j(!b),className:r("w-full h-10 px-3 rounded-lg border bg-card","flex items-center justify-between gap-2","text-sm font-medium transition-colors",a!=="all"&&"border-primary/30 bg-primary/5"),children:[e.jsx("span",{className:"truncate",children:a==="all"?"Todos os Partidos":a}),e.jsx(oe,{className:r("w-4 h-4 text-muted-foreground transition-transform",b&&"rotate-180")})]}),b&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>j(!1)}),e.jsxs(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full left-0 right-0 mt-1 p-1 rounded-lg border bg-card shadow-lg z-20 max-h-48 overflow-auto",children:[e.jsx("button",{onClick:()=>{i("all"),j(!1)},className:r("w-full px-3 py-2 text-left text-sm rounded-md transition-colors",a==="all"?"bg-primary/10 text-primary":"hover:bg-muted"),children:"Todos os Partidos"}),f.map(u=>e.jsx("button",{onClick:()=>{i(u),j(!1)},className:r("w-full px-3 py-2 text-left text-sm rounded-md transition-colors",a===u?"bg-primary/10 text-primary":"hover:bg-muted"),children:u},u))]})]})]}),e.jsx("button",{onClick:()=>c(m==="relevance"?"alphabetical":"relevance"),className:r("h-10 px-3 rounded-lg border bg-card","text-xs font-medium transition-colors whitespace-nowrap","hover:bg-muted"),children:m==="relevance"?"A-Z":"⭐"})]}),e.jsx("div",{className:"flex p-1 bg-muted rounded-xl",children:je.map(u=>e.jsxs("button",{onClick:()=>o(u.value),className:r("relative flex-1 py-2 text-xs font-medium rounded-lg transition-all duration-200",l===u.value?"text-foreground":"text-muted-foreground hover:text-foreground/70"),children:[l===u.value&&e.jsx(x.div,{layoutId:"vote-tab-indicator",className:"absolute inset-0 bg-card rounded-lg shadow-sm",transition:{type:"spring",stiffness:400,damping:30}}),e.jsx("span",{className:"relative z-10",children:u.label})]},u.value))})]})}function ye({vote:t}){const s=A[t],a={SIM:S,NAO:C,ABSTENCAO:T,NAO_VOTOU:O}[t];return e.jsxs(x.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:400,damping:25},className:"flex flex-col items-center gap-1",children:[e.jsx("div",{className:r("flex items-center justify-center w-12 h-12 rounded-full","shadow-lg transition-transform duration-200",s.bgColor),children:e.jsx(a,{className:"w-6 h-6 text-white",strokeWidth:2.5})}),e.jsx("span",{className:r("text-xs font-bold uppercase tracking-wide",s.color),children:s.label})]})}function Ne({text:t,query:s}){if(!s||s.trim()==="")return e.jsx("span",{children:t});const a=new RegExp(`(${s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi"),i=t.split(a);return e.jsx("span",{children:i.map((l,o)=>a.test(l)?e.jsx("mark",{className:"bg-primary/20 text-primary rounded px-0.5",children:l},o):e.jsx("span",{children:l},o))})}function we({councilor:t,searchQuery:s,onClick:a,index:i=0}){const l=A[t.vote],o=t.vote==="NAO_VOTOU",m=t.party==="???"||!t.party?"—":t.party;return e.jsxs(x.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},transition:{delay:i*.04,type:"spring",stiffness:300,damping:25},whileTap:{scale:.97},whileHover:{y:-2},onClick:a,className:r("group relative w-full flex items-center gap-4 p-4 pl-5","bg-card rounded-2xl border transition-all duration-200","text-left shadow-card","hover:shadow-lg hover:border-primary/20","overflow-hidden",o&&"opacity-60"),children:[e.jsx(x.div,{initial:{height:0},animate:{height:"100%"},transition:{delay:i*.04+.1,duration:.3},className:r("absolute left-0 top-0 bottom-0 w-1.5 rounded-l-2xl",o?"bg-gray-300 dark:bg-gray-600":l.accentColor)}),e.jsxs("div",{className:"relative shrink-0",children:[e.jsxs(x.div,{initial:{scale:0},animate:{scale:1},transition:{delay:i*.04+.05,type:"spring",stiffness:400},className:r("w-14 h-14 rounded-full overflow-hidden","ring-2 ring-offset-2 ring-offset-card",o?"ring-gray-300 dark:ring-gray-600":l.borderColor.replace("border-","ring-")),children:[t.photoUrl?e.jsx("img",{src:t.photoUrl,alt:t.name,className:r("w-full h-full object-cover",o&&"grayscale opacity-60"),onError:c=>{c.currentTarget.style.display="none",c.currentTarget.nextElementSibling?.classList.remove("hidden")}}):null,e.jsx("div",{className:r("absolute inset-0 bg-muted flex items-center justify-center",t.photoUrl?"hidden":"",o&&"bg-gray-100 dark:bg-gray-800"),children:e.jsx(z,{className:r("w-7 h-7",o?"text-gray-400":"text-muted-foreground")})})]}),e.jsxs("div",{className:r("absolute -bottom-0.5 -right-0.5 w-5 h-5 rounded-full","flex items-center justify-center ring-2 ring-card",l.bgColor),children:[t.vote==="SIM"&&e.jsx(S,{className:"w-3 h-3 text-white",strokeWidth:3}),t.vote==="NAO"&&e.jsx(C,{className:"w-3 h-3 text-white",strokeWidth:3}),t.vote==="ABSTENCAO"&&e.jsx(T,{className:"w-3 h-3 text-white",strokeWidth:3}),t.vote==="NAO_VOTOU"&&e.jsx(O,{className:"w-3 h-3 text-white",strokeWidth:3})]})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:r("text-base font-bold leading-tight truncate",o?"text-muted-foreground":"text-foreground"),children:e.jsx(Ne,{text:t.name,query:s})}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-0.5 flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:m}),e.jsx("span",{className:"text-border",children:"•"}),e.jsx("span",{className:r("font-semibold",l.color),children:l.label})]})]}),e.jsx(ye,{vote:t.vote}),e.jsx(Q,{className:"w-5 h-5 text-muted-foreground/50 group-hover:text-primary transition-colors"})]})}function Ce({vote:t}){const s=A[t],a={SIM:S,NAO:C,ABSTENCAO:T,NAO_VOTOU:O}[t];return e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("div",{className:r("flex items-center justify-center w-16 h-16 rounded-full",s.bgColor),children:e.jsx(a,{className:"w-8 h-8 text-white",strokeWidth:2.5})}),e.jsx("span",{className:r("text-sm font-bold uppercase tracking-wide",s.color),children:s.label})]})}function ke({councilor:t,isOpen:s,onClose:a,voteTitle:i}){const{toast:l}=L();if(!t)return null;const o=A[t.vote],m=t.vote==="NAO_VOTOU",c=t.party==="???"||!t.party?"—":t.party,f=async()=>{const n=`${t.name} (${c}) votou ${o.label} em "${i||"votação"}"`;if(navigator.share)try{await navigator.share({title:"Voto do Vereador",text:n,url:window.location.href})}catch{}else navigator.clipboard&&(await navigator.clipboard.writeText(`${n}
${window.location.href}`),l({title:"Copiado!",description:"Texto copiado para compartilhar."}))};return e.jsx(ie,{open:s,onOpenChange:n=>!n&&a(),children:e.jsxs(ne,{side:"bottom",className:"rounded-t-3xl px-6 pb-8 pt-4 max-h-[80vh]",children:[e.jsx("div",{className:"w-12 h-1 bg-muted rounded-full mx-auto mb-4"}),e.jsxs(le,{className:"text-center pb-4",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsxs("div",{className:r("relative w-20 h-20 rounded-full overflow-hidden","border-3",m?"border-gray-200 dark:border-gray-700":o.borderColor),children:[t.photoUrl?e.jsx("img",{src:t.photoUrl,alt:t.name,className:r("w-full h-full object-cover",m&&"grayscale opacity-70"),onError:n=>{n.currentTarget.style.display="none",n.currentTarget.nextElementSibling?.classList.remove("hidden")}}):null,e.jsx("div",{className:r("absolute inset-0 bg-muted flex items-center justify-center",t.photoUrl?"hidden":""),children:e.jsx(z,{className:"w-10 h-10 text-muted-foreground"})})]})}),e.jsx(de,{className:"text-xl",children:t.name}),e.jsxs("p",{className:"text-muted-foreground font-medium",children:[c," • Vereador"]})]}),e.jsx("div",{className:"flex justify-center py-4 border-y border-border",children:e.jsx(Ce,{vote:t.vote})}),t.justification&&e.jsxs("div",{className:"mt-4 p-4 rounded-xl bg-muted/50 border",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium text-muted-foreground mb-2",children:[e.jsx(ce,{className:"w-4 h-4"}),"Justificativa"]}),e.jsx("p",{className:"text-sm leading-relaxed",children:t.justification})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs(k,{onClick:f,className:"flex-1 h-12 gap-2",variant:"default",children:[e.jsx(F,{className:"w-4 h-4"}),"Compartilhar voto"]}),t.videoUrl&&e.jsxs(k,{onClick:()=>window.open(t.videoUrl,"_blank"),variant:"outline",className:"h-12 gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Vídeo"]})]}),e.jsx("p",{className:"text-center text-xs text-muted-foreground mt-4",children:"Dados sujeitos à fonte oficial da Câmara"})]})})}function Se({type:t="no-results",message:s,className:a}){const i=t==="no-results";return e.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:r("flex flex-col items-center justify-center py-12 px-6 text-center",a),children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:i?e.jsx($,{className:"w-7 h-7 text-muted-foreground"}):e.jsx(me,{className:"w-7 h-7 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-1",children:i?"Nenhum resultado":"Sem dados"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-[260px]",children:s||(i?"Nenhum vereador encontrado com os filtros selecionados.":"Não há dados de votação disponíveis no momento.")})]})}function Ae({source:t,className:s}){return e.jsxs("div",{className:r("flex flex-col items-center gap-2 pt-6 pb-4 text-center",s),children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(xe,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:"Dados sujeitos à fonte oficial"})]}),e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:r("inline-flex items-center gap-1.5 px-3 py-1.5","text-sm font-medium text-primary","rounded-full border border-primary/20 bg-primary/5","hover:bg-primary/10 transition-colors"),children:[e.jsx(R,{className:"w-3.5 h-3.5"}),t.label]})]})}const Oe={title:"Aumento do IPTU",subtitle:"Projeto aprovado por 6 a 5",date:"2026-01-20",description:"Votação referente ao projeto de reajuste do IPTU em Tijucas. O projeto prevê atualização da planta genérica de valores e reajuste progressivo ao longo de 3 anos.",source:{label:"Fonte oficial",url:"https://exemplo.tijucas.sc.gov.br/ata-ou-projeto"},counts:{sim:6,nao:5,abstencao:1,naoVotou:1}},Te=[{id:"ecio-helio",name:"Écio Hélio de Melo",party:"PL",vote:"SIM",photoUrl:"/img/vereadores/ecio.jpg"},{id:"julio-bucoski",name:"Júlio Cesar Bucoski",party:"PP",vote:"SIM",photoUrl:"/img/vereadores/julio.jpg"},{id:"maria-edesia",name:"Maria Edésia da Silva Vargas",party:"MDB",vote:"SIM",photoUrl:"/img/vereadores/maria.jpg"},{id:"mauricio-poli",name:"Maurício Poli",party:"MDB",vote:"SIM",photoUrl:"/img/vereadores/mauricio.jpg"},{id:"nadir-olindina",name:"Nadir Olindina Amorim",party:"MDB",vote:"SIM",photoUrl:"/img/vereadores/nadir.jpg"},{id:"paulo-cesar",name:"Paulo Cesar Pereira",party:"MDB",vote:"SIM",photoUrl:"/img/vereadores/paulo.jpg"},{id:"esau-bayer",name:"Esaú Bayer",party:"PL",vote:"NAO",photoUrl:"/img/vereadores/esau.jpg"},{id:"fabiano-morfelle",name:"Fabiano Morfelle",party:"MDB",vote:"NAO",photoUrl:"/img/vereadores/fabiano.jpg"},{id:"jose-vicente",name:"José Vicente de Souza e Silva",party:"PL",vote:"NAO",photoUrl:"/img/vereadores/jose.jpg"},{id:"lizandra-dadam",name:"Lizandra Dadam",party:"PDT",vote:"NAO",photoUrl:"/img/vereadores/lizandra.jpg"},{id:"renato-laurindo",name:"Renato Laurindo Júnior",party:"PSDB",vote:"NAO",photoUrl:"/img/vereadores/renato.jpg"},{id:"claudio-souza",name:"Cláudio Eduardo de Souza",party:"MDB",vote:"ABSTENCAO",photoUrl:"/img/vereadores/claudio.jpg",justification:"Conflito de interesse por ser proprietário de imóveis na região afetada."},{id:"flavio-souza",name:"Flávio Henrique Souza",party:"MDB",vote:"NAO_VOTOU",photoUrl:"/img/vereadores/flavio.jpg"}],Ve={vote:Oe,councilors:Te},Be=Ve;function Ke(){const{id:t}=Z(),s=K(),{toast:a}=L(),{activeTab:i,setActiveTab:l}=Y(),[o,m]=g.useState(""),[c,f]=g.useState("all"),[n,b]=g.useState("all"),[j,u]=g.useState("relevance"),[V,B]=g.useState(null),[D,y]=g.useState(!1),M=Be,{vote:h,councilors:v}=M,_=g.useMemo(()=>{const d=new Set(v.map(p=>p.party).filter(p=>p&&p!=="???"));return Array.from(d).sort()},[v]),N=h.counts.sim>h.counts.nao?"approved":"rejected",U=g.useMemo(()=>{let d=[...v];if(o.trim()){const p=o.toLowerCase();d=d.filter(w=>w.name.toLowerCase().includes(p))}return c!=="all"&&(d=d.filter(p=>p.party===c)),n!=="all"&&(d=d.filter(p=>p.vote===n)),j==="alphabetical"?d.sort((p,w)=>p.name.localeCompare(w.name,"pt-BR")):d.sort((p,w)=>P[p.vote]-P[w.vote]),d},[v,o,c,n,j]),q=async()=>{const d={title:h.title,text:`${h.title} • ${h.subtitle}`,url:window.location.href};if(navigator.share)try{await navigator.share(d)}catch{}else navigator.clipboard&&(await navigator.clipboard.writeText(d.url),a({title:"Link copiado!",description:"Cole onde quiser compartilhar."}))},W=d=>{B(d),y(!0)},H=d=>{l(d),s("/")},J=d=>new Date(d).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"});return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-muted/50",children:e.jsxs("div",{className:"relative w-full max-w-[420px] h-full bg-background overflow-hidden shadow-elevated",children:[e.jsxs("div",{className:"h-full overflow-y-auto pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-xl border-b",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-top",children:[e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>s(-1),children:e.jsx(ue,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-bold",children:"Detalhes da Votação"}),e.jsx(k,{variant:"ghost",size:"icon",onClick:q,children:e.jsx(F,{className:"h-5 w-5"})})]})}),e.jsxs("main",{className:"px-4 py-5 space-y-6",children:[e.jsx(x.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(X,{className:"rounded-2xl p-5 bg-gradient-to-br from-card to-muted/30 border shadow-card overflow-hidden relative",children:[e.jsx("div",{className:r("absolute top-0 left-0 right-0 h-1",N==="approved"?"bg-green-500":"bg-red-500")}),e.jsxs("div",{className:"flex items-center justify-between mb-4 pt-1",children:[e.jsxs(G,{className:r("gap-1.5 px-3 py-1.5 text-xs font-bold uppercase tracking-wider",N==="approved"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 border-red-200 dark:border-red-800"),children:[N==="approved"?e.jsx(ee,{className:"w-3.5 h-3.5"}):e.jsx(pe,{className:"w-3.5 h-3.5"}),N==="approved"?"Aprovado":"Rejeitado"]}),e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(te,{className:"w-3.5 h-3.5"}),J(h.date)]})]}),e.jsx(x.h2,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:"text-2xl font-bold text-foreground leading-tight mb-2",children:h.title}),e.jsx(x.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"text-sm text-muted-foreground leading-relaxed mb-5",children:h.description}),e.jsx("div",{className:"h-px w-full bg-border mb-5"}),e.jsx(be,{counts:h.counts,status:N})]})}),e.jsx(x.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsx(fe,{counts:h.counts})}),e.jsx(x.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"sticky top-14 z-30 -mx-4 px-4 py-3 bg-background/95 backdrop-blur-xl border-y",children:e.jsx(ve,{searchQuery:o,onSearchChange:m,selectedParty:c,onPartyChange:f,selectedVote:n,onVoteChange:b,sortBy:j,onSortChange:u,availableParties:_})}),e.jsxs("section",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-base font-bold text-foreground",children:"Votos dos Vereadores"}),e.jsxs("span",{className:"text-sm text-muted-foreground font-medium",children:[U.length," de ",v.length]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Sim"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Não"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),e.jsx("span",{className:"text-muted-foreground",children:"Abstenção"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-400"}),e.jsx("span",{className:"text-muted-foreground",children:"Ausente"})]})]}),e.jsx(se,{mode:"popLayout",children:U.length===0?e.jsx(Se,{type:"no-results"}):e.jsx(x.div,{layout:!0,className:"space-y-3",children:U.map((d,p)=>e.jsx(we,{councilor:d,searchQuery:o,onClick:()=>W(d),index:p},d.id))})})]}),e.jsx(Ae,{source:h.source})]})]}),e.jsx(ae,{activeTab:i,onTabChange:H}),e.jsx(ke,{councilor:V,isOpen:D,onClose:()=>y(!1),voteTitle:h.title})]})})}export{Ke as default};
