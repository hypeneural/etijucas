import{j as e,r as x}from"./vendor-radix-CZ2RePwe.js";import{T as ge,a as fe,b as U,c as q}from"./tabs-C8NI3tAi.js";import{B as h}from"./badge-C6gq_Km6.js";import{B as g}from"./button-D2wuDMkr.js";import{I}from"./input-Dnb3YKlu.js";import{S as V}from"./skeleton-CvSEqxvX.js";import{S as B}from"./separator-BdkZRBmp.js";import{S as se,a as je}from"./scroll-area-C8xyXm9M.js";import{C as Q}from"./card-BURMFnhu.js";import{d as f,M as W,l as be,o as ve,u as Ne,m as ye}from"./index-BKTFz27l.js";import{a as we,e as ke,A as Ce,b as T,c as D,d as E,u as Se,i as K,g as Te,h as O,f as De,j as Ee,k as Pe,l as Ae}from"./useEventFilters-B1hnUMaP.js";import{m as p,A as Me}from"./vendor-motion-DKd-IkFU.js";import{H as Y}from"./heart-DY0xqdTN.js";import{C as J}from"./clock-llOhz8mE.js";import{U as Re}from"./users-bgja7S3_.js";import{S as Oe}from"./share-2-Bd0_fukE.js";import{T as Fe}from"./useEventsApi-CZRsiCLa.js";import{D as $e,a as Be,b as Ie,c as ze,d as Le}from"./drawer-iAkPMcOL.js";import{S as He}from"./slider-CNeQswiO.js";import{l as Ge,m as _e,n as Ue,o as qe,q as Ve,f as X,k as Qe,r as We}from"./vendor-utils-BtjSOnCr.js";import{B as Ke}from"./bell-Ce7TJJFr.js";import{S as Ye}from"./search-04o261w-.js";import{F as Je}from"./filter-F49yOQXQ.js";import{C as Xe}from"./chevron-left-DRJiosro.js";import{p as Ze}from"./pt-BR-BtDG0OJ_.js";import"./useHaptics-QdUZx3l_.js";import"./vendor-query-CX3RJjg_.js";import"./chevron-down-sBR43Dcq.js";const Z={show:"bg-purple-500/10 text-purple-600 border-purple-200",festa:"bg-pink-500/10 text-pink-600 border-pink-200",cultura:"bg-amber-500/10 text-amber-600 border-amber-200",infantil:"bg-green-500/10 text-green-600 border-green-200",gastronomico:"bg-orange-500/10 text-orange-600 border-orange-200",esportes:"bg-blue-500/10 text-blue-600 border-blue-200"};function ee({event:r,isFavorite:n,onToggleFavorite:v,onOpen:C,variant:o="default"}){const u=r.ticket?.type==="free",P=u?"Grátis":`R$ ${r.ticket?.minPrice??0}`,A=we(r.start,r.end),l=typeof r.category=="string"?r.category:r.category?.slug??"show",d=typeof r.category=="string"?r.category:r.category?.name??"Evento",N=r.venue?.bairro?.nome??"Tijucas",M=async b=>{b.stopPropagation();const y={title:r.title,text:`${r.title} • ${r.venue?.name??"Evento em Tijucas"}`,url:`${window.location.origin}/agenda/${r.id}`};if(navigator.share){try{await navigator.share(y)}catch{}return}if(navigator.clipboard?.writeText)try{await navigator.clipboard.writeText(y.url)}catch{}},F=b=>{b.stopPropagation();const y=r.venue?.coordinates,a=y?`${y.latitude},${y.longitude}`:`${r.venue?.name??"Tijucas"}, ${N}, Tijucas - SC`;window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(a)}`,"_blank")},S=b=>{b.stopPropagation(),r.ticket?.purchaseUrl&&window.open(r.ticket.purchaseUrl,"_blank")},w=b=>{b.stopPropagation(),v(r.id)};return o==="compact"?e.jsx(p.div,{whileTap:{scale:.96},onClick:()=>C(r.id),className:"cursor-pointer min-w-[280px] snap-start",children:e.jsxs(Q,{className:"relative overflow-hidden rounded-2xl border-border/60 bg-card shadow-card h-full",children:[e.jsxs("div",{className:"relative h-36",children:[e.jsx("img",{src:r.coverImage??"/placeholder.svg",alt:r.title,className:"h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsx(p.button,{whileTap:{scale:.8},onClick:w,className:f("absolute top-2 right-2 h-8 w-8 rounded-full flex items-center justify-center","bg-black/40 backdrop-blur-sm",n?"text-red-400":"text-white"),children:e.jsx(Y,{className:f("h-4 w-4",n&&"fill-current")})}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:e.jsx(h,{className:f("text-xs",Z[l]),children:d})})]}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 leading-tight",children:r.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx("span",{children:A})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:N}),e.jsx(h,{variant:"outline",className:"text-xs",children:P})]})]})]})}):e.jsx(p.div,{whileTap:{scale:.98},whileHover:{scale:1.01},transition:{type:"spring",stiffness:400,damping:25},onClick:()=>C(r.id),className:"cursor-pointer",children:e.jsx(Q,{className:"relative overflow-hidden rounded-2xl border-border/60 bg-card shadow-card group",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"relative w-28 h-32 shrink-0",children:[e.jsx("img",{src:r.coverImage??"/placeholder.svg",alt:r.title,className:"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent to-black/10"}),e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsx(h,{className:f("text-xs font-bold",u?"bg-green-500/90 text-white":"bg-black/70 text-white"),children:P})})]}),e.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-between min-h-[128px]",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx(h,{variant:"secondary",className:f("text-xs mb-1.5",Z[l]),children:d}),e.jsx(p.button,{whileTap:{scale:.75},animate:{scale:n?[1,1.2,1]:1},className:f("flex h-8 w-8 items-center justify-center rounded-full -mt-1 -mr-1","transition-colors",n?"text-red-500":"text-muted-foreground hover:text-red-400"),onClick:w,children:e.jsx(Y,{className:f("h-4 w-4",n&&"fill-current")})})]}),e.jsx("h3",{className:"font-semibold text-sm leading-tight line-clamp-2",children:r.title})]}),e.jsxs("div",{className:"space-y-1.5 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(J,{className:"h-3 w-3 text-primary"}),e.jsx("span",{className:"font-medium",children:A})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(W,{className:"h-3 w-3 text-primary"}),e.jsxs("span",{className:"truncate",children:[r.venue?.name??"Local"," • ",N]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2 pt-2 border-t border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[e.jsx(Re,{className:"h-3 w-3"}),e.jsxs("span",{children:[r.popularityScore,"+ interessados"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(g,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full",onClick:F,children:e.jsx(W,{className:"h-3.5 w-3.5"})}),e.jsx(g,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full",onClick:M,children:e.jsx(Oe,{className:"h-3.5 w-3.5"})}),r.ticket?.purchaseUrl&&e.jsx(g,{variant:"ghost",size:"icon",className:"h-7 w-7 rounded-full text-primary",onClick:S,children:e.jsx(Fe,{className:"h-3.5 w-3.5"})})]})]})]})]})})})}const es=[{id:"today",label:"Hoje"},{id:"tomorrow",label:"Amanhã"},{id:"weekend",label:"Fim de semana"},{id:"range",label:"Intervalo"}],ss=[{id:"morning",label:"Manhã"},{id:"afternoon",label:"Tarde"},{id:"night",label:"Noite"}];function as({open:r,onOpenChange:n,filters:v,applyFilters:C,allEvents:o,availableNeighborhoods:u,availableVenues:P,availableCategories:A}){const[l,d]=x.useState(v),[N,M]=x.useState("");x.useEffect(()=>{r&&d(v)},[r,v]);const F=x.useMemo(()=>ke(o,l).length,[o,l]),S=x.useMemo(()=>{const a=N.toLowerCase();return u.filter(c=>c.toLowerCase().includes(a))},[u,N]),w=(a,c)=>{d(R=>{const j=R[a];return{...R,[a]:j.includes(c)?j.filter($=>$!==c):[...j,c]}})},b=()=>{d({...v,search:"",datePreset:"all",dateRange:{start:null,end:null},categories:[],neighborhoods:[],venues:[],price:"all",priceRange:[0,150],timeOfDay:[],accessibility:!1,parking:!1,kids:!1,outdoor:!1,sortBy:"upcoming"})},y=()=>{C(l),n(!1)};return e.jsx($e,{open:r,onOpenChange:n,children:e.jsxs(Be,{className:"max-h-[85vh]",children:[e.jsx(Ie,{children:e.jsx(ze,{children:"Filtrar eventos"})}),e.jsxs(se,{className:"h-full px-4 pb-4",children:[e.jsxs(Ce,{type:"multiple",className:"space-y-3",children:[e.jsxs(T,{value:"dates",children:[e.jsx(D,{children:"Datas"}),e.jsxs(E,{children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:es.map(a=>e.jsx(h,{variant:l.datePreset===a.id?"default":"outline",className:"cursor-pointer",onClick:()=>d(c=>({...c,datePreset:c.datePreset===a.id?"all":a.id})),children:a.label},a.id))}),l.datePreset==="range"&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[e.jsx(I,{type:"date",value:l.dateRange.start??"",onChange:a=>d(c=>({...c,dateRange:{...c.dateRange,start:a.target.value}}))}),e.jsx(I,{type:"date",value:l.dateRange.end??"",onChange:a=>d(c=>({...c,dateRange:{...c.dateRange,end:a.target.value}}))})]})]})]}),e.jsxs(T,{value:"category",children:[e.jsx(D,{children:"Categoria"}),e.jsx(E,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(a=>{const c=typeof a=="string"?a:a.slug,R=typeof a=="string"?a:a.name;return e.jsx(h,{variant:l.categories.includes(c)?"default":"outline",className:"cursor-pointer",onClick:()=>w("categories",c),children:R},c)})})})]}),e.jsxs(T,{value:"neighborhood",children:[e.jsx(D,{children:"Bairro"}),e.jsxs(E,{children:[e.jsx(I,{placeholder:"Buscar bairro...",value:N,onChange:a=>M(a.target.value)}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:S.map(a=>e.jsx(h,{variant:l.neighborhoods.includes(a)?"default":"outline",className:"cursor-pointer",onClick:()=>w("neighborhoods",a),children:a},a))})]})]}),e.jsxs(T,{value:"venues",children:[e.jsx(D,{children:"Locais"}),e.jsx(E,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(a=>e.jsx(h,{variant:l.venues.includes(a)?"default":"outline",className:"cursor-pointer",onClick:()=>w("venues",a),children:a},a))})})]}),e.jsxs(T,{value:"price",children:[e.jsx(D,{children:"Preço"}),e.jsxs(E,{children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:["all","free","paid"].map(a=>e.jsx(h,{variant:l.price===a?"default":"outline",className:"cursor-pointer capitalize",onClick:()=>d(c=>({...c,price:a})),children:a==="all"?"Todos":a==="free"?"Grátis":"Pago"},a))}),l.price==="paid"&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx(He,{value:l.priceRange,min:0,max:150,step:5,onValueChange:a=>d(c=>({...c,priceRange:a}))}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["R$ ",l.priceRange[0]]}),e.jsxs("span",{children:["R$ ",l.priceRange[1]]})]})]})]})]}),e.jsxs(T,{value:"time",children:[e.jsx(D,{children:"Horário"}),e.jsx(E,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:ss.map(a=>e.jsx(h,{variant:l.timeOfDay.includes(a.id)?"default":"outline",className:"cursor-pointer",onClick:()=>w("timeOfDay",a.id),children:a.label},a.id))})})]}),e.jsxs(T,{value:"accessibility",children:[e.jsx(D,{children:"Acessibilidade"}),e.jsx(E,{children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(h,{variant:l.accessibility?"default":"outline",className:"cursor-pointer",onClick:()=>d(a=>({...a,accessibility:!a.accessibility})),children:"Acessível"}),e.jsx(h,{variant:l.parking?"default":"outline",className:"cursor-pointer",onClick:()=>d(a=>({...a,parking:!a.parking})),children:"Estacionamento"}),e.jsx(h,{variant:l.kids?"default":"outline",className:"cursor-pointer",onClick:()=>d(a=>({...a,kids:!a.kids})),children:"Kids"}),e.jsx(h,{variant:l.outdoor?"default":"outline",className:"cursor-pointer",onClick:()=>d(a=>({...a,outdoor:!a.outdoor})),children:"Ao ar livre"})]})})]})]}),e.jsx(B,{className:"my-4"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[F," resultados encontrados"]})]}),e.jsxs(Le,{className:"border-t",children:[e.jsxs(g,{onClick:y,children:["Aplicar (",F,")"]}),e.jsx(g,{variant:"outline",onClick:b,children:"Limpar filtros"})]})]})})}function ts({scrollRef:r}){const{allEvents:n,filteredEvents:v,groupedEvents:C,filters:o,setFilters:u,availableNeighborhoods:P,availableVenues:A,availableCategories:l,favorites:d,toggleFavorite:N,isLoading:M}=Se(),{setActiveTab:F}=be();ve();const S=Ne(),[w,b]=x.useState("list"),[y,a]=x.useState(!1),[c,R]=x.useState(0),[j,$]=x.useState(new Date),_=x.useRef(null);x.useEffect(()=>{const s=setInterval(()=>{R(t=>(t+1)%3)},6e3);return()=>clearInterval(s)},[]);const z=x.useMemo(()=>{if(!n||n.length===0)return[{id:"today",label:"Hoje",caption:"Descubra os eventos de hoje",event:null},{id:"weekend",label:"Fim de Semana",caption:"Planeje o seu fim de semana",event:null},{id:"free",label:"Grátis",caption:"Curta eventos gratuitos",event:null}];const s=n.filter(m=>K(m.start)),t=n.filter(m=>Te(m.start)),i=n.filter(m=>m.ticket?.type==="free");return[{id:"today",label:"Hoje",caption:s[0]?.title??"Descubra os eventos de hoje",event:s[0]??n[0]??null},{id:"weekend",label:"Fim de Semana",caption:t[0]?.title??"Planeje o seu fim de semana",event:t[0]??n[1]??n[0]??null},{id:"free",label:"Grátis",caption:i[0]?.title??"Curta eventos gratuitos",event:i[0]??n[2]??n[0]??null}]},[n]),k=z[c]??z[0],ae=x.useMemo(()=>{let s=0;return o.search.trim()&&s++,o.datePreset!=="all"&&s++,o.categories.length>0&&s++,o.neighborhoods.length>0&&s++,o.venues.length>0&&s++,o.price!=="all"&&s++,o.timeOfDay.length>0&&s++,(o.accessibility||o.parking||o.kids||o.outdoor)&&s++,s},[o]),te=x.useMemo(()=>Object.keys(C).sort(),[C]),re=x.useMemo(()=>{if(!n||n.length===0)return[];const s=new Map;return n.forEach(t=>{const i=t.venue?.bairro?.nome;i&&s.set(i,(s.get(i)??0)+1)}),Array.from(s.entries()).sort((t,i)=>i[1]-t[1]).slice(0,6).map(([t])=>t)},[n]),L=x.useMemo(()=>{const s={};return v.forEach(t=>{const i=O(t.start);s[i]||(s[i]=[]),s[i].push(t)}),s},[v]),ie=s=>{u(t=>({...t,search:s}))},le=()=>{k?.event&&S(`/agenda/${k.event.id}`)},ne=s=>{u(t=>{const i=t.categories.includes(s);return{...t,categories:i?t.categories.filter(m=>m!==s):[...t.categories,s]}})},oe=s=>{u(t=>{const i=t.neighborhoods.includes(s);return{...t,neighborhoods:i?t.neighborhoods.filter(m=>m!==s):[...t.neighborhoods,s]}})},ce=s=>{u(t=>({...t,datePreset:t.datePreset===s?"all":s}))},de=s=>{u(t=>({...t,price:t.price===s?"all":s}))},H=Ge(j),me=_e(j),xe=Ue(H,{weekStartsOn:0}),he=qe(me,{weekStartsOn:0}),ue=Ve({start:xe,end:he});return e.jsxs("div",{ref:r,className:"h-full min-h-screen overflow-y-auto bg-background pb-32",children:[e.jsx("div",{className:"sticky top-0 z-30 border-b bg-background/80 backdrop-blur-md safe-top",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Agenda"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Eventos, shows e festas"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"ghost",size:"icon",className:"h-9 w-9",children:e.jsx(Ke,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"icon",className:"h-9 w-9",onClick:()=>_.current?.focus(),children:e.jsx(Ye,{className:"h-4 w-4"})}),e.jsxs(g,{variant:"ghost",size:"icon",className:"relative h-9 w-9",onClick:()=>a(!0),children:[e.jsx(Je,{className:"h-4 w-4"}),ae>0&&e.jsx("span",{className:"absolute right-2 top-2 h-2 w-2 rounded-full bg-primary"})]})]})]})}),e.jsxs("div",{className:"px-4 pt-4 space-y-6",children:[M?e.jsx(V,{className:"h-44 w-full rounded-3xl"}):e.jsxs("div",{className:"relative overflow-hidden rounded-3xl border bg-card/90 shadow-elevated",children:[e.jsx(Me,{mode:"wait",children:e.jsxs(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.6},className:"relative",children:[e.jsx(p.img,{src:k?.event?.coverImage??"/placeholder.svg",alt:k?.event?.title??"Destaque",className:"h-44 w-full object-cover",initial:{scale:1.05},animate:{scale:1},transition:{duration:.8}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/70 via-black/40 to-transparent"}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between p-5",children:[e.jsxs("div",{className:"text-white",children:[e.jsx(h,{className:"bg-white/20 text-white",children:k?.label}),e.jsx("h2",{className:"mt-2 text-xl font-bold",children:k?.caption}),e.jsx("p",{className:"text-xs text-white/80",children:k?.event?De(k.event.start):"Confira a programação"})]}),e.jsx(g,{onClick:le,className:"rounded-full",children:"Ver"})]})]},k?.id)}),e.jsx("div",{className:"absolute bottom-3 left-1/2 flex -translate-x-1/2 gap-2",children:z.map((s,t)=>e.jsx("span",{className:f("h-2 w-2 rounded-full transition-all",t===c?"bg-white":"bg-white/40")},s.id))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(I,{ref:_,placeholder:"Buscar evento, local, bairro...",value:o.search,onChange:s=>ie(s.target.value)}),e.jsxs(se,{className:"w-full whitespace-nowrap",children:[e.jsxs("div",{className:"flex w-max gap-2 pb-2",children:[["Hoje","Amanhã","Fim de semana"].map(s=>{const t=s==="Hoje"?"today":s==="Amanhã"?"tomorrow":"weekend",i=o.datePreset===t;return e.jsx(p.button,{whileTap:{scale:.92},className:f("rounded-full border px-4 py-2 text-xs font-medium",i?"bg-primary text-primary-foreground border-primary":"bg-card"),onClick:()=>ce(t),children:s},s)}),e.jsx(B,{orientation:"vertical",className:"h-7"}),["Grátis","Pago"].map(s=>{const t=s==="Grátis"?"free":"paid",i=o.price===t;return e.jsx(p.button,{whileTap:{scale:.92},className:f("rounded-full border px-4 py-2 text-xs font-medium",i?"bg-secondary text-secondary-foreground border-secondary":"bg-card"),onClick:()=>de(t),children:s},s)}),e.jsx(B,{orientation:"vertical",className:"h-7"}),l.map(s=>{const t=typeof s=="string"?s:s.slug,i=typeof s=="string"?s:s.name,m=o.categories.includes(t);return e.jsx(p.button,{whileTap:{scale:.92},className:f("rounded-full border px-4 py-2 text-xs font-medium",m?"bg-accent text-accent-foreground border-accent":"bg-card"),onClick:()=>ne(t),children:i},t)}),e.jsx(B,{orientation:"vertical",className:"h-7"}),re.map(s=>{const t=o.neighborhoods.includes(s);return e.jsx(p.button,{whileTap:{scale:.92},className:f("rounded-full border px-4 py-2 text-xs font-medium",t?"bg-muted text-foreground border-border":"bg-card"),onClick:()=>oe(s),children:s},s)})]}),e.jsx(je,{orientation:"horizontal"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ordenar por"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{size:"sm",variant:o.sortBy==="upcoming"?"default":"outline",onClick:()=>u(s=>({...s,sortBy:"upcoming"})),children:"Próximos"}),e.jsx(g,{size:"sm",variant:o.sortBy==="popular"?"default":"outline",onClick:()=>u(s=>({...s,sortBy:"popular"})),children:"Populares"})]})]}),e.jsxs(ge,{value:w,onValueChange:s=>b(s),children:[e.jsxs(fe,{className:"grid w-full grid-cols-2",children:[e.jsx(U,{value:"list",children:"Lista"}),e.jsx(U,{value:"calendar",children:"Calendário"})]}),e.jsx(q,{value:"list",className:"mt-4 space-y-6",children:M?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((s,t)=>e.jsx(V,{className:"h-28 w-full rounded-3xl"},`event-skel-${t}`))}):v.length===0?e.jsxs("div",{className:"rounded-2xl border bg-card p-6 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhum evento encontrado."}),e.jsx(g,{variant:"link",onClick:()=>u(s=>({...s,search:"",datePreset:"all",categories:[],neighborhoods:[],venues:[],price:"all",timeOfDay:[],accessibility:!1,parking:!1,kids:!1,outdoor:!1})),children:"Limpar filtros"})]}):e.jsx("div",{className:"space-y-6",children:te.map(s=>{const t=C[s];if(!t||t.length===0)return null;const i=t[0].start;return e.jsxs(p.div,{initial:{opacity:0,y:16},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:f("text-lg font-semibold",K(i)&&"text-primary"),children:Ee(i)}),Pe(i)&&e.jsx(h,{variant:"secondary",className:"text-xs",children:"Amanhã"}),e.jsx(B,{className:"flex-1"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[t.length," evento",t.length>1?"s":""]})]}),e.jsx("div",{className:"space-y-3",children:t.map((m,G)=>e.jsx(p.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:G*.05},children:e.jsx(ee,{event:m,isFavorite:d.includes(m.id),onToggleFavorite:N,onOpen:pe=>S(`/agenda/${pe}`)})},m.id))})]},s)})})}),e.jsxs(q,{value:"calendar",className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"rounded-2xl border bg-card p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Tijucas"}),e.jsx("h3",{className:"text-lg font-semibold capitalize",children:X(H,"MMMM yyyy",{locale:Ze})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>$(Qe(j,1)),children:e.jsx(Xe,{className:"h-4 w-4"})}),e.jsx(g,{variant:"ghost",size:"icon",onClick:()=>$(We(j,1)),children:e.jsx(ye,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"mt-4 grid grid-cols-7 gap-2 text-center text-xs text-muted-foreground",children:["D","S","T","Q","Q","S","S"].map((s,t)=>e.jsx("span",{children:s},`day-header-${t}`))}),e.jsx("div",{className:"mt-2 grid grid-cols-7 gap-2",children:ue.map(s=>{const t=O(s),i=L[t]?.length,m=s.getMonth()===H.getMonth(),G=O(s)===O(j);return e.jsxs(p.button,{whileTap:{scale:.92},onClick:()=>$(s),className:f("flex h-10 flex-col items-center justify-center rounded-xl border text-xs",G?"bg-primary text-primary-foreground border-primary":"bg-background",!m&&"opacity-40"),children:[e.jsx("span",{className:"font-medium",children:X(s,"d")}),i?e.jsx("span",{className:"mt-1 h-1 w-1 rounded-full bg-current"}):null]},s.toISOString())})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Eventos em ",Ae(j)]}),(L[O(j)]??[]).length===0?e.jsx("div",{className:"rounded-2xl border bg-card p-6 text-center text-sm text-muted-foreground",children:"Nenhum evento neste dia."}):(L[O(j)]??[]).map((s,t)=>e.jsx(p.div,{initial:{opacity:0,y:12},animate:{opacity:1,y:0},transition:{delay:t*.04},children:e.jsx(ee,{event:s,isFavorite:d.includes(s.id),onToggleFavorite:N,onOpen:i=>S(`/agenda/${i}`)})},s.id))]})]})]})]}),e.jsx(as,{open:y,onOpenChange:a,filters:o,applyFilters:u,allEvents:n,availableNeighborhoods:P,availableVenues:A,availableCategories:l})]})}function Ms({scrollRef:r}){return e.jsx(ts,{scrollRef:r})}export{Ms as default};
