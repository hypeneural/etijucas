import{j as e,r as h}from"./vendor-radix-Dq3xRYQM.js";import{B as y}from"./button-CBVrI7SX.js";import{b as D,u as T,g as O,c as u,C as S,X as R,W as L,R as E,d as B,B as I}from"./index-wJGYTEZC.js";import"./sheet-DnH7oYK8.js";import{b as k}from"./votes-CdQdfeEO.js";import{B as F}from"./badge-DWNosDOo.js";import{m as l,A as z}from"./vendor-motion-CBZKS1Mr.js";import{T as M}from"./thumbs-up-GNpWxzop.js";import{C as J}from"./chevron-right-D8Mr43_V.js";import{C as U}from"./clock-C2LPT8JJ.js";import{C as _}from"./circle-x-BirgbAns.js";import{S as N}from"./search-D_0t-7HE.js";import{A as H}from"./arrow-left-CfmyxvCZ.js";import"./vendor-utils-DHocNF0y.js";import"./vendor-query-DJ0Mukyd.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=D("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);function $({counts:a}){const o=a.sim+a.nao+a.abstencao+a.naoVotou;if(o===0)return null;const m=a.sim/o*100,t=a.nao/o*100,n=(a.abstencao+a.naoVotou)/o*100;return e.jsxs("div",{className:"h-1.5 w-full rounded-full overflow-hidden bg-muted flex",children:[e.jsx(l.div,{initial:{width:0},animate:{width:`${m}%`},transition:{duration:.6,delay:.2},className:"h-full bg-green-500"}),e.jsx(l.div,{initial:{width:0},animate:{width:`${t}%`},transition:{duration:.6,delay:.3},className:"h-full bg-red-500"}),n>0&&e.jsx(l.div,{initial:{width:0},animate:{width:`${n}%`},transition:{duration:.6,delay:.4},className:"h-full bg-gray-300 dark:bg-gray-600"})]})}function q({status:a}){switch(a){case"APROVADO":return e.jsx(S,{className:"w-3.5 h-3.5"});case"REJEITADO":return e.jsx(_,{className:"w-3.5 h-3.5"});case"EM_ANDAMENTO":return e.jsx(U,{className:"w-3.5 h-3.5"})}}function W({vote:a,index:o=0}){const m=T(),t=k[a.status],n=c=>new Date(c).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}),d=()=>{m(`/votacao/${a.id}`)};return e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:o*.05},whileTap:{scale:.98},onClick:d,className:u("bg-card rounded-2xl p-4 border shadow-card","cursor-pointer transition-all duration-200","hover:shadow-md hover:border-border/80","active:shadow-sm"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-muted-foreground",children:[e.jsx(O,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:n(a.date)})]}),e.jsxs(F,{className:u("gap-1 px-2 py-0.5 text-[10px] font-bold uppercase tracking-wider border",t.bgColor,t.textColor,t.borderColor),children:[e.jsx(q,{status:a.status}),t.label]})]}),e.jsx("h3",{className:"text-lg font-bold text-foreground leading-tight mb-1.5 line-clamp-2",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed line-clamp-2 mb-4",children:a.summary}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/30",children:e.jsx(M,{className:"w-3 h-3 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:a.counts.sim})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-red-100 dark:bg-red-900/30",children:e.jsx(Y,{className:"w-3 h-3 text-red-600 dark:text-red-400"})}),e.jsx("span",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:a.counts.nao})]}),(a.counts.abstencao>0||a.counts.naoVotou>0)&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",a.counts.abstencao+a.counts.naoVotou," outros"]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center gap-1 text-sm font-bold text-foreground",children:[e.jsx("span",{className:"text-green-600",children:a.counts.sim}),e.jsx("span",{className:"text-muted-foreground",children:"×"}),e.jsx("span",{className:"text-red-600",children:a.counts.nao})]})]}),e.jsx($,{counts:a.counts}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border/50",children:[e.jsx("div",{className:"flex gap-1.5 flex-wrap",children:a.tags.slice(0,2).map(c=>e.jsx("span",{className:"px-2 py-0.5 rounded-md bg-muted text-[10px] font-medium text-muted-foreground",children:c},c))}),e.jsxs(y,{variant:"ghost",size:"sm",className:"text-primary font-semibold gap-1 -mr-2",onClick:c=>{c.stopPropagation(),d()},children:["Ver votos",e.jsx(J,{className:"w-4 h-4"})]})]})]})}const X=[{value:"all",label:"Todos"},{value:"APROVADO",label:"Aprovados"},{value:"REJEITADO",label:"Rejeitados"}];function G({searchQuery:a,onSearchChange:o,statusFilter:m,onStatusChange:t,yearFilter:n,onYearChange:d,availableYears:c,isSearchOpen:x,onSearchToggle:v,className:b}){return e.jsxs("div",{className:u("space-y-3",b),children:[x&&e.jsxs(l.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx("input",{type:"text",value:a,onChange:s=>o(s.target.value),placeholder:"Buscar por título, número ou tema...",autoFocus:!0,className:u("w-full h-11 pl-10 pr-10 rounded-xl border bg-card","text-sm placeholder:text-muted-foreground","focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary","transition-all duration-200")}),a&&e.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 rounded-full hover:bg-muted transition-colors",children:e.jsx(R,{className:"w-4 h-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 -mx-4 px-4 scrollbar-hide",children:[X.map(s=>{const g=m===s.value,f=s.value!=="all"?k[s.value]:null;return e.jsx(l.button,{whileTap:{scale:.95},onClick:()=>t(s.value),className:u("flex items-center gap-1.5 px-3 py-2 rounded-full text-sm font-medium whitespace-nowrap","border transition-all duration-200",g?f?u(f.bgColor,f.textColor,f.borderColor):"bg-primary text-primary-foreground border-primary shadow-sm":"bg-card border-border text-muted-foreground hover:bg-muted"),children:s.label},s.value)}),e.jsx("div",{className:"w-px h-8 bg-border shrink-0 self-center"}),e.jsx(l.button,{whileTap:{scale:.95},onClick:()=>d("all"),className:u("px-3 py-2 rounded-full text-sm font-medium whitespace-nowrap","border transition-all duration-200",n==="all"?"bg-primary/10 text-primary border-primary/30":"bg-card border-border text-muted-foreground hover:bg-muted"),children:"Todos Anos"}),c.map(s=>e.jsx(l.button,{whileTap:{scale:.95},onClick:()=>d(s),className:u("px-3 py-2 rounded-full text-sm font-medium whitespace-nowrap","border transition-all duration-200",n===s?"bg-primary/10 text-primary border-primary/30":"bg-card border-border text-muted-foreground hover:bg-muted"),children:s},s))]})]})}function Q({type:a,onRetry:o,onClearFilters:m}){const t={"no-results":{icon:N,title:"Nenhuma votação encontrada",description:"Tente ajustar os filtros ou buscar por outro termo.",action:m?{label:"Limpar filtros",onClick:m}:void 0},error:{icon:E,title:"Erro ao carregar",description:"Não foi possível carregar as votações.",action:o?{label:"Tentar novamente",onClick:o}:void 0},offline:{icon:L,title:"Você está offline",description:"Mostrando dados salvos no seu dispositivo.",action:void 0}}[a],n=t.icon;return e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-muted flex items-center justify-center mb-4",children:e.jsx(n,{className:"w-7 h-7 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-1",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-[280px] mb-4",children:t.description}),t.action&&e.jsx(l.button,{whileTap:{scale:.95},onClick:t.action.onClick,className:"px-4 py-2 rounded-lg bg-primary text-primary-foreground text-sm font-medium",children:t.action.label})]})}function Z(){return e.jsx("div",{className:"space-y-4 animate-pulse",children:[...Array(4)].map((a,o)=>e.jsxs("div",{className:"bg-card rounded-2xl p-4 border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"h-4 w-20 bg-muted rounded"}),e.jsx("div",{className:"h-5 w-16 bg-muted rounded-full"})]}),e.jsx("div",{className:"h-6 w-3/4 bg-muted rounded mb-2"}),e.jsx("div",{className:"h-4 w-full bg-muted rounded mb-1"}),e.jsx("div",{className:"h-4 w-2/3 bg-muted rounded mb-4"}),e.jsxs("div",{className:"flex gap-4 mb-3",children:[e.jsx("div",{className:"h-6 w-12 bg-muted rounded"}),e.jsx("div",{className:"h-6 w-12 bg-muted rounded"})]}),e.jsx("div",{className:"h-1.5 w-full bg-muted rounded-full"})]},o))})}const K=[{id:"iptutijucas-2026-001",status:"APROVADO",date:"2026-01-20",title:"Aumento do IPTU",summary:"Projeto de reajuste do IPTU em Tijucas com atualização da planta genérica de valores.",counts:{sim:6,nao:5,abstencao:1,naoVotou:1},tags:["tributos","iptu","fiscal"]},{id:"pl-104-2025",status:"APROVADO",date:"2025-10-12",title:"Reforma da Praça Central",summary:"Projeto de Lei Complementar nº 045/2025 que dispõe sobre a revitalização urbana da praça.",counts:{sim:10,nao:2,abstencao:1,naoVotou:0},tags:["urbanismo","praça","centro"]},{id:"pl-087-2025",status:"REJEITADO",date:"2025-09-05",title:"Redução da Taxa de Lixo",summary:"Projeto propunha redução de 20% na taxa de coleta de lixo para residências.",counts:{sim:4,nao:8,abstencao:0,naoVotou:1},tags:["tributos","lixo","taxa"]},{id:"pl-062-2025",status:"APROVADO",date:"2025-07-22",title:"Nova Creche no Bairro Areias",summary:"Autoriza construção de creche municipal com capacidade para 120 crianças.",counts:{sim:11,nao:1,abstencao:1,naoVotou:0},tags:["educação","creche","areias"]},{id:"pl-045-2025",status:"APROVADO",date:"2025-06-10",title:"Iluminação Pública LED",summary:"Projeto de modernização do sistema de iluminação pública com tecnologia LED.",counts:{sim:12,nao:0,abstencao:1,naoVotou:0},tags:["infraestrutura","iluminação","led"]},{id:"pl-033-2025",status:"REJEITADO",date:"2025-04-18",title:"Aumento do Salário dos Vereadores",summary:"Proposta de reajuste de 15% nos subsídios dos vereadores a partir de 2026.",counts:{sim:3,nao:9,abstencao:1,naoVotou:0},tags:["legislativo","salário","vereadores"]},{id:"pl-021-2025",status:"APROVADO",date:"2025-03-08",title:"Feira Livre aos Sábados",summary:"Regulamenta a realização de feira livre de produtores locais aos sábados.",counts:{sim:10,nao:2,abstencao:0,naoVotou:1},tags:["comércio","feira","agricultura"]},{id:"pl-089-2024",status:"APROVADO",date:"2024-11-20",title:"Ciclovia da Beira-Rio",summary:"Projeto de construção de ciclovia na orla do Rio Tijucas com 3,5km de extensão.",counts:{sim:9,nao:3,abstencao:1,naoVotou:0},tags:["mobilidade","ciclovia","rio"]},{id:"pl-067-2024",status:"REJEITADO",date:"2024-09-15",title:"Proibição de Fogos de Artifício",summary:"Proposta para proibir fogos de artifício com estampido no município.",counts:{sim:5,nao:7,abstencao:1,naoVotou:0},tags:["meio ambiente","animais","fogos"]},{id:"pl-052-2024",status:"APROVADO",date:"2024-07-03",title:"Programa Tijucas Digital",summary:"Cria programa de inclusão digital com internet gratuita em praças públicas.",counts:{sim:11,nao:1,abstencao:0,naoVotou:1},tags:["tecnologia","internet","inclusão"]}],ee={votes:K},A=ee;function be(){const a=T(),{activeTab:o,setActiveTab:m}=B(),[t,n]=h.useState(""),[d,c]=h.useState("all"),[x,v]=h.useState("all"),[b,s]=h.useState(!1),[g]=h.useState(!1),f=h.useMemo(()=>{const i=new Set(A.votes.map(r=>new Date(r.date).getFullYear()));return Array.from(i).sort((r,p)=>p-r)},[]),j=h.useMemo(()=>{let i=[...A.votes];if(t.trim()){const r=t.toLowerCase();i=i.filter(p=>p.title.toLowerCase().includes(r)||p.summary.toLowerCase().includes(r)||p.tags.some(P=>P.toLowerCase().includes(r))||p.id.toLowerCase().includes(r))}return d!=="all"&&(i=i.filter(r=>r.status===d)),x!=="all"&&(i=i.filter(r=>new Date(r.date).getFullYear()===x)),i.sort((r,p)=>new Date(p.date).getTime()-new Date(r.date).getTime()),i},[t,d,x]),w=()=>{n(""),c("all"),v("all"),s(!1)},V=i=>{m(i),a("/")},C=t||d!=="all"||x!=="all";return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-muted/50",children:e.jsxs("div",{className:"relative w-full max-w-[420px] h-full bg-background overflow-hidden shadow-elevated",children:[e.jsxs("div",{className:"h-full overflow-y-auto pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-xl border-b",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-top",children:[e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>a(-1),children:e.jsx(H,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-bold",children:"Votações da Câmara"}),e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>s(!b),className:u(b&&"bg-primary/10 text-primary"),children:e.jsx(N,{className:"h-5 w-5"})})]})}),e.jsx("div",{className:"sticky top-14 z-30 bg-background/95 backdrop-blur-xl border-b px-4 py-3",children:e.jsx(G,{searchQuery:t,onSearchChange:n,statusFilter:d,onStatusChange:c,yearFilter:x,onYearChange:v,availableYears:f,isSearchOpen:b,onSearchToggle:()=>s(!b)})}),e.jsxs("main",{className:"px-4 py-5",children:[!g&&j.length>0&&e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},className:"flex items-center justify-between mb-4",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[j.length," ",j.length===1?"votação":"votações"]}),C&&e.jsx("button",{onClick:w,className:"text-sm text-primary font-medium",children:"Limpar filtros"})]}),g&&e.jsx(Z,{}),!g&&j.length===0&&e.jsx(Q,{type:"no-results",onClearFilters:C?w:void 0}),!g&&j.length>0&&e.jsx(z,{mode:"popLayout",children:e.jsx(l.div,{layout:!0,className:"space-y-4 pb-8",children:j.map((i,r)=>e.jsx(W,{vote:i,index:r},i.id))})})]})]}),e.jsx(I,{activeTab:o,onTabChange:V})]})})}export{be as default};
