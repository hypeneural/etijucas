import{r,j as e,m as i,G as K,a6 as _,l as C,Z as q,E as z,a7 as H,J,a8 as V,a9 as E}from"./vendor-app-L90565EI.js";import{c as I,B as W}from"./index-Df2jNpcx.js";function U({value:u,onChange:l,onComplete:h,onResend:S,error:n,expiresAt:y,disabled:j=!1,isResending:N=!1,isVerifying:b=!1,phone:w}){const d=r.useRef([]),F=r.useRef(null),[R,o]=r.useState(null),[v,P]=r.useState(0),[M,k]=r.useState(!1),[B,D]=r.useState(null),c=6,p=u.padEnd(c," ").split("").slice(0,c);r.useEffect(()=>{if(y){const t=()=>{const s=Math.max(0,Math.floor((y.getTime()-Date.now())/1e3));return P(s),s};t();const a=setInterval(()=>{t()===0&&clearInterval(a)},1e3);return()=>clearInterval(a)}},[y]),r.useEffect(()=>{if(n){k(!0);const t=setTimeout(()=>k(!1),600);return()=>clearTimeout(t)}},[n]),r.useEffect(()=>{const t=setTimeout(()=>{d.current[0]?.focus(),o(0)},300);return()=>clearTimeout(t)},[]),r.useEffect(()=>{if(u.length===c&&h&&!n&&!b){const t=setTimeout(()=>{h(u)},300);return()=>clearTimeout(t)}},[u,h,n,b]);const f=r.useCallback(t=>{D(t),setTimeout(()=>D(null),300)},[]),L=r.useCallback((t,a)=>{const s=a.replace(/\D/g,"").slice(-1);if(s){const m=[...p];m[t]=s;const x=m.join("").replace(/ /g,"");l(x),f(t),t<c-1&&setTimeout(()=>{d.current[t+1]?.focus(),o(t+1)},50)}},[p,l,f]),O=r.useCallback((t,a)=>{if(a.key==="Backspace"){a.preventDefault();const s=[...p];p[t]!==" "?(s[t]=" ",l(s.join("").replace(/ /g,""))):t>0&&(s[t-1]=" ",l(s.join("").replace(/ /g,"")),d.current[t-1]?.focus(),o(t-1))}a.key==="ArrowLeft"&&t>0&&(d.current[t-1]?.focus(),o(t-1)),a.key==="ArrowRight"&&t<c-1&&(d.current[t+1]?.focus(),o(t+1))},[p,l]),A=r.useCallback(t=>{t.preventDefault();const a=t.clipboardData.getData("text").replace(/\D/g,"").slice(0,c);if(a.length>0){l(a),a.split("").forEach((m,x)=>{setTimeout(()=>f(x),x*80)});const s=Math.min(a.length,c-1);setTimeout(()=>{d.current[s]?.focus(),o(s)},a.length*80+100)}},[l,f]),$=t=>{const a=Math.floor(t/60),s=t%60;return`${a}:${s.toString().padStart(2,"0")}`},T=u.length===c,G=u.length/c*100;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center space-y-3",children:[e.jsx(i.div,{animate:{scale:[1,1.05,1],rotate:[0,5,-5,0]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},className:"inline-flex p-4 rounded-2xl bg-gradient-to-br from-green-400 to-green-600 shadow-lg shadow-green-500/30",children:e.jsx(K,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-xl",children:"Verificação WhatsApp"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Enviamos um código de 6 dígitos para"}),w&&e.jsxs(i.p,{initial:{opacity:0},animate:{opacity:1},className:"text-primary font-semibold flex items-center justify-center gap-1 mt-1",children:[e.jsx(_,{className:"h-4 w-4"}),w]})]})]}),e.jsx("div",{className:"relative h-1.5 bg-muted rounded-full overflow-hidden",children:e.jsx(i.div,{initial:{width:0},animate:{width:`${G}%`},transition:{duration:.3,ease:"easeOut"},className:I("absolute inset-y-0 left-0 rounded-full",T?"bg-gradient-to-r from-green-400 to-green-600":"bg-gradient-to-r from-primary to-primary/70")})}),e.jsx(i.div,{ref:F,animate:M?{x:[-12,12,-12,12,-6,6,0],transition:{duration:.5}}:{},className:"flex justify-center gap-2 sm:gap-3",children:p.map((t,a)=>{const s=t!==" ",m=R===a,x=B===a;return e.jsxs(i.div,{initial:{opacity:0,y:30,scale:.8},animate:{opacity:1,y:0,scale:x?1.1:1},transition:{delay:a*.08,duration:.3,scale:{duration:.15}},className:"relative",children:[m&&e.jsx(i.div,{layoutId:"otp-glow",className:"absolute -inset-1 rounded-2xl bg-primary/20 blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),e.jsx("input",{ref:g=>{d.current[a]=g},type:"text",inputMode:"numeric",pattern:"[0-9]*",autoComplete:"one-time-code",maxLength:1,value:t===" "?"":t,onChange:g=>L(a,g.target.value),onKeyDown:g=>O(a,g),onFocus:()=>o(a),onBlur:()=>o(null),onPaste:A,disabled:j,className:I("relative w-12 h-14 sm:w-14 sm:h-16 text-center text-2xl sm:text-3xl font-bold","rounded-xl sm:rounded-2xl border-2 outline-none","transition-all duration-200 ease-out","bg-background/50 backdrop-blur-sm",!s&&!m&&!n&&"border-border hover:border-muted-foreground/50",m&&!n&&"border-primary shadow-lg shadow-primary/20",s&&!n&&"border-green-400 bg-green-50/50 dark:bg-green-950/30 text-green-700 dark:text-green-300",n&&"border-red-400 bg-red-50/50 dark:bg-red-950/30 text-red-600",j&&"opacity-50 cursor-not-allowed")}),e.jsx(C,{children:s&&!n&&e.jsx(i.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"absolute -top-1 -right-1 w-5 h-5 rounded-full bg-green-500 flex items-center justify-center shadow-sm",children:e.jsx(q,{className:"h-3 w-3 text-white"})})})]},a)})}),e.jsxs(C,{mode:"wait",children:[T&&!n&&e.jsx(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10},className:"flex items-center justify-center gap-2 p-3 rounded-xl bg-green-50 dark:bg-green-950/30 border border-green-200 dark:border-green-800",children:b?e.jsxs(e.Fragment,{children:[e.jsx(z,{className:"h-5 w-5 text-green-600 dark:text-green-400 animate-spin"}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Verificando código..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(i.div,{animate:{rotate:[0,360]},transition:{duration:.5},children:e.jsx(H,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),e.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Código completo!"}),e.jsx(J,{className:"h-4 w-4 text-green-500 animate-pulse"})]})},"success"),n&&e.jsxs(i.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10},className:"flex items-center justify-center gap-2 p-3 rounded-xl bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800",children:[e.jsx(V,{className:"h-5 w-5 text-red-500"}),e.jsx("span",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:n})]},"error")]}),e.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-center space-y-3",children:[v>0?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Não recebeu o código?"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-muted/50",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),e.jsxs("span",{className:"text-sm font-medium",children:["Reenviar em ",e.jsx("span",{className:"font-mono text-primary",children:$(v)})]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Não recebeu o código?"}),e.jsx(W,{variant:"outline",size:"sm",onClick:S,disabled:N||j,className:"rounded-full px-6 border-primary/50 hover:bg-primary/10",children:N?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Reenviar código"]})})]}),e.jsx("p",{className:"text-xs text-muted-foreground/70",children:"Dica: Cole o código automaticamente quando receber"})]})]})}export{U as O};
