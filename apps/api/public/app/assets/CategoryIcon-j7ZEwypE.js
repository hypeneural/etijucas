import{k as n,E as o,D as p,y as d,d as i}from"./index-Ea3rsp2g.js";import{j as c}from"./vendor-radix-CZ2RePwe.js";import{I as g}from"./iconify-BWb7ubtH.js";async function m(){try{return(await n.get(o.reports.categories)).data}catch(e){throw console.error("[ReportService] Failed to fetch categories:",e),e}}async function h(e,r){const t=new FormData;t.append("categoryId",e.categoryId),t.append("title",e.title),t.append("description",e.description),e.addressText&&t.append("addressText",e.addressText),e.addressSource&&t.append("addressSource",e.addressSource),e.locationQuality&&t.append("locationQuality",e.locationQuality),e.latitude!==void 0&&t.append("latitude",String(e.latitude)),e.longitude!==void 0&&t.append("longitude",String(e.longitude)),e.locationAccuracyM!==void 0&&t.append("locationAccuracyM",String(e.locationAccuracyM)),e.bairroId&&t.append("bairroId",e.bairroId),e.images&&e.images.length>0&&e.images.forEach(a=>{t.append("images[]",a)});try{const a=await n.postFormData(o.reports.create,t,{headers:{"X-Idempotency-Key":r}});return a.data&&await p.save(a.data),a.data}catch(a){throw console.error("[ReportService] Failed to create report:",a),await d.exists(r)||await d.add({type:"report",data:{...e,images:[]},idempotencyKey:r}),a}}async function f(e){try{const r=new URLSearchParams;e?.status&&r.append("status",e.status),e?.categoryId&&r.append("categoryId",e.categoryId),e?.page&&r.append("page",String(e.page)),e?.perPage&&r.append("perPage",String(e.perPage));const t=r.toString(),a=t?`${o.reports.myReports}?${t}`:o.reports.myReports,s=await n.get(a);return s.data.length>0&&await p.saveMany(s.data),s}catch(r){console.error("[ReportService] Failed to fetch my reports:",r);const t=await p.getAll();return{data:t,meta:{current_page:1,last_page:1,per_page:10,total:t.length}}}}async function S(e){try{const r=new URLSearchParams;e?.status&&r.append("status",e.status),e?.categoryId&&r.append("categoryId",e.categoryId),e?.search&&r.append("search",e.search),e?.page&&r.append("page",String(e.page)),e?.perPage&&r.append("perPage",String(e.perPage));const t=r.toString(),a=t?`${o.reports.list}?${t}`:o.reports.list;return await n.get(a)}catch(r){throw console.error("[ReportService] Failed to fetch public reports:",r),r}}async function w(){try{return(await n.get(o.reports.stats)).data}catch(e){return console.error("[ReportService] Failed to fetch reports stats:",e),{total:0,byStatus:{recebido:0,em_analise:0,resolvido:0,rejeitado:0},thisMonth:0,resolvedThisMonth:0}}}async function x(e){try{const r=await n.get(o.reports.get(e));return await p.save(r.data),r.data}catch(r){return console.error("[ReportService] Failed to fetch report:",r),await p.getById(e)}}async function y(e,r){const t=new FormData;return r.forEach(s=>{t.append("images[]",s)}),(await n.postFormData(o.reports.addMedia(e),t)).data}async function v(e,r){await n.delete(o.reports.removeMedia(e,r))}async function R(e,r,t){try{const a=new URLSearchParams({q:e});return r!==void 0&&a.append("lat",String(r)),t!==void 0&&a.append("lon",String(t)),(await n.get(`${o.geocode.autocomplete}?${a.toString()}`)).data}catch(a){return console.error("[ReportService] Geocode autocomplete failed:",a),[]}}async function I(e,r){try{const t=new URLSearchParams({lat:String(e),lon:String(r)});return(await n.get(`${o.geocode.reverse}?${t.toString()}`)).data}catch(t){return console.error("[ReportService] Geocode reverse failed:",t),null}}const D={getCategories:m,createReport:h,getMyReports:f,getPublicReports:S,getReportsStats:w,getReportById:x,addReportMedia:y,removeReportMedia:v,geocodeAutocomplete:R,geocodeReverse:I},u={sm:"w-5 h-5",md:"w-8 h-8",lg:"w-10 h-10",xl:"w-12 h-12"},l={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-14 h-14",xl:"w-16 h-16"};function F({icon:e,color:r="#6b7280",size:t="md",className:a,withBackground:s=!1}){return e.includes(":")?s?c.jsx("div",{className:i("rounded-xl flex items-center justify-center",l[t],a),style:{backgroundColor:`${r}20`},children:c.jsx(g,{icon:e,className:u[t],style:{color:r}})}):c.jsx(g,{icon:e,className:i(u[t],a),style:{color:r}}):s?c.jsx("div",{className:i("rounded-xl flex items-center justify-center",l[t],a),style:{backgroundColor:`${r}20`},children:c.jsx("span",{className:i("text-center",t==="sm"?"text-lg":t==="md"?"text-2xl":"text-3xl"),children:e})}):c.jsx("span",{className:i("text-center",t==="sm"?"text-lg":t==="md"?"text-2xl":"text-3xl",a),children:e})}export{F as C,D as r};
