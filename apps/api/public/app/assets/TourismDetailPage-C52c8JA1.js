import{r as d,j as e,i as I,I as P,F as E,k as z}from"./vendor-radix-i3jPA7eY.js";import{B as u}from"./button-B1VXCcgu.js";import{B as N}from"./badge-DSPvnf2u.js";import{b as q,c as R,e as W,u as X,X as J}from"./index-Bh7TmgIu.js";import{S as b}from"./skeleton-DlYZnxMK.js";import{S as L,a as B}from"./scroll-area-BsR4MXtk.js";import{T as K,S as Q}from"./textarea-BNvj5yLp.js";import{S as Y,a as Z,b as ee,c as se}from"./sheet-CFcaHhXN.js";import{u as ae,T as te,P as A}from"./tourism.types-MwKIHYz9.js";import{u as le}from"./useAuthStore-Bizwf6F5.js";import{M as k}from"./map-pin-DK-zj8ow.js";import{m,A as M}from"./vendor-motion-CFwwOuCD.js";import{A as re}from"./arrow-left-DhMGGVee.js";import{B as ie}from"./bookmark-zuiQENJ8.js";import{S as ne}from"./share-2-y8bElEib.js";import{C as G}from"./camera-k3vq_jlQ.js";import{C as ce}from"./circle-check-DTBGDOVo.js";import{C as V}from"./clock-Dt9SAY5v.js";import{P as oe}from"./phone-SQTlpA98.js";import{G as de,I as me}from"./instagram-D5wXDS-8.js";import{N as T}from"./navigation-D4kdTXo9.js";import{M as C}from"./message-circle-BXTpgf8o.js";import{H as xe}from"./heart-CTvv23q_.js";import{C as he}from"./chevron-right-C_IureTA.js";import{S as f}from"./star-dt7o2ETY.js";import{T as ue}from"./thumbs-up-7Zu6dFWv.js";import"./vendor-utils-DycLLelI.js";import"./vendor-query-1wfeA5IL.js";import"./localDatabase-DQvpZPSm.js";import"./client-BoGyDRku.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=q("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),D=d.forwardRef(({className:a,...t},l)=>e.jsx(I,{ref:l,className:R("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...t}));D.displayName=I.displayName;const F=d.forwardRef(({className:a,...t},l)=>e.jsx(P,{ref:l,className:R("aspect-square h-full w-full",a),...t}));F.displayName=P.displayName;const H=d.forwardRef(({className:a,...t},l)=>e.jsx(E,{ref:l,className:R("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...t}));H.displayName=E.displayName;var fe="AspectRatio",O=d.forwardRef((a,t)=>{const{ratio:l=1/1,style:i,...c}=a;return e.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:`${100/l}%`},"data-radix-aspect-ratio-wrapper":"",children:e.jsx(z.div,{...c,ref:t,style:{...i,position:"absolute",top:0,right:0,bottom:0,left:0}})})});O.displayName=fe;var pe=O;const je=pe;function U({rating:a,size:t="md",showValue:l=!0}){const i=[],c=Math.floor(a),r=a%1>=.5,s={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};for(let o=0;o<5;o++)o<c?i.push(e.jsx(f,{className:`${s[t]} fill-yellow-400 text-yellow-400`},o)):o===c&&r?i.push(e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:`${s[t]} text-gray-300`}),e.jsx(f,{className:`${s[t]} fill-yellow-400 text-yellow-400 absolute top-0 left-0`,style:{clipPath:"inset(0 50% 0 0)"}})]},o)):i.push(e.jsx(f,{className:`${s[t]} text-gray-300`},o));return e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"flex items-center gap-0.5",children:i}),l&&e.jsx("span",{className:`font-semibold ${t==="lg"?"text-lg":""}`,children:a.toFixed(1)})]})}function ge({media:a,initialIndex:t=0,onClose:l}){const[i,c]=d.useState(t),r=a[i];return e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/95 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 safe-top",children:[e.jsxs("span",{className:"text-white/80 text-sm",children:[i+1," / ",a.length]}),e.jsx("button",{onClick:l,children:e.jsx(J,{className:"w-6 h-6 text-white"})})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:r.type==="video"?e.jsxs("div",{className:"relative w-full max-w-lg aspect-video bg-black rounded-lg overflow-hidden",children:[e.jsx("img",{src:r.thumbnailUrl||r.url,alt:"",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 backdrop-blur flex items-center justify-center",children:e.jsx(S,{className:"w-8 h-8 text-white ml-1"})})})]}):e.jsx("img",{src:r.url,alt:r.caption||"",className:"max-w-full max-h-full object-contain rounded-lg"})}),r.caption&&e.jsx("div",{className:"p-4 text-center",children:e.jsx("p",{className:"text-white/80 text-sm",children:r.caption})}),e.jsxs(L,{className:"p-4 safe-bottom",children:[e.jsx("div",{className:"flex gap-2 justify-center",children:a.map((s,o)=>e.jsxs("button",{onClick:()=>c(o),className:`
                w-16 h-16 rounded-lg overflow-hidden shrink-0
                ${o===i?"ring-2 ring-white":"opacity-50"}
              `,children:[e.jsx("img",{src:s.thumbnailUrl||s.url,alt:"",className:"w-full h-full object-cover"}),s.type==="video"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx(S,{className:"w-4 h-4 text-white"})})]},s.id))}),e.jsx(B,{orientation:"horizontal"})]})]})}function Ne({hours:a}){const t=new Date().getDay(),[l,i]=d.useState(!1),c=a.find(s=>s.day===t),r=c&&!c.isClosed;return e.jsxs("div",{className:"bg-muted/50 rounded-xl p-4",children:[e.jsxs("button",{onClick:()=>i(!l),className:"w-full flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:`font-medium ${r?"text-green-600":"text-red-600"}`,children:r?"Aberto agora":"Fechado"}),c&&!c.isClosed&&e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["Â· atÃ© ",c.close]})]})]}),e.jsx(he,{className:`w-5 h-5 text-muted-foreground transition-transform ${l?"rotate-90":""}`})]}),e.jsx(M,{children:l&&e.jsx(m.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx("div",{className:"mt-4 space-y-2 border-t border-border pt-4",children:a.map(s=>e.jsxs("div",{className:`flex justify-between text-sm ${s.day===t?"font-medium":""}`,children:[e.jsx("span",{children:s.dayLabel}),e.jsx("span",{className:s.isClosed?"text-red-600":"",children:s.isClosed?"Fechado":`${s.open} - ${s.close}`})]},s.day))})})})]})}function be({review:a,onLike:t}){const i=new Date(a.createdAt).toLocaleDateString("pt-BR",{month:"short",year:"numeric"});return e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsxs(D,{className:"w-10 h-10",children:[e.jsx(F,{src:a.autor.avatarUrl}),e.jsx(H,{children:a.autor.nome.charAt(0)})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-foreground",children:a.autor.nome}),a.autor.reviewsCount&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.autor.reviewsCount," avaliaÃ§Ãµes"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx(U,{rating:a.rating,size:"sm",showValue:!1}),e.jsx("span",{className:"text-xs text-muted-foreground",children:i})]})]})]}),a.titulo&&e.jsx("h4",{className:"font-medium text-foreground mb-1",children:a.titulo}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:a.texto}),a.fotos&&a.fotos.length>0&&e.jsxs("div",{className:"flex gap-2 mt-3",children:[a.fotos.slice(0,3).map((c,r)=>e.jsx("div",{className:"w-20 h-20 rounded-lg overflow-hidden",children:e.jsx("img",{src:c,alt:"",className:"w-full h-full object-cover"})},r)),a.fotos.length>3&&e.jsx("div",{className:"w-20 h-20 rounded-lg bg-muted flex items-center justify-center",children:e.jsxs("span",{className:"text-sm font-medium",children:["+",a.fotos.length-3]})})]}),e.jsx("div",{className:"flex items-center justify-between mt-4 pt-3 border-t border-border",children:e.jsxs(m.button,{whileTap:{scale:.95},onClick:t,className:"flex items-center gap-1.5 text-sm text-muted-foreground",children:[e.jsx(ue,{className:`w-4 h-4 ${a.liked?"fill-primary text-primary":""}`}),e.jsxs("span",{children:["Ãštil (",a.likesCount,")"]})]})})]})}function we({spotName:a,onSubmit:t,isAuthenticated:l,onLoginClick:i}){const[c,r]=d.useState(!1),[s,o]=d.useState(0),[h,p]=d.useState(""),[w,j]=d.useState(0),v=()=>{s>0&&h.trim()&&(t({rating:s,text:h}),r(!1),o(0),p(""))};return l?e.jsxs(e.Fragment,{children:[e.jsxs(u,{onClick:()=>r(!0),className:"w-full",variant:"outline",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Escrever avaliaÃ§Ã£o"]}),e.jsx(Y,{open:c,onOpenChange:r,children:e.jsxs(Z,{side:"bottom",className:"h-[85vh] rounded-t-3xl",children:[e.jsx(ee,{children:e.jsxs(se,{children:["Avaliar ",a]})}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Toque nas estrelas para avaliar"}),e.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(x=>e.jsx(m.button,{whileTap:{scale:.9},onMouseEnter:()=>j(x),onMouseLeave:()=>j(0),onClick:()=>o(x),className:"p-1",children:e.jsx(f,{className:`w-10 h-10 ${x<=(w||s)?"fill-yellow-400 text-yellow-400":"text-gray-300"}`})},x))}),s>0&&e.jsx(m.p,{initial:{opacity:0},animate:{opacity:1},className:"mt-2 text-sm font-medium",children:["","PÃ©ssimo","Ruim","Regular","Bom","Excelente"][s]})]}),e.jsxs("div",{children:[e.jsx(K,{placeholder:"Conte sua experiÃªncia neste lugar...",value:h,onChange:x=>p(x.target.value),className:"min-h-[120px] resize-none"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 text-right",children:[h.length,"/500"]})]}),e.jsxs(u,{variant:"outline",className:"w-full",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Adicionar fotos"]}),e.jsxs(u,{onClick:v,disabled:s===0||!h.trim(),className:"w-full",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Publicar avaliaÃ§Ã£o"]})]})]})})]}):e.jsxs(u,{onClick:i,className:"w-full",variant:"outline",children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Cadastre/Entre para avaliar"]})}function Ye(){const{id:a}=W(),t=X(),[l,i]=d.useState(!1),[c,r]=d.useState(0);d.useRef(null);const{spot:s,reviews:o,isLoading:h,likeSpot:p,saveSpot:w,createReview:j}=ae(a||""),{isAuthenticated:v}=le(),x=d.useCallback(()=>{t("/entrar",{state:{from:`/ponto-turistico/${a}`}})},[t,a]),g=s?.categoria?te[s.categoria]:null,_=async()=>{if(navigator.share&&s)try{await navigator.share({title:s.titulo,text:s.descCurta,url:window.location.href})}catch{}},$=n=>{r(n),i(!0)};return h?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(b,{className:"w-full h-64"}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx(b,{className:"h-8 w-3/4"}),e.jsx(b,{className:"h-4 w-full"}),e.jsx(b,{className:"h-4 w-2/3"})]})]}):s?e.jsxs("div",{className:"min-h-screen bg-background pb-24",children:[e.jsxs("div",{className:"relative",children:[e.jsx(je,{ratio:4/3,children:e.jsx("img",{src:s.imageUrl,alt:s.titulo,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-black/30"}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 safe-top p-4 flex items-center justify-between",children:[e.jsx(m.button,{whileTap:{scale:.9},onClick:()=>t(-1),className:"w-10 h-10 rounded-full bg-white/90 backdrop-blur flex items-center justify-center shadow-lg",children:e.jsx(re,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m.button,{whileTap:{scale:.9},onClick:w,className:"w-10 h-10 rounded-full bg-white/90 backdrop-blur flex items-center justify-center shadow-lg",children:e.jsx(ie,{className:`w-5 h-5 ${s.isSaved?"fill-primary text-primary":""}`})}),e.jsx(m.button,{whileTap:{scale:.9},onClick:_,className:"w-10 h-10 rounded-full bg-white/90 backdrop-blur flex items-center justify-center shadow-lg",children:e.jsx(ne,{className:"w-5 h-5"})})]})]}),s.gallery&&s.gallery.length>1&&e.jsxs("button",{onClick:()=>$(0),className:"absolute bottom-4 right-4 px-3 py-1.5 rounded-full bg-black/50 backdrop-blur text-white text-sm flex items-center gap-1.5",children:[e.jsx(G,{className:"w-4 h-4"}),s.gallery.length," fotos"]})]}),e.jsxs("div",{className:"px-4 -mt-6 relative z-10",children:[e.jsxs("div",{className:"bg-card rounded-2xl p-4 shadow-lg mb-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[g&&e.jsxs(N,{className:g.color,children:[g.icon," ",g.label]}),s.isVerificado&&e.jsxs("div",{className:"flex items-center gap-1 text-primary text-xs",children:[e.jsx(ce,{className:"w-4 h-4"}),"Verificado"]})]}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:s.titulo}),e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(U,{rating:s.rating,size:"lg"}),e.jsxs("span",{className:"text-muted-foreground",children:[s.reviewsCount," avaliaÃ§Ãµes"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(k,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"text-sm",children:s.endereco})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[s.preco&&e.jsxs(N,{variant:"secondary",children:[A[s.preco]?.icon," ",A[s.preco]?.label]}),s.duracao&&e.jsxs(N,{variant:"secondary",children:[e.jsx(V,{className:"w-3 h-3 mr-1"}),s.duracao]})]})]}),s.gallery&&s.gallery.length>0&&e.jsxs(L,{className:"mb-4 -mx-4 px-4",children:[e.jsx("div",{className:"flex gap-2",children:s.gallery.map((n,y)=>e.jsxs("button",{onClick:()=>$(y),className:"w-24 h-24 rounded-xl overflow-hidden shrink-0 relative",children:[e.jsx("img",{src:n.thumbnailUrl||n.url,alt:n.caption||"",className:"w-full h-full object-cover"}),n.type==="video"&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx(S,{className:"w-6 h-6 text-white"})})]},n.id))}),e.jsx(B,{orientation:"horizontal"})]}),e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm mb-4",children:[e.jsx("h2",{className:"font-semibold text-foreground mb-3",children:"Sobre"}),e.jsx("div",{className:"text-sm text-muted-foreground leading-relaxed whitespace-pre-line",children:s.descLonga||s.descCurta})]}),s.horarios&&s.horarios.length>0&&e.jsx("div",{className:"mb-4",children:e.jsx(Ne,{hours:s.horarios})}),e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm mb-4 space-y-3",children:[s.telefone&&e.jsxs("a",{href:`tel:${s.telefone}`,className:"flex items-center gap-3 text-foreground",children:[e.jsx(oe,{className:"w-5 h-5 text-muted-foreground"}),e.jsx("span",{children:s.telefone})]}),s.website&&e.jsxs("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-primary",children:[e.jsx(de,{className:"w-5 h-5"}),e.jsx("span",{className:"truncate",children:s.website.replace(/^https?:\/\//,"")})]}),s.instagram&&e.jsxs("a",{href:`https://instagram.com/${s.instagram.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-pink-600",children:[e.jsx(me,{className:"w-5 h-5"}),e.jsx("span",{children:s.instagram})]})]}),s.comoChegar&&e.jsxs("div",{className:"bg-card rounded-xl p-4 shadow-sm mb-4",children:[e.jsxs("h2",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Como chegar"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.comoChegar}),s.latitude&&s.longitude&&e.jsxs(u,{variant:"outline",className:"mt-3 w-full",onClick:()=>window.open(`https://maps.google.com/?q=${s.latitude},${s.longitude}`,"_blank"),children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Abrir no Google Maps"]})]}),s.dicasVisita&&s.dicasVisita.length>0&&e.jsxs("div",{className:"bg-secondary/10 rounded-xl p-4 mb-4",children:[e.jsx("h2",{className:"font-semibold text-foreground mb-3",children:"ðŸ’¡ Dicas de visita"}),e.jsx("ul",{className:"space-y-2",children:s.dicasVisita.map((n,y)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"text-secondary",children:"â€¢"}),e.jsx("span",{className:"text-muted-foreground",children:n})]},y))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"font-semibold text-foreground",children:["AvaliaÃ§Ãµes (",o?.length||0,")"]})}),e.jsx(we,{spotName:s.titulo,isAuthenticated:v,onLoginClick:x,onSubmit:n=>{j({rating:n.rating,texto:n.text})}}),e.jsx("div",{className:"space-y-3 mt-4",children:!o||o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(C,{className:"w-10 h-10 mx-auto text-muted-foreground mb-3"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Seja o primeiro a avaliar este lugar!"})]}):o.map(n=>e.jsx(be,{review:n},n.id))})]}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.map(n=>e.jsxs(N,{variant:"outline",className:"text-xs",children:["#",n]},n))})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-background/95 backdrop-blur border-t border-border safe-bottom",children:e.jsxs("div",{className:"max-w-md mx-auto flex gap-3",children:[e.jsxs(m.button,{whileTap:{scale:.95},onClick:p,className:`
              flex-1 flex items-center justify-center gap-2 py-3 rounded-xl font-medium
              ${s.liked?"bg-accent/10 text-accent border border-accent":"bg-muted text-foreground"}
            `,children:[e.jsx(xe,{className:`w-5 h-5 ${s.liked?"fill-current":""}`}),s.likesCount]}),s.latitude&&s.longitude&&e.jsxs(u,{className:"flex-[2]",onClick:()=>window.open(`https://maps.google.com/maps/dir/?api=1&destination=${s.latitude},${s.longitude}`,"_blank"),children:[e.jsx(T,{className:"w-5 h-5 mr-2"}),"Como chegar"]})]})}),e.jsx(M,{children:l&&s.gallery&&s.gallery.length>0&&e.jsx(ge,{media:s.gallery,initialIndex:c,onClose:()=>i(!1)})})]}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(k,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-lg font-medium mb-2",children:"Lugar nÃ£o encontrado"}),e.jsx(u,{variant:"outline",onClick:()=>t(-1),children:"Voltar"})]})})}export{Ye as default};
