import{r as C,j as e}from"./vendor-radix-i3jPA7eY.js";import{B as i}from"./button-rzM8wV8T.js";import{C as g}from"./card-BmaSWi2r.js";import{B as w}from"./badge-BAPp0roA.js";import{u as N,R as u,c as b}from"./index-CcRQdJ8g.js";import{u as k}from"./useMyReports-B1F9UMjQ.js";import{A as R}from"./arrow-left-CfD044EO.js";import{C as z}from"./circle-x-DejKyAt3.js";import{C as A}from"./circle-check-DxCz12TT.js";import{C as v}from"./circle-alert-CrfZ01ce.js";import{C as L}from"./clock-CZBzjhcy.js";import{L as P}from"./loader-circle-CShzl_qH.js";import{m,A as T}from"./vendor-motion-CFwwOuCD.js";import{F as E}from"./file-text-JwfnLLnV.js";import{P as j}from"./plus-BUIZFfT-.js";import{F}from"./filter-DXD2Yygo.js";import{C as B}from"./chevron-right-st6aQDg0.js";import{M}from"./map-pin-Cp2KGZMh.js";import"./vendor-utils-DycLLelI.js";import"./vendor-query-1wfeA5IL.js";import"./client-BoGyDRku.js";import"./localDatabase-CDfLZ4Kb.js";const p={recebido:{icon:L,color:"text-blue-600 bg-blue-100",label:"Recebido"},em_analise:{icon:v,color:"text-amber-600 bg-amber-100",label:"Em AnÃ¡lise"},em_andamento:{icon:u,color:"text-purple-600 bg-purple-100",label:"Em Andamento"},resolvido:{icon:A,color:"text-green-600 bg-green-100",label:"Resolvido"},nao_procede:{icon:z,color:"text-red-600 bg-red-100",label:"NÃ£o Procede"}};function D({report:s}){const t=N(),r=p[s.status]||p.recebido,d=r.icon,o=n=>new Date(n).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"});return e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileTap:{scale:.98},children:e.jsxs(g,{className:"p-4 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>t(`/reports/${s.id}`),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-3 rounded-xl text-2xl shrink-0",style:{backgroundColor:s.category?.color+"20"},children:s.category?.icon||"ðŸ“‹"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"font-semibold line-clamp-1",children:s.title}),e.jsx(B,{className:"h-5 w-5 text-muted-foreground shrink-0"})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1 mt-0.5",children:s.category?.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsxs(w,{variant:"secondary",className:b("text-xs",r.color),children:[e.jsx(d,{className:"h-3 w-3 mr-1"}),s.statusLabel||r.label]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:o(s.createdAt)})]}),s.addressText&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 flex items-center gap-1",children:[e.jsx(M,{className:"h-3 w-3"}),e.jsx("span",{className:"line-clamp-1",children:s.addressText})]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Protocolo"}),e.jsx("code",{className:"text-xs font-mono font-medium",children:s.protocol})]})]})})}function ie(){const s=N(),{reports:t,isLoading:r,error:d,refetch:o}=k(),[n,x]=C.useState(null),h=n?t.filter(a=>a.status===n):t,y=t.reduce((a,l)=>(a[l.status]=(a[l.status]||0)+1,a),{}),c=!!d;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur-lg border-b safe-top",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>s(-1),className:"rounded-full",children:e.jsx(R,{className:"h-5 w-5"})}),e.jsx("h1",{className:"font-semibold text-lg",children:"Minhas DenÃºncias"}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>o(),className:"rounded-full",children:e.jsx(u,{className:b("h-5 w-5",r&&"animate-spin")})})]})}),e.jsxs("main",{className:"p-4 pb-32",children:[t.length>0&&e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-3 mb-4",children:[e.jsxs(i,{variant:n===null?"default":"outline",size:"sm",onClick:()=>x(null),className:"shrink-0",children:["Todas (",t.length,")"]}),Object.entries(y).map(([a,l])=>{const f=p[a];return f?e.jsxs(i,{variant:n===a?"default":"outline",size:"sm",onClick:()=>x(n===a?null:a),className:"shrink-0",children:[f.label," (",l,")"]},a):null})]}),r&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(P,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Carregando denÃºncias..."})]}),c&&e.jsxs(g,{className:"p-6 text-center",children:[e.jsx(v,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Erro ao carregar"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"NÃ£o foi possÃ­vel carregar suas denÃºncias."}),e.jsxs(i,{onClick:()=>o(),children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Tentar novamente"]})]}),!r&&!c&&t.length===0&&e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[e.jsx("div",{className:"p-6 rounded-full bg-muted/50 inline-block mb-6",children:e.jsx(E,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Nenhuma denÃºncia"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"VocÃª ainda nÃ£o enviou nenhuma denÃºncia."}),e.jsxs(i,{onClick:()=>s("/report"),children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Fazer primeira denÃºncia"]})]}),!r&&!c&&h.length>0&&e.jsx("div",{className:"space-y-3",children:e.jsx(T,{children:h.map((a,l)=>e.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:l*.05},children:e.jsx(D,{report:a})},a.id))})}),!r&&!c&&t.length>0&&h.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(F,{className:"h-8 w-8 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Nenhuma denÃºncia com esse status."}),e.jsx(i,{variant:"ghost",onClick:()=>x(null),className:"mt-2",children:"Limpar filtro"})]})]}),e.jsx("div",{className:"fixed bottom-24 right-4 z-50",children:e.jsx(m.div,{whileTap:{scale:.95},children:e.jsx(i,{size:"lg",className:"h-14 w-14 rounded-full shadow-lg",onClick:()=>s("/report"),children:e.jsx(j,{className:"h-6 w-6"})})})})]})}export{ie as default};
