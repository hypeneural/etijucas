import{r as i,j as e}from"./vendor-radix-CUH4rfwv.js";import{u as w,L as d,c as u}from"./index-C_ff57Qd.js";import{B as S}from"./button-CQK8Uqe-.js";import{C as L}from"./card-DdyoOvUk.js";import{I as k}from"./input-CC_xAZX7.js";import{P as E}from"./PhoneInput-CFxNWCXF.js";import{L as f}from"./label-CWhE399p.js";import"./slider-D26ZSWQq.js";import{v as A,c as m,a as P}from"./auth.service-qU9X3PjQ.js";import{u as I}from"./useAuthStore-zZ7TxdTJ.js";import{m as s}from"./vendor-motion-BFiVL1R0.js";import{M as T}from"./map-pin-DYTTQm8W.js";import{L as C}from"./lock-CykgLGns.js";import{L as D}from"./loader-circle-Cr9aB7B2.js";import{L as M}from"./log-in-Ci_hsb_F.js";import{M as F}from"./message-circle-B0Gern5B.js";import{U}from"./users-Ck9rzIio.js";import{S as R}from"./sparkles-BIzKoxcF.js";import"./vendor-utils-DF9nhviX.js";import"./vendor-query-BEEFX5y8.js";import"./useHaptics-9RCaLgIn.js";import"./phone-CJIaptGy.js";import"./check-DinIvohm.js";import"./circle-alert-CKf2uAbp.js";import"./client-w4Cmw8pS.js";import"./middleware-WYGlAF-S.js";function ce(){const g=w(),j=I(r=>r.setAuth),[o,y]=i.useState(""),[n,N]=i.useState(""),[v,_]=i.useState(!1),[c,p]=i.useState(!1),[x,t]=i.useState(null),h=A(m(o)),l=h&&n.length>=6,b=async r=>{if(r.preventDefault(),!!l){p(!0),t(null);try{const a=await P.login({phone:m(o),password:n});a.token&&a.user&&(j(a.user,a.token,a.refreshToken),g("/"))}catch(a){a.data?.code==="RATE_LIMITED"&&a.data?.retryAfter?t(`Muitas tentativas. Tente novamente em ${a.data.retryAfter} segundos.`):a.status===401||a.data?.code==="INVALID_CREDENTIALS"?t("Telefone ou senha incorretos"):a.status===404||a.data?.code==="USER_NOT_FOUND"?t("Usuário não encontrado. Crie uma conta."):t(a.message||"Erro ao realizar login")}finally{p(!1)}}};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-primary/5 via-background to-primary/10",children:[e.jsxs(s.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},className:"pt-12 pb-8 px-6 text-center",children:[e.jsx(s.div,{initial:{scale:.8},animate:{scale:1},transition:{type:"spring",bounce:.5,delay:.2},className:"inline-flex p-4 rounded-3xl bg-gradient-to-br from-primary to-primary/70 shadow-xl shadow-primary/30 mb-4",children:e.jsx(T,{className:"h-12 w-12 text-white"})}),e.jsx(s.h1,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-3xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:"eTijucas"}),e.jsx(s.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"text-muted-foreground mt-1",children:"Seu dia a dia em Tijucas"})]}),e.jsx(s.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"flex-1 px-6",children:e.jsx(L,{className:"p-6 shadow-xl border-0 bg-background/80 backdrop-blur-xl",children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Bem-vindo de volta!"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Digite seu telefone e senha para entrar"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{children:"Telefone (WhatsApp)"}),e.jsx(E,{value:o,onChange:y,error:void 0,autoFocus:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(f,{children:"Senha"}),e.jsx(d,{to:"/esqueci-senha",className:"text-xs text-primary hover:underline",children:"Esqueceu a senha?"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),e.jsx(k,{type:v?"text":"password",value:n,onChange:r=>N(r.target.value),className:"pl-10",placeholder:"Sua senha"})]})]})]}),x&&e.jsx(s.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"p-3 rounded-xl bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 text-center",children:x})}),e.jsx(S,{type:"submit",size:"lg",disabled:!l||c,className:u("w-full h-14 text-lg font-semibold rounded-2xl","bg-gradient-to-r from-primary to-primary/80","shadow-lg shadow-primary/30",l&&"hover:shadow-xl hover:shadow-primary/40"),children:c?e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"h-5 w-5 mr-2 animate-spin"}),"Entrando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),"Entrar"]})}),e.jsx("div",{className:"text-center pt-2",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Ainda não tem conta?"," ",e.jsx(d,{to:"/cadastro",className:"text-primary font-semibold hover:underline",children:"Criar conta"})]})}),e.jsxs("div",{className:"relative my-4",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"ou"})})]}),e.jsxs(d,{to:"/login/otp",state:h?{phone:m(o)}:void 0,className:u("flex items-center justify-center gap-2 w-full h-12 rounded-2xl font-semibold","bg-gradient-to-r from-green-500 to-green-600 text-white","shadow-lg shadow-green-500/30","hover:shadow-xl hover:shadow-green-500/40 transition-all"),children:[e.jsx(F,{className:"h-5 w-5"}),"Entrar via WhatsApp"]})]})})}),e.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"py-8 px-6",children:e.jsxs("div",{className:"flex items-center justify-center gap-6 text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"text-sm font-medium",children:"1.234 moradores"})]}),e.jsx("div",{className:"w-px h-4 bg-border"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-amber-500"}),e.jsx("span",{className:"text-sm font-medium",children:"App oficial"})]})]})})]})}export{ce as default};
