import{r as O,j as e,i as V,I as U}from"./vendor-radix-CZ2RePwe.js";import{B as y}from"./button-8l-Vk_Jy.js";import{B as f}from"./badge-k7oIRatA.js";import{C as x,a as h,b as u,c as g}from"./card-DhH9a9O9.js";import{A as D,a as H,b as F}from"./avatar-0aK9NAqD.js";import{f as T,d as p,n as R,u as q,o as z,l as Y,b as G,p as w,B as K,m as Q,Q as k}from"./index-DIvM20Ke.js";import{u as C}from"./vendor-query-CX3RJjg_.js";import{a as A}from"./votes.service-Bxz_7JCe.js";import{V as S}from"./votes--jqTh9CK.js";import{A as X}from"./arrow-left-CQtUEc8t.js";import{S as J}from"./share-2-mP_n8ZZm.js";import{m as c,A as W}from"./vendor-motion-DKd-IkFU.js";import{P as Z}from"./phone-DY6Bg14T.js";import{M as ee}from"./mail-Dv9Y3fRV.js";import{G as ae,I as se}from"./instagram-Jro6VdZj.js";import{E as re}from"./external-link-DFh03Ljw.js";import{M as te}from"./message-circle-kF1oaZOw.js";import{Y as oe}from"./youtube-BLk1nNyf.js";import{C as B}from"./circle-check-BGpw9wxJ.js";import{C as $}from"./circle-x-CCDTzcag.js";import{C as E}from"./clock-BbM-zKCS.js";import"./vendor-utils-BtjSOnCr.js";import"./useHaptics-QdUZx3l_.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=T("CircleMinus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=T("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),_=O.forwardRef(({className:s,value:t,...d},n)=>e.jsx(V,{ref:n,className:p("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...d,children:e.jsx(U,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));_.displayName=V.displayName;function Be(){const{slug:s}=R(),t=q(),{toast:d}=z(),{activeTab:n,setActiveTab:r}=Y(),{data:a,isLoading:j,error:N}=C({queryKey:k.votes.vereador(s||""),queryFn:()=>A.getBySlug(s),enabled:!!s,staleTime:5*60*1e3}),{data:i}=C({queryKey:k.votes.vereadorVotacoes(s||""),queryFn:()=>A.getVotacoes(s),enabled:!!s,staleTime:5*60*1e3}),I=async()=>{if(!a)return;const o={title:a.nome,text:`${a.nome} - ${a.mandatoAtual?.partido?.sigla||"Vereador"}`,url:window.location.href};if(navigator.share)try{await navigator.share(o)}catch{}else navigator.clipboard&&(await navigator.clipboard.writeText(o.url),d({title:"Link copiado!",description:"Cole onde quiser compartilhar."}))},L=o=>{r(o),t("/")},P=O.useMemo(()=>a?a.nome.split(" ").map(o=>o[0]).slice(0,2).join("").toUpperCase():"",[a]);if(j)return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-muted/50",children:e.jsx("div",{className:"relative w-full max-w-[420px] h-full bg-background flex items-center justify-center",children:e.jsx(G,{className:"h-8 w-8 animate-spin text-primary"})})});if(N||!a)return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-muted/50",children:e.jsxs("div",{className:"relative w-full max-w-[420px] h-full bg-background flex flex-col items-center justify-center gap-4 p-6",children:[e.jsx("p",{className:"text-muted-foreground text-center",children:"Não foi possível carregar os dados do vereador"}),e.jsx(y,{variant:"outline",onClick:()=>t(-1),children:"Voltar"})]})});const m=a.mandatoAtual?.partido,l=a.estatisticas;return e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-muted/50",children:e.jsxs("div",{className:"relative w-full max-w-[420px] h-full bg-background overflow-hidden shadow-elevated",children:[e.jsxs("div",{className:"h-full overflow-y-auto pb-24",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-background/95 backdrop-blur-xl border-b",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-top",children:[e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:e.jsx(X,{className:"h-5 w-5"})}),e.jsx("h1",{className:"text-lg font-bold",children:"Perfil do Vereador"}),e.jsx(y,{variant:"ghost",size:"icon",onClick:I,children:e.jsx(J,{className:"h-5 w-5"})})]})}),e.jsxs("main",{className:"px-4 py-5 space-y-6",children:[e.jsx(c.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs(x,{className:"rounded-2xl overflow-hidden",children:[e.jsx("div",{className:"h-2",style:{backgroundColor:m?.corHex||"#6B7280"}}),e.jsxs(h,{className:"p-6 flex flex-col items-center text-center gap-4",children:[e.jsxs(D,{className:"w-24 h-24 border-4 border-muted shadow-lg",children:[e.jsx(H,{src:a.fotoUrl||"",alt:a.nome}),e.jsx(F,{className:"text-2xl font-bold bg-primary/10 text-primary",children:P})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:a.nome}),e.jsxs("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[m&&e.jsx(f,{className:"px-3 py-1",style:{backgroundColor:`${m.corHex}20`,borderColor:m.corHex,color:m.corHex},children:m.sigla}),a.mandatoAtual?.cargo&&e.jsx(f,{variant:"secondary",children:a.mandatoAtual.cargo})]}),a.mandatoAtual?.legislatura&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a.mandatoAtual.legislatura.nomeCompleto}),!a.mandatoAtual?.emExercicio&&e.jsx(f,{variant:"outline",className:"text-amber-600 border-amber-300",children:"Licenciado do mandato"})]})]})]})}),a.bio&&e.jsx(c.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},children:e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(g,{className:"text-base",children:"Sobre"})}),e.jsx(h,{children:e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:a.bio})})]})}),e.jsx(c.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(g,{className:"text-base",children:"Contato"})}),e.jsxs(h,{className:"space-y-3",children:[a.telefone&&e.jsxs("a",{href:`tel:${a.telefone}`,className:"flex items-center gap-3 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(Z,{className:"h-4 w-4 text-primary"}),a.telefone]}),a.email&&e.jsxs("a",{href:`mailto:${a.email}`,className:"flex items-center gap-3 text-sm text-muted-foreground hover:text-foreground transition-colors break-all",children:[e.jsx(ee,{className:"h-4 w-4 text-primary flex-shrink-0"}),a.email]}),a.siteOficialUrl&&e.jsxs("a",{href:a.siteOficialUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-sm text-muted-foreground hover:text-foreground transition-colors",children:[e.jsx(ae,{className:"h-4 w-4 text-primary"}),"Site Oficial",e.jsx(re,{className:"h-3 w-3 ml-auto"})]}),a.redesSociais&&Object.keys(a.redesSociais).length>0&&e.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[a.redesSociais.facebook&&e.jsx("a",{href:`https://facebook.com/${a.redesSociais.facebook}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 hover:scale-110 transition-transform",children:e.jsx(ie,{className:"h-4 w-4"})}),a.redesSociais.instagram&&e.jsx("a",{href:`https://instagram.com/${a.redesSociais.instagram}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-pink-100 dark:bg-pink-900/30 text-pink-600 dark:text-pink-400 hover:scale-110 transition-transform",children:e.jsx(se,{className:"h-4 w-4"})}),a.redesSociais.whatsapp&&e.jsx("a",{href:`https://wa.me/${a.redesSociais.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 hover:scale-110 transition-transform",children:e.jsx(te,{className:"h-4 w-4"})}),a.redesSociais.youtube&&e.jsx("a",{href:`https://youtube.com/${a.redesSociais.youtube}`,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-full bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 hover:scale-110 transition-transform",children:e.jsx(oe,{className:"h-4 w-4"})})]})]})]})}),l&&l.totalVotos>0&&e.jsx(c.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},children:e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsx(g,{className:"text-base",children:"Estatísticas de Votação"})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Presença nas votações"}),e.jsxs("span",{className:"font-semibold",children:[l.presencaPercent,"%"]})]}),e.jsx(_,{value:l.presencaPercent,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[e.jsx(b,{icon:e.jsx(B,{className:"h-4 w-4 text-green-500"}),label:"Votou Sim",value:l.votouSim,color:"green"}),e.jsx(b,{icon:e.jsx($,{className:"h-4 w-4 text-red-500"}),label:"Votou Não",value:l.votouNao,color:"red"}),e.jsx(b,{icon:e.jsx(M,{className:"h-4 w-4 text-amber-500"}),label:"Abstenções",value:l.abstencoes,color:"amber"}),e.jsx(b,{icon:e.jsx(E,{className:"h-4 w-4 text-gray-500"}),label:"Ausências",value:l.ausencias,color:"gray"})]})]})]})}),i&&i.length>0&&e.jsx(c.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsxs(x,{children:[e.jsx(u,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(g,{className:"text-base flex items-center gap-2",children:[e.jsx(w,{className:"h-4 w-4 text-primary"}),"Histórico de Votos"]}),e.jsxs(f,{variant:"secondary",className:"text-xs",children:[i.length," votações"]})]})}),e.jsx(h,{className:"pt-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gradient-to-b from-primary via-muted to-muted"}),e.jsx(W,{children:e.jsx("div",{className:"space-y-0",children:i.map((o,v)=>e.jsx(le,{votacao:o,index:v,isLast:v===i.length-1,onClick:()=>t(`/votacoes/${o.id}`)},o.id))})})]})})]})}),(!i||i.length===0)&&e.jsx(c.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:e.jsx(x,{children:e.jsxs(h,{className:"py-8 text-center",children:[e.jsx(w,{className:"h-10 w-10 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Nenhuma votação registrada ainda"})]})})})]})]}),e.jsx(K,{activeTab:n,onTabChange:L})]})})}function b({icon:s,label:t,value:d,color:n}){const r={green:"bg-green-50 dark:bg-green-900/20",red:"bg-red-50 dark:bg-red-900/20",amber:"bg-amber-50 dark:bg-amber-900/20",gray:"bg-gray-50 dark:bg-gray-900/20"};return e.jsxs("div",{className:p("rounded-lg p-3",r[n]),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s,e.jsx("span",{className:"text-xs text-muted-foreground",children:t})]}),e.jsx("span",{className:"text-xl font-bold",children:d})]})}function le({votacao:s,index:t,isLast:d,onClick:n}){const r=s.votoDoVereador||"NAO_VOTOU",a=S[r]||S.NAO_VOTOU,j=N=>new Date(N).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"});return e.jsxs(c.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.05},className:"relative pl-10 pb-4",onClick:n,children:[e.jsxs("div",{className:p("absolute left-2 top-1 w-5 h-5 rounded-full border-2 border-background flex items-center justify-center",a.bgColor),children:[r==="SIM"&&e.jsx(B,{className:"h-3 w-3 text-white"}),r==="NAO"&&e.jsx($,{className:"h-3 w-3 text-white"}),r==="ABSTENCAO"&&e.jsx(M,{className:"h-3 w-3 text-white"}),r==="NAO_VOTOU"&&e.jsx(E,{className:"h-3 w-3 text-white"})]}),e.jsx("div",{className:p("rounded-lg p-3 cursor-pointer transition-all hover:shadow-md","bg-gradient-to-r",r==="SIM"&&"from-green-50 to-green-50/50 dark:from-green-900/20 dark:to-green-900/10 border-l-4 border-green-500",r==="NAO"&&"from-red-50 to-red-50/50 dark:from-red-900/20 dark:to-red-900/10 border-l-4 border-red-500",r==="ABSTENCAO"&&"from-amber-50 to-amber-50/50 dark:from-amber-900/20 dark:to-amber-900/10 border-l-4 border-amber-500",r==="NAO_VOTOU"&&"from-gray-50 to-gray-50/50 dark:from-gray-900/20 dark:to-gray-900/10 border-l-4 border-gray-400"),children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium line-clamp-2 leading-tight",children:s.titulo}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:j(s.data)}),e.jsx(f,{className:p("text-[10px] px-1.5 py-0",a.color),style:{backgroundColor:`${a.bgColor.replace("bg-","")}20`},children:a.label})]})]}),e.jsx(Q,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 mt-0.5"})]})})]})}export{Be as default};
